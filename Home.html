<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Dashboard - Padua Hardware</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
    <link rel="stylesheet" href="root.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: "Poppins", sans-serif;
        }

        body {
            background: url(assets/back.jpg) no-repeat center center/cover fixed;
            backdrop-filter: brightness(0.2);
            color: white;
            overflow-x: hidden;
        }

        .container {
            display: flex;
            min-height: 100vh;
            backdrop-filter: blur(10px);
            gap: 20px;
            padding: 18px;
        }

        .sidebar {
            width: 280px;
            background: linear-gradient(var(--bg-darker), var(--bg-dark)) padding-box,
                var(--gradient-border) border-box;
            background-clip: padding-box, border-box;
            border: 5px solid transparent;
            padding: 30px 25px;

            position: relative;
            overflow: hidden;
        }

        .brand {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 40px;
            padding: 20px;
            background: rgba(var(--color-white-rgb), 0.1);
            border-radius: 15px;
            border: 1px solid rgba(var(--color-white-rgb), 0.2);
            position: relative;
            z-index: 1;
        }

        .brand img {
            width: 50px;
            height: 50px;
            border-radius: 12px;
            border: 2px solid rgba(var(--color-white-rgb), 0.3);

        }

        .brand h4 {
            font-size: 18px;
            font-weight: 700;
            background: var(--gradient-text);
            background-clip: text;
            -webkit-background-clip: text;
            color: transparent;
        }

        .brand small {
            color: #b9c3d9;
            font-size: 12px;
        }

        .stat {
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 15px;
            text-align: center;
            border: 1px solid rgba(var(--color-white-rgb), 0.2);
            backdrop-filter: blur(10px);
            transition: all 0.3s ease;
            position: relative;
            z-index: 1;

        }

        .stat:hover {
            transform: translateY(-5px) scale(1.02);

        }

        .stat h3 {
            font-size: 28px;
            font-weight: 800;
            margin-bottom: 5px;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
        }

        .stat p {
            font-size: 14px;
            opacity: 0.9;
            font-weight: 500;
        }

        .blue {
            background: var(--gradient-primary);

        }

        .orange {
            background: var(--gradient-primary);

        }

        .green {
            background: var(--gradient-primary);

        }

        .red {
            background: var(--gradient-border);

        }

        .welcome {
            margin-top: auto;
            padding: 30px 0;
            text-align: center;
            position: relative;
            z-index: 1;
        }

        .welcome h2 {
            font-size: 24px;
            font-weight: 700;
            background: var(--gradient-text);
            background-clip: text;
            -webkit-background-clip: text;
            color: transparent;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
        }


        .main {
            flex: 1;
            padding: 22px;
            position: relative;
        }

        .topbar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 22px;
            padding: 16px 20px;
            background:
                linear-gradient(var(--bg-darker), var(--bg-dark)) padding-box,
                var(--gradient-border) border-box;
            background-clip: padding-box, border-box;
            border: 5px solid transparent;
            border-radius: 14px;

        }

        .menu {
            display: flex;
            gap: 20px;
        }

        .menu a {
            color: #bcd9ff;
            text-decoration: none;
            font-weight: 500;
            padding: 12px 20px;
            border-radius: 12px;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .menu a::before {
            content: "";
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(var(--color-white-rgb), 0.2), transparent);
            transition: left 0.5s;
        }

        .menu a:hover::before {
            left: 100%;
        }

        .menu a:hover {
            color: white;
            background: rgba(var(--color-white-rgb), 0.1);
            transform: translateY(-2px);
        }

        .menu a {
            position: relative;
            transition: all 0.3s ease;
        }

        .menu a::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(var(--color-white-rgb), 0.2), transparent);
            transition: left 0.5s;
        }

        .menu .active {
            background: var(--gradient-primary);
            color: white;

        }

        .icons {
            display: flex;
            gap: 15px;
        }

        .icons i {
            color: #bcd9ff;
            font-size: 20px;
            padding: 12px;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            background: rgba(var(--color-white-rgb), 0.1);
        }

        .icons i:hover {
            color: var(--color-light-blue);
            background: rgba(var(--color-white-rgb), 0.2);
            transform: scale(1.1);

        }

        .icon-container {
            position: relative;
        }

        .notification-popup {
            position: absolute;
            top: 50px;
            right: 0;
            width: 380px;
            background: linear-gradient(145deg, #0d1430, #070b1d);
            border-radius: 16px;

            border: 2px solid rgba(var(--color-light-blue-rgb), 0.3);
            padding: 20px;
            opacity: 0;
            visibility: hidden;
            transform: translateY(-10px);
            transition: all 0.3s ease;
            z-index: 1000;
            max-height: 500px;
            overflow-y: auto;
        }

        .notification-popup.show {
            opacity: 1;
            visibility: visible;
            transform: translateY(0);
        }

        .notification-title {
            text-align: center;
            margin-bottom: 15px;
            letter-spacing: 1px;
            font-size: 18px;
            font-weight: 700;
            color: white;
        }

        .date-label {
            display: block;
            margin: 15px 0 10px;
            color: var(--color-light-blue);
            font-size: 13px;
            font-weight: 600;
        }

        .notification-item {
            display: flex;
            gap: 12px;
            align-items: flex-start;
            margin-bottom: 12px;
        }

        .notification-icon {
            font-size: 18px;
            min-width: 24px;
            text-align: center;
        }

        .notification-text {
            flex: 1;
        }

        .notification-text strong {
            font-size: 14px;
            color: white;
            display: block;
        }

        .notification-text p {
            font-size: 12px;
            color: #cbd5ff;
            margin-top: 3px;
            line-height: 1.4;
        }

        .notification-divider {
            height: 1px;
            background: rgba(var(--color-white-rgb), 0.15);
            margin: 12px 0;
        }

        .menu-popup-container {
            position: relative;
        }

        .menu-toggle {
            background: var(--gradient-primary);
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 12px;
            font-weight: 500;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: all 0.3s ease;

        }

        .menu-toggle:hover {
            transform: translateY(-2px);

        }

        .menu-popup {
            position: absolute;
            top: 100%;
            right: 0;
            width: 280px;
            background:
                linear-gradient(var(--bg-darker), var(--bg-dark)) padding-box,
                var(--gradient-border) border-box;
            background-clip: padding-box, border-box;
            border: 3px solid transparent;
            border-radius: 18px;

            opacity: 0;
            visibility: hidden;
            transform: translateY(-10px);
            transition: all 0.3s ease;
            z-index: 1000;
            overflow: hidden;
        }

        .menu-popup.active {
            opacity: 1;
            visibility: visible;
            transform: translateY(0);
        }

        .popup-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px 25px;
            border-bottom: 1px solid rgba(var(--color-white-rgb), 0.1);
        }

        .popup-header h4 {
            color: white;
            font-size: 18px;
            margin: 0;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .popup-header h4 i {
            color: var(--color-light-blue);
        }

        .close-popup {
            background: none;
            border: none;
            color: #bcd9ff;
            font-size: 18px;
            cursor: pointer;
            padding: 5px;
            border-radius: 50%;
            transition: all 0.3s ease;
        }

        .close-popup:hover {
            color: #ef4444;
            background: rgba(239, 68, 68, 0.1);
        }

        .popup-content {
            padding: 10px 0;
        }

        .popup-item {
            display: flex;
            align-items: center;
            gap: 15px;
            color: #bcd9ff;
            text-decoration: none;
            padding: 15px 25px;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .popup-item::before {
            content: "";
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(var(--color-white-rgb), 0.1), transparent);
            transition: left 0.5s;
        }

        .popup-item:hover::before {
            left: 100%;
        }

        .popup-item:hover {
            color: white;
            background: rgba(var(--color-white-rgb), 0.1);
            transform: translateX(5px);
        }

        .popup-item i {
            font-size: 18px;
            width: 20px;
            color: var(--color-light-blue);
        }

        .popup-item span {
            font-weight: 500;
        }

        .popup-divider {
            height: 1px;
            background: rgba(var(--color-white-rgb), 0.1);
            margin: 10px 25px;
        }

        .logout-btn {
            color: #ef4444 !important;
        }

        .logout-btn:hover {
            background: rgba(239, 68, 68, 0.1) !important;
            color: #ef4444 !important;
        }

        .logout-btn i {
            color: #ef4444 !important;
        }

        /* home */
        .cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 25px;
            margin: 30px 0;
        }

        .card {
            background: linear-gradient(var(--bg-darker), var(--bg-dark)) padding-box,
                var(--gradient-border) border-box;
            background-clip: padding-box, border-box;
            border: 5px solid transparent;
            padding: 25px;
            border-radius: 18px;

        }

        .card h4 {
            color: #bcd9ff;
            margin-bottom: 10px;
            font-size: 16px;
        }

        .card h2 {
            font-size: 32px;
            font-weight: 800;
            color: white;
            margin-bottom: 5px;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
        }

        .price {
            background: var(--gradient-text);
            background-clip: text;
            -webkit-background-clip: text;
            color: transparent;
        }

        /* TOP SELLING */
        .top-selling {
            background: linear-gradient(var(--bg-darker), var(--bg-dark)) padding-box,
                var(--gradient-border) border-box;
            background-clip: padding-box, border-box;
            border: 5px solid transparent;
            padding: 30px;
            border-radius: 18px;

            margin-bottom: 30px;
            position: relative;
            overflow: hidden;
        }

        .top-selling h3 {
            font-size: 22px;
            font-weight: 700;
            color: white;
            margin-bottom: 20px;
        }

        .top-selling h3 span {
            color: #bcd9ff;
            font-size: 14px;
            font-weight: 400;
        }

        .items {
            display: flex;
            justify-content: space-around;
            gap: 20px;
            flex-wrap: wrap;
            margin-bottom: 20px;
        }

        .item {
            padding: 20px;
            border-radius: 12px;
            text-align: center;
            color: white;
            min-width: 120px;
            transition: all 0.3s ease;
        }

        .item i {
            font-size: 32px;
            margin-bottom: 10px;
        }

        .item p {
            font-size: 14px;
            font-weight: 600;
        }

        .item small {
            display: block;
            color: rgba(var(--color-white-rgb), 0.7);
            font-size: 12px;
            font-weight: 400;
        }

        .item.purple {
            background: var(--gradient-primary);
        }

        .item.blue {
            background: var(--gradient-primary);
        }

        .item.pink {
            background: var(--gradient-border);
        }

        .item.green {
            background: linear-gradient(135deg, #10b981, #34d399);
        }

        .item.red {
            background: linear-gradient(135deg, #ef4444, #f43f5e);
        }

        .datetime {
            text-align: right;
            color: #bcd9ff;
            font-size: 14px;
        }

        .datetime strong {
            color: white;
            font-size: 18px;
            display: block;
        }

        /* BOTTOM PANELS */
        .bottom {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 25px;
        }

        .panel {
            background: linear-gradient(var(--bg-darker), var(--bg-dark)) padding-box,
                var(--gradient-border) border-box;
            background-clip: padding-box, border-box;
            border: 5px solid transparent;
            padding: 30px;
            border-radius: 18px;

            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .panel:hover {
            transform: translateY(-5px);

        }

        .panel h4 {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 20px;
            color: #bcd9ff;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .panel h3 {
            font-size: 22px;
            font-weight: 700;
            color: white;
            margin-bottom: 15px;
        }

        .panel p {
            margin: 10px 0;
            color: #98a6c7;
            font-size: 14px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .panel .green {
            color: #10b981;
            font-weight: 600;
        }

        .panel .orange {
            color: #f59e0b;
            font-weight: 600;
        }

        .panel .red {
            color: #ef4444;
            font-weight: 600;
        }

        .text-green {
            color: #10b981 !important;
        }

        .text-orange {
            color: #f59e0b !important;
        }

        .text-center {
            text-align: center;
        }

        .alert-item {
            margin-bottom: 12px;
            padding: 8px 12px;
            background: rgba(var(--color-white-rgb), 0.05);
            border-radius: 6px;
            border-left: 3px solid;
        }

        .alert-item .green {
            border-left-color: #10b981;
        }

        .alert-item .orange {
            border-left-color: #f59e0b;
        }

        .alert-item .red {
            border-left-color: #ef4444;
        }

        .alert-item p {
            margin: 0 0 4px 0;
            font-size: 14px;
        }

        .alert-item small {
            color: rgba(var(--color-white-rgb), 0.7);
            font-size: 12px;
            font-weight: 400;
        }

        /* INVENTORY ALERTS SECTION */
        .search-filter-section {
            background:
                linear-gradient(var(--bg-darker), var(--bg-dark)) padding-box,
                var(--gradient-border) border-box;
            background-clip: padding-box, border-box;
            border: 5px solid transparent;
            padding: 25px 30px;
            border-radius: 18px;

            margin-bottom: 25px;
        }

        .search-bar {
            position: relative;
            margin-bottom: 20px;
        }

        .search-bar input {
            width: 100%;
            padding: 14px 45px 14px 20px;
            background: rgba(var(--color-white-rgb), 0.05);
            border: 2px solid rgba(var(--color-light-blue-rgb), 0.3);
            border-radius: 12px;
            color: white;
            font-size: 14px;
            transition: all 0.3s ease;
        }

        .search-bar input::placeholder {
            color: #cbd5ff;
        }

        .search-bar input:focus {
            outline: none;
            background: rgba(var(--color-white-rgb), 0.1);
            border-color: var(--color-light-blue);

        }

        .search-bar i {
            position: absolute;
            right: 15px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--color-light-blue);
            pointer-events: none;
        }

        .filter-buttons {
            display: flex;
            gap: 12px;
            flex-wrap: wrap;
        }

        .filter-btn {
            padding: 10px 20px;
            background: rgba(var(--color-white-rgb), 0.05);
            border: 2px solid rgba(var(--color-light-blue-rgb), 0.3);
            color: #bcd9ff;
            border-radius: 12px;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.3s ease;
        }

        .filter-btn:hover {
            background: rgba(var(--color-light-blue-rgb), 0.1);
            border-color: var(--color-light-blue);
            color: var(--color-light-blue);
        }

        .filter-btn.active {
            background: var(--gradient-primary);
            border-color: transparent;
            color: white;

        }

        .alerts-section {
            margin-bottom: 40px;
        }

        .alerts-section h3 {
            font-size: 20px;
            font-weight: 700;
            margin-bottom: 20px;
            color: white;
        }

        .alerts-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
        }

        .alert-card {
            background: linear-gradient(135deg, rgba(var(--color-white-rgb), 0.05), rgba(var(--color-white-rgb), 0.02));
            border: 2px solid;
            border-radius: 15px;
            padding: 25px;
            display: flex;
            align-items: center;
            gap: 20px;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .alert-card::before {
            content: "";
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(var(--color-white-rgb), 0.1), transparent);
            transition: left 0.5s;
            z-index: 0;
        }

        .alert-card:hover::before {
            left: 100%;
        }

        .alert-card:hover {
            transform: translateY(-5px);

        }

        .alert-in-stock {
            border-color: #10b981;
            background: linear-gradient(135deg,
                    rgba(16, 185, 129, 0.1),
                    rgba(16, 185, 129, 0.05));
        }

        .alert-low-stock {
            border-color: #f59e0b;
            background: linear-gradient(135deg,
                    rgba(245, 158, 11, 0.1),
                    rgba(245, 158, 11, 0.05));
        }

        .alert-out-of-stock {
            border-color: #ef4444;
            background: linear-gradient(135deg,
                    rgba(239, 68, 68, 0.1),
                    rgba(239, 68, 68, 0.05));
        }

        .alert-icon {
            font-size: 32px;
            min-width: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            z-index: 1;
        }

        .alert-in-stock .alert-icon {
            color: #10b981;
        }

        .alert-low-stock .alert-icon {
            color: #f59e0b;
        }

        .alert-out-of-stock .alert-icon {
            color: #ef4444;
        }

        .alert-content {
            flex: 1;
            position: relative;
            z-index: 1;
        }

        .alert-content h4 {
            font-size: 16px;
            font-weight: 700;
            color: white;
            margin-bottom: 5px;
        }

        .alert-count {
            font-size: 18px;
            font-weight: 800;
            margin-bottom: 5px;
        }

        .alert-in-stock .alert-count {
            color: #10b981;
        }

        .alert-low-stock .alert-count {
            color: #f59e0b;
        }

        .alert-out-of-stock .alert-count {
            color: #ef4444;
        }

        .alert-desc {
            font-size: 12px;
            color: rgba(var(--color-white-rgb), 0.7);
        }

        .alert-badge {
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 11px;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            position: relative;
            z-index: 1;
            min-width: 80px;
            text-align: center;
        }

        .badge-green {
            background: rgba(16, 185, 129, 0.2);
            color: #10b981;
            border: 1px solid #10b981;
        }

        .badge-yellow {
            background: rgba(245, 158, 11, 0.2);
            color: #f59e0b;
            border: 1px solid #f59e0b;
        }

        .badge-red {
            background: rgba(239, 68, 68, 0.2);
            color: #ef4444;
            border: 1px solid #ef4444;
        }

        .table-section {
            background:
                linear-gradient(var(--bg-darker), var(--bg-dark)) padding-box,
                var(--gradient-border) border-box;
            background-clip: padding-box, border-box;
            border: 5px solid transparent;
            padding: 30px;
            border-radius: 18px;

            overflow-x: auto;
        }

        .table-section h3 {
            font-size: 20px;
            font-weight: 700;
            margin-bottom: 20px;
            color: white;
        }

        table {
            width: 100%;
            border-collapse: collapse;
        }

        table thead {
            background: rgba(var(--color-light-blue-rgb), 0.1);
        }

        table th {
            padding: 15px;
            text-align: left;
            color: var(--color-light-blue);
            font-weight: 600;
            border-bottom: 2px solid rgba(var(--color-light-blue-rgb), 0.2);
        }

        table tbody tr {
            border-bottom: 1px solid rgba(var(--color-white-rgb), 0.05);
            transition: all 0.3s ease;
        }

        table tbody tr:hover {
            background: rgba(var(--color-light-blue-rgb), 0.05);
        }

        table td {
            padding: 15px;
            color: #bcd9ff;
        }

        .status-badge {
            display: inline-block;
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
            text-align: center;
        }

        .status-in {
            background: rgba(0, 255, 156, 0.2);
            color: #00ff9c;
        }

        .status-out {
            background: rgba(255, 77, 77, 0.2);
            color: #ff4d4d;
        }

        .status-stock {
            background: rgba(var(--color-light-blue-rgb), 0.2);
            color: var(--color-light-blue);
        }

        .action-btn {
            padding: 8px 14px;
            background: rgba(var(--color-light-blue-rgb), 0.2);
            border: 1px solid var(--color-light-blue);
            color: var(--color-light-blue);
            border-radius: 8px;
            cursor: pointer;
            font-size: 12px;
            font-weight: 500;
            transition: all 0.3s ease;
            margin-right: 5px;
        }

        .action-btn:hover {
            background: var(--color-light-blue);
            color: var(--bg-darker);
            transform: translateY(-2px);
        }

        .action-btn.delete {
            background: rgba(255, 77, 77, 0.2);
            border-color: #ff4d4d;
            color: #ff4d4d;
        }

        .action-btn.delete:hover {
            background: #ff4d4d;
            color: white;
        }

        .alerts-section {
            margin-bottom: 40px;
        }

        .alerts-section h3 {
            font-size: 20px;
            font-weight: 700;
            margin-bottom: 20px;
            color: white;
        }

        .alerts-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
        }

        .alert-card {
            background: linear-gradient(135deg, rgba(var(--color-white-rgb), 0.05), rgba(var(--color-white-rgb), 0.02));
            border: 2px solid;
            border-radius: 15px;
            padding: 25px;
            display: flex;
            align-items: center;
            gap: 20px;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .alert-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(var(--color-white-rgb), 0.1), transparent);
            transition: left 0.5s;
            z-index: 0;
        }

        .alert-card:hover::before {
            left: 100%;
        }

        .alert-card:hover {
            transform: translateY(-5px);

        }

        .alert-in-stock {
            border-color: #10b981;
            background: linear-gradient(135deg,
                    rgba(16, 185, 129, 0.1),
                    rgba(16, 185, 129, 0.05));
        }

        .alert-low-stock {
            border-color: #f59e0b;
            background: linear-gradient(135deg,
                    rgba(245, 158, 11, 0.1),
                    rgba(245, 158, 11, 0.05));
        }

        .alert-out-of-stock {
            border-color: #ef4444;
            background: linear-gradient(135deg,
                    rgba(239, 68, 68, 0.1),
                    rgba(239, 68, 68, 0.05));
        }

        .alert-icon {
            font-size: 32px;
            min-width: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            z-index: 1;
        }

        .alert-in-stock .alert-icon {
            color: #10b981;
        }

        .alert-low-stock .alert-icon {
            color: #f59e0b;
        }

        .alert-out-of-stock .alert-icon {
            color: #ef4444;
        }

        .alert-content {
            flex: 1;
            position: relative;
            z-index: 1;
        }

        .alert-content h4 {
            font-size: 16px;
            font-weight: 700;
            color: white;
            margin-bottom: 5px;
        }

        .alert-count {
            font-size: 18px;
            font-weight: 800;
            margin-bottom: 5px;
        }

        .alert-in-stock .alert-count {
            color: #10b981;
        }

        .alert-low-stock .alert-count {
            color: #f59e0b;
        }

        .alert-out-of-stock .alert-count {
            color: #ef4444;
        }

        .alert-desc {
            font-size: 12px;
            color: rgba(var(--color-white-rgb), 0.7);
        }

        .alert-badge {
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 11px;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            position: relative;
            z-index: 1;
            min-width: 80px;
            text-align: center;
        }

        .badge-green {
            background: rgba(16, 185, 129, 0.2);
            color: #10b981;
            border: 1px solid #10b981;
        }

        .badge-yellow {
            background: rgba(245, 158, 11, 0.2);
            color: #f59e0b;
            border: 1px solid #f59e0b;
        }

        .badge-red {
            background: rgba(239, 68, 68, 0.2);
            color: #ef4444;
            border: 1px solid #ef4444;
        }

        .table-section {
            background:
                linear-gradient(var(--bg-darker), var(--bg-dark)) padding-box,
                linear-gradient(140deg, var(--color-light-blue), var(--color-light-blue-shade)) border-box;
            background-clip: padding-box, border-box;
            border: 5px solid transparent;
            padding: 30px;
            border-radius: 18px;

            overflow-x: auto;
        }

        .table-section h3 {
            font-size: 20px;
            font-weight: 700;
            margin-bottom: 20px;
            color: white;
        }

        table {
            width: 100%;
            border-collapse: collapse;
        }

        table thead {
            background: rgba(var(--color-light-blue-rgb), 0.1);
        }

        table th {
            padding: 15px;
            text-align: left;
            color: var(--color-light-blue);
            font-weight: 600;
            border-bottom: 2px solid rgba(var(--color-light-blue-rgb), 0.2);
        }

        table tbody tr {
            border-bottom: 1px solid rgba(var(--color-white-rgb), 0.05);
            transition: all 0.3s ease;
        }

        table tbody tr:hover {
            background: rgba(var(--color-light-blue-rgb), 0.05);
        }

        table td {
            padding: 15px;
            color: #bcd9ff;
        }

        .status-badge {
            display: inline-block;
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
            text-align: center;
        }

        .status-in {
            background: rgba(0, 255, 156, 0.2);
            color: #00ff9c;
        }

        .status-out {
            background: rgba(255, 77, 77, 0.2);
            color: #ff4d4d;
        }

        .status-stock {
            background: rgba(var(--color-light-blue-rgb), 0.2);
            color: var(--color-light-blue);
        }

        .action-btn {
            padding: 8px 14px;
            background: rgba(var(--color-light-blue-rgb), 0.2);
            border: 1px solid var(--color-light-blue);
            color: var(--color-light-blue);
            border-radius: 8px;
            cursor: pointer;
            font-size: 12px;
            font-weight: 500;
            transition: all 0.3s ease;
            margin-right: 5px;
        }

        .action-btn:hover {
            background: var(--color-light-blue);
            color: var(--bg-darker);
            transform: translateY(-2px);
        }

        .action-btn.delete {
            background: rgba(255, 77, 77, 0.2);
            border-color: #ff4d4d;
            color: #ff4d4d;
        }

        .action-btn.delete:hover {
            background: #ff4d4d;
            color: white;
        }

        .alerts-section {
            margin-bottom: 40px;
        }

        .alerts-section h3 {
            font-size: 20px;
            font-weight: 700;
            margin-bottom: 20px;
            color: white;
        }

        .alerts-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
        }

        .alert-card {
            background: linear-gradient(135deg, rgba(var(--color-white-rgb), 0.05), rgba(var(--color-white-rgb), 0.02));
            border: 2px solid;
            border-radius: 15px;
            padding: 25px;
            display: flex;
            align-items: center;
            gap: 20px;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .alert-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(var(--color-white-rgb), 0.1), transparent);
            transition: left 0.5s;
            z-index: 0;
        }

        .alert-card:hover::before {
            left: 100%;
        }

        .alert-card:hover {
            transform: translateY(-5px);

        }

        .alert-in-stock {
            border-color: #10b981;
            background: linear-gradient(135deg,
                    rgba(16, 185, 129, 0.1),
                    rgba(16, 185, 129, 0.05));
        }

        .alert-low-stock {
            border-color: #f59e0b;
            background: linear-gradient(135deg,
                    rgba(245, 158, 11, 0.1),
                    rgba(245, 158, 11, 0.05));
        }

        .alert-out-of-stock {
            border-color: #ef4444;
            background: linear-gradient(135deg,
                    rgba(239, 68, 68, 0.1),
                    rgba(239, 68, 68, 0.05));
        }

        .alert-icon {
            font-size: 32px;
            min-width: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            z-index: 1;
        }

        .alert-in-stock .alert-icon {
            color: #10b981;
        }

        .alert-low-stock .alert-icon {
            color: #f59e0b;
        }

        .alert-out-of-stock .alert-icon {
            color: #ef4444;
        }

        .alert-content {
            flex: 1;
            position: relative;
            z-index: 1;
        }

        .alert-content h4 {
            font-size: 16px;
            font-weight: 700;
            color: white;
            margin-bottom: 5px;
        }

        .alert-count {
            font-size: 18px;
            font-weight: 800;
            margin-bottom: 5px;
        }

        .alert-in-stock .alert-count {
            color: #10b981;
        }

        .alert-low-stock .alert-count {
            color: #f59e0b;
        }

        .alert-out-of-stock .alert-count {
            color: #ef4444;
        }

        .alert-desc {
            font-size: 12px;
            color: rgba(var(--color-white-rgb), 0.7);
        }

        .alert-badge {
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 11px;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            position: relative;
            z-index: 1;
            min-width: 80px;
            text-align: center;
        }

        .badge-green {
            background: rgba(16, 185, 129, 0.2);
            color: #10b981;
            border: 1px solid #10b981;
        }

        .badge-yellow {
            background: rgba(245, 158, 11, 0.2);
            color: #f59e0b;
            border: 1px solid #f59e0b;
        }

        .badge-red {
            background: rgba(239, 68, 68, 0.2);
            color: #ef4444;
            border: 1px solid #ef4444;
        }

        .panel.wide {
            grid-column: span 2;
        }

        .view {
            display: inline-block;
            margin-top: 20px;
            color: #3b82f6;
            text-decoration: none;
            font-weight: 600;
            padding: 8px 16px;
            border-radius: 8px;
            background: rgba(59, 130, 246, 0.1);
            border: 1px solid rgba(59, 130, 246, 0.3);
            transition: all 0.3s ease;
        }

        .view:hover {
            background: rgba(59, 130, 246, 0.2);
            color: #60a5fa;
            transform: translateY(-2px);
        }

        /* customers */
        .panel {
            background:
                linear-gradient(var(--bg-darker), var(--bg-dark)) padding-box,
                linear-gradient(140deg, var(--color-light-blue), var(--color-light-blue-shade)) border-box;
            background-clip: padding-box, border-box;
            border: 5px solid transparent;
            padding: 30px;
            border-radius: 18px;

            margin-bottom: 20px;
        }

        .panel h3 {
            font-size: 20px;
            font-weight: 700;
            margin-bottom: 20px;
            color: white;
        }

        /* SEARCH BAR & FILTERS */
        .search-filter-container {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
            align-items: center;
            flex-wrap: wrap;
        }

        .search-box {
            flex: 1;
            min-width: 250px;
            position: relative;
        }

        .search-box input {
            width: 100%;
            padding: 12px 15px 12px 40px;
            background: rgba(var(--color-white-rgb), 0.05);
            border: 2px solid rgba(var(--color-light-blue-rgb), 0.3);
            border-radius: 10px;
            color: white;
            font-size: 14px;
            transition: all 0.3s ease;
            font-family: "Poppins", sans-serif;
        }

        .search-box input:focus {
            outline: none;
            border-color: var(--color-light-blue);
            background: rgba(var(--color-white-rgb), 0.08);

        }

        .search-box input::placeholder {
            color: #8899aa;
        }

        .search-box i {
            position: absolute;
            left: 12px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--color-light-blue);
            font-size: 16px;
        }

        .status-filter {
            display: flex;
            gap: 8px;
            align-items: center;
        }

        .status-filter label {
            color: #bcd9ff;
            font-size: 14px;
            font-weight: 500;
        }

        .status-filter select {
            padding: 10px 15px;
            background: rgba(var(--color-white-rgb), 0.05);
            border: 2px solid rgba(var(--color-light-blue-rgb), 0.3);
            border-radius: 10px;
            color: white;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: "Poppins", sans-serif;
            min-width: 150px;
        }

        .status-filter select:focus {
            outline: none;
            border-color: var(--color-light-blue);
            background: rgba(var(--color-white-rgb), 0.08);

        }

        .status-filter select option {
            background: var(--bg-dark);
            color: white;
            padding: 8px 12px;
            border: none;
        }

        .status-filter select option:hover {
            background: #1a1a2e;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            color: #bcd9ff;
        }

        thead th {
            text-align: left;
            padding: 12px;
            color: #bcd9ff;
            font-weight: 600;
        }

        tbody td {
            padding: 12px;
            border-top: 1px solid rgba(var(--color-white-rgb), 0.03);
        }

        tbody tr:hover {
            background: rgba(var(--color-white-rgb), 0.02);
        }

        /* order */
        .panel {
            background:
                linear-gradient(var(--bg-darker), var(--bg-dark)) padding-box,
                linear-gradient(140deg, var(--color-light-blue), var(--color-light-blue-shade)) border-box;
            background-clip: padding-box, border-box;
            border: 5px solid transparent;
            padding: 30px;
            border-radius: 18px;

            margin-bottom: 20px;
        }

        .panel h3 {
            font-size: 20px;
            font-weight: 700;
            margin-bottom: 20px;
            color: white;
        }

        .order-item {
            padding: 15px;
            border-bottom: 1px solid rgba(var(--color-white-rgb), 0.03);
            color: #bcd9ff;
        }

        .order-item:last-child {
            border-bottom: none;
        }

        .order-item strong {
            color: white;
            font-size: 16px;
        }

        /* TABS */
        .tabs-container {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            border-bottom: 2px solid rgba(var(--color-light-blue-rgb), 0.2);
            flex-wrap: wrap;
        }

        .tab-btn {
            padding: 12px 20px;
            background: none;
            border: none;
            color: #bcd9ff;
            font-weight: 600;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s ease;
            border-bottom: 3px solid transparent;
            position: relative;
            bottom: -2px;
            font-family: "Poppins", sans-serif;
        }

        .tab-btn:hover {
            color: var(--color-light-blue);
        }

        .tab-btn.active {
            color: white;
            border-bottom-color: var(--color-light-blue);

        }

        /* ORDER TABLE */
        table {
            width: 100%;
            border-collapse: collapse;
            color: #bcd9ff;
        }

        table thead {
            background: rgba(var(--color-white-rgb), 0.05);
            border-bottom: 2px solid rgba(var(--color-light-blue-rgb), 0.3);
        }

        table th {
            padding: 15px;
            text-align: left;
            font-weight: 600;
            color: white;
            font-size: 14px;
        }

        table td {
            padding: 12px 15px;
            border-top: 1px solid rgba(var(--color-white-rgb), 0.03);
            font-size: 13px;
        }

        table tbody tr:hover {
            background: rgba(var(--color-white-rgb), 0.02);
        }

        .status-badge {
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
            display: inline-block;
        }

        .status-pending {
            background: rgba(245, 158, 11, 0.2);
            color: #f59e0b;
        }

        .status-approved {
            background: rgba(16, 185, 129, 0.2);
            color: #10b981;
        }

        .status-rejected {
            background: rgba(239, 68, 68, 0.2);
            color: #ef4444;
        }

        .approve-btn {
            padding: 8px 16px;
            background: linear-gradient(90deg, var(--color-light-blue), var(--color-light-blue-shade));
            border: none;
            color: white;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            font-size: 12px;
            transition: all 0.3s ease;
            font-family: "Poppins", sans-serif;
        }

        .approve-btn:hover {
            transform: translateY(-2px);

        }

        .approve-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        /* MODAL */
        .modal-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.7);
            z-index: 2000;
            align-items: center;
            justify-content: center;
        }

        .modal-overlay.active {
            display: flex;
        }

        .modal {
            background: linear-gradient(145deg, #0d1430, #070b1d);
            border: 2px solid rgba(var(--color-light-blue-rgb), 0.3);
            border-radius: 16px;
            padding: 30px;
            max-width: 500px;
            width: 90%;

            animation: slideIn 0.3s ease;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(-20px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .modal-header {
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid rgba(var(--color-white-rgb), 0.1);
        }

        .modal-header h2 {
            color: white;
            font-size: 20px;
            margin: 0;
        }

        .modal-body {
            margin-bottom: 20px;
        }

        .modal-section {
            margin-bottom: 15px;
        }

        .modal-section label {
            display: block;
            color: var(--color-light-blue);
            font-weight: 600;
            margin-bottom: 8px;
            font-size: 14px;
        }

        .modal-section p {
            color: #bcd9ff;
            margin: 0;
        }

        .reason-select {
            width: 100%;
            padding: 10px 12px;
            background: rgba(var(--color-white-rgb), 0.05);
            border: 2px solid rgba(var(--color-light-blue-rgb), 0.3);
            border-radius: 8px;
            color: white;
            font-family: "Poppins", sans-serif;
            font-size: 13px;
            display: none;
        }

        .reason-select.show {
            display: block;
        }

        .reason-select option {
            background: var(--bg-dark);
            color: white;
            padding: 8px 12px;
            border: none;
        }

        .reason-select option:hover {
            background: #1a1a2e;
        }

        .modal-actions {
            display: flex;
            gap: 10px;
            justify-content: flex-end;
        }

        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            font-size: 14px;
            transition: all 0.3s ease;
            font-family: "Poppins", sans-serif;
        }

        .btn-cancel {
            background: rgba(var(--color-white-rgb), 0.1);
            color: #bcd9ff;
            border: 1px solid rgba(var(--color-white-rgb), 0.2);
        }

        .btn-cancel:hover {
            background: rgba(var(--color-white-rgb), 0.15);
        }

        .btn-approve {
            background: linear-gradient(90deg, #10b981, #34d399);
            color: white;
        }

        .btn-approve:hover {
            transform: translateY(-2px);

        }

        .btn-reject {
            background: linear-gradient(90deg, #ef4444, #f87171);
            color: white;
        }

        .btn-reject:hover {
            transform: translateY(-2px);

        }

        @media (max-width: 992px) {
            .container {
                flex-direction: column;
            }

            .sidebar {
                width: 100%;
            }
        }

        /* settings */
        /* SYSTEM SETTINGS UI (Admin Only) */
        .settings-container {
            display: grid;
            grid-template-columns: 260px 1fr;
            gap: 36px;
            align-items: flex-start;
        }

        .settings-sidebar {
            background: linear-gradient(var(--bg-darker), var(--bg-dark)) padding-box,
                linear-gradient(140deg, var(--color-light-blue), var(--color-light-blue-shade)) border-box;
            background-clip: padding-box, border-box;
            border: 3px solid transparent;
            padding: 32px 18px 32px 18px;
            border-radius: 20px;
            min-width: 220px;
            max-width: 260px;
            height: fit-content;
            box-shadow: 0 4px 32px 0 rgba(0, 0, 0, 0.10);
            position: sticky;
            top: 32px;
        }

        .settings-sidebar h3 {
            font-size: 20px;
            color: #fff;
            margin-bottom: 28px;
            display: flex;
            align-items: center;
            gap: 12px;
            letter-spacing: 0.5px;
            font-weight: 700;
        }

        .settings-nav {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .settings-nav-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 13px 18px;
            background: rgba(var(--color-white-rgb), 0.07);
            border-radius: 12px;
            color: #bcd9ff;
            text-decoration: none;
            cursor: pointer;
            border: 2px solid transparent;
            font-size: 15px;
            font-weight: 500;
            letter-spacing: 0.2px;
            transition: all 0.2s cubic-bezier(.4, 0, .2, 1);
        }

        .settings-nav-item.active,
        .settings-nav-item:hover {
            background: linear-gradient(90deg, var(--color-light-blue), var(--color-light-blue-shade));
            border-color: var(--color-light-blue);
            color: #fff;
            box-shadow: 0 2px 12px 0 rgba(0, 157, 255, 0.08);
            transform: translateX(7px) scale(1.03);
        }

        .settings-nav-item i {
            font-size: 18px;
            width: 24px;
        }

        .settings-content {
            display: grid;
            grid-template-columns: 1fr;
            gap: 25px;
        }

        .settings-panel {
            background: linear-gradient(120deg, #181c2f 60%, #232a47 100%) padding-box,
                linear-gradient(140deg, var(--color-light-blue), var(--color-light-blue-shade)) border-box;
            background-clip: padding-box, border-box;
            border: 3px solid transparent;
            padding: 38px 36px 32px 36px;
            border-radius: 22px;
            box-shadow: 0 4px 32px 0 rgba(0, 157, 255, 0.04);
            display: none;
        }

        .settings-panel.active {
            display: block;
            animation: fadeInPanel 0.5s cubic-bezier(.4, 0, .2, 1);
        }

        .settings-panel h2 {
            font-size: 28px;
            color: #fff;
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            gap: 14px;
            font-weight: 700;
        }

        .settings-panel h2 i {
            color: var(--color-light-blue);
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            color: #bcd9ff;
            font-weight: 600;
            font-size: 15px;
        }

        .form-group input,
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: 13px 16px;
            background: rgba(var(--color-white-rgb), 0.07);
            border: 2px solid rgba(var(--color-white-rgb), 0.13);
            border-radius: 12px;
            color: #fff;
            font-family: 'Poppins', sans-serif;
            font-size: 15px;
            transition: all 0.2s cubic-bezier(.4, 0, .2, 1);
        }

        .form-group input:focus,
        .form-group select:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: var(--color-light-blue);
            background: rgba(var(--color-light-blue-rgb), 0.09);
        }

        .button-group {
            display: flex;
            gap: 18px;
            margin-top: 32px;
        }

        .btn {
            padding: 13px 28px;
            border: none;
            border-radius: 12px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s cubic-bezier(.4, 0, .2, 1);
            font-size: 15px;
            display: flex;
            align-items: center;
            gap: 9px;
            font-family: "Poppins", sans-serif;
        }

        .btn-primary {
            background: linear-gradient(90deg, var(--color-light-blue), var(--color-light-blue-shade));
            color: #fff;
            box-shadow: 0 2px 12px 0 rgba(0, 157, 255, 0.08);
        }

        .btn-primary:hover {
            transform: translateY(-2px) scale(1.04);
        }

        @keyframes fadeInPanel {
            from {
                opacity: 0;
                transform: translateY(24px);
            }

            to {
                opacity: 1;
                transform: none;
            }
        }

        /* TOGGLE SWITCH */
        .toggle-switch {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 20px;
        }

        .switch {
            position: relative;
            display: inline-block;
            width: 50px;
            height: 28px;
        }

        .switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(var(--color-white-rgb), 0.2);
            transition: 0.3s;
            border-radius: 28px;
            border: 2px solid rgba(var(--color-white-rgb), 0.3);
        }

        .slider:before {
            position: absolute;
            content: "";
            height: 20px;
            width: 20px;
            left: 4px;
            bottom: 2px;
            background-color: white;
            transition: 0.3s;
            border-radius: 50%;
        }

        input:checked+.slider {
            background: linear-gradient(90deg, var(--color-light-blue), var(--color-light-blue-shade));
            border-color: var(--color-light-blue);
        }

        input:checked+.slider:before {
            transform: translateX(22px);
        }

        .toggle-label {
            color: #bcd9ff;
            font-size: 14px;
            font-weight: 500;
        }

        /* SETTINGS GRID */
        .settings-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 25px;
        }

        .setting-card {
            background: rgba(var(--color-white-rgb), 0.05);
            border: 2px solid rgba(var(--color-white-rgb), 0.1);
            padding: 20px;
            border-radius: 12px;
            text-align: center;
            transition: all 0.3s ease;
        }

        .setting-card:hover {
            border-color: var(--color-light-blue);
            background: rgba(var(--color-light-blue-rgb), 0.1);
        }

        .setting-card i {
            font-size: 32px;
            color: var(--color-light-blue);
            margin-bottom: 10px;
        }

        .setting-card p {
            color: #bcd9ff;
            font-size: 14px;
            margin-bottom: 12px;
        }

        .alert-box {
            background: rgba(239, 68, 68, 0.1);
            border: 2px solid rgba(239, 68, 68, 0.3);
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 20px;
            display: flex;
            gap: 12px;
            align-items: flex-start;
        }

        .alert-box i {
            color: #ef4444;
            margin-top: 3px;
        }

        .alert-box p {
            color: #ef4444;
            font-size: 13px;
            margin: 0;
        }

        .success-box {
            background: rgba(16, 185, 129, 0.1);
            border: 2px solid rgba(16, 185, 129, 0.3);
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 20px;
            display: none;
            gap: 12px;
            align-items: flex-start;
        }

        .success-box.show {
            display: flex;
        }

        .success-box i {
            color: #10b981;
        }

        .success-box p {
            color: #10b981;
            font-size: 13px;
            margin: 0;
        }

        /* SETTINGS PAGE LAYOUT */
        .settings-container {
            display: grid;
            grid-template-columns: 250px 1fr;
            gap: 30px;
        }

        .settings-sidebar {
            background: linear-gradient(var(--bg-darker), var(--bg-dark)) padding-box,
                linear-gradient(140deg, var(--color-light-blue), var(--color-light-blue-shade)) border-box;
            background-clip: padding-box, border-box;
            border: 3px solid transparent;
            padding: 25px;
            border-radius: 18px;

            height: fit-content;
        }

        .settings-sidebar h3 {
            font-size: 18px;
            color: white;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .settings-nav {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .settings-nav-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px 15px;
            background: rgba(var(--color-white-rgb), 0.05);
            border-radius: 10px;
            color: #bcd9ff;
            text-decoration: none;
            cursor: pointer;
            border: 2px solid transparent;
            transition: all 0.3s ease;
        }

        .settings-nav-item:hover,
        .settings-nav-item.active {
            background: rgba(var(--color-light-blue-rgb), 0.1);
            border-color: var(--color-light-blue);
            color: var(--color-light-blue);
            transform: translateX(5px);
        }

        .settings-nav-item i {
            font-size: 18px;
            width: 24px;
        }

        /* CONTENT SECTIONS */
        .settings-content {
            display: grid;
            grid-template-columns: 1fr;
            gap: 25px;
        }

        .settings-panel {
            background: linear-gradient(var(--bg-darker), var(--bg-dark)) padding-box,
                linear-gradient(140deg, var(--color-light-blue), var(--color-light-blue-shade)) border-box;
            background-clip: padding-box, border-box;
            border: 3px solid transparent;
            padding: 30px;
            border-radius: 18px;

            display: none;
        }

        .settings-panel.active {
            display: block;
        }

        .settings-panel h2 {
            font-size: 26px;
            color: white;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .settings-panel h2 i {
            color: var(--color-light-blue);
        }

        .panel-description {
            color: #cbd5ff;
            margin-bottom: 25px;
            font-size: 14px;
        }

        .panel-divider {
            height: 1px;
            background: rgba(var(--color-white-rgb), 0.1);
            margin: 25px 0;
        }

        .settings-panel .form-group {
            margin-bottom: 20px;
        }

        .settings-panel .form-group label {
            display: block;
            margin-bottom: 8px;
            color: #bcd9ff;
            font-weight: 500;
            font-size: 14px;
        }

        .settings-panel .form-group input,
        .settings-panel .form-group select,
        .settings-panel .form-group textarea {
            width: 100%;
            padding: 12px 15px;
            background: rgba(var(--color-white-rgb), 0.05);
            border: 2px solid rgba(var(--color-white-rgb), 0.1);
            border-radius: 10px;
            color: white;
            font-family: 'Poppins', sans-serif;
            font-size: 14px;
            transition: all 0.3s ease;
        }

        .settings-panel .form-group input:focus,
        .settings-panel .form-group select:focus,
        .settings-panel .form-group textarea:focus {
            outline: none;
            border-color: var(--color-light-blue);
            background: rgba(var(--color-light-blue-rgb), 0.05);
        }

        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }

        .button-group {
            display: flex;
            gap: 15px;
            margin-top: 30px;
        }

        .settings-panel .btn {
            padding: 12px 25px;
            border: none;
            border-radius: 10px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 14px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .btn-primary {
            background: linear-gradient(90deg, var(--color-light-blue), var(--color-light-blue-shade));
            color: white;

        }

        .btn-primary:hover {
            transform: translateY(-2px);

        }

        .btn-secondary {
            background: rgba(var(--color-white-rgb), 0.1);
            color: #bcd9ff;
            border: 2px solid rgba(var(--color-white-rgb), 0.2);
        }

        .btn-secondary:hover {
            background: rgba(var(--color-white-rgb), 0.2);
            border-color: rgba(var(--color-white-rgb), 0.3);
            transform: translateY(-2px);
        }

        .btn-danger {
            background: linear-gradient(90deg, #ef4444, #f43f5e);
            color: white;

        }

        .btn-danger:hover {
            transform: translateY(-2px);

        }

        /* TOGGLE SWITCH */
        .toggle-switch {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 20px;
        }

        .switch {
            position: relative;
            display: inline-block;
            width: 50px;
            height: 28px;
        }

        .switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(var(--color-white-rgb), 0.2);
            transition: 0.3s;
            border-radius: 28px;
            border: 2px solid rgba(var(--color-white-rgb), 0.3);
        }

        .slider:before {
            position: absolute;
            content: "";
            height: 20px;
            width: 20px;
            left: 4px;
            bottom: 2px;
            background-color: white;
            transition: 0.3s;
            border-radius: 50%;
        }

        input:checked+.slider {
            background: linear-gradient(90deg, var(--color-light-blue), var(--color-light-blue-shade));
            border-color: var(--color-light-blue);
        }

        input:checked+.slider:before {
            transform: translateX(22px);
        }

        .toggle-label {
            color: #bcd9ff;
            font-size: 14px;
            font-weight: 500;
        }

        /* SETTINGS GRID */
        .settings-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 25px;
        }

        .setting-card {
            background: rgba(var(--color-white-rgb), 0.05);
            border: 2px solid rgba(var(--color-white-rgb), 0.1);
            padding: 20px;
            border-radius: 12px;
            text-align: center;
            transition: all 0.3s ease;
        }

        .setting-card:hover {
            border-color: var(--color-light-blue);
            background: rgba(var(--color-light-blue-rgb), 0.1);
        }

        .setting-card i {
            font-size: 32px;
            color: var(--color-light-blue);
            margin-bottom: 10px;
        }

        .setting-card p {
            color: #bcd9ff;
            font-size: 14px;
            margin-bottom: 12px;
        }

        .alert-box {
            background: rgba(239, 68, 68, 0.1);
            border: 2px solid rgba(239, 68, 68, 0.3);
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 20px;
            display: flex;
            gap: 12px;
            align-items: flex-start;
        }

        .alert-box i {
            color: #ef4444;
            margin-top: 3px;
        }

        .alert-box p {
            color: #ef4444;
            font-size: 13px;
            margin: 0;
        }

        @media (max-width: 992px) {
            .settings-container {
                grid-template-columns: 1fr;
            }

            .settings-sidebar {
                display: grid;
                grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
                gap: 10px;
            }

            .form-row {
                grid-template-columns: 1fr;
            }
        }

        /* ===== PIE CHART STYLES ===== */
        #chartLegend {
            padding: 10px;
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 8px;
            border-radius: 6px;
            transition: all 0.3s ease;
        }

        .legend-item:hover {
            background: rgba(var(--color-white-rgb), 0.05);
            transform: translateX(5px);
        }

        .legend-color {
            width: 20px;
            height: 20px;
            border-radius: 4px;
            flex-shrink: 0;
        }

        .legend-label {
            flex: 1;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .legend-label span {
            font-size: 14px;
        }

        .legend-value {
            color: var(--color-light-blue);
            font-weight: 600;
            margin-left: 10px;
        }

        @media (max-width: 768px) {
            .panel:has(#pieChart) {
                padding: 15px;
            }

            .panel:has(#pieChart)>div:first-of-type {
                grid-template-columns: 1fr !important;
                gap: 20px;
            }

            #chartLegend {
                display: grid;
                grid-template-columns: 1fr 1fr;
                gap: 10px;
            }

            #pieChart {
                max-width: 250px !important;
                height: auto !important;
            }
        }

        /* ===== CUSTOM SECTION STYLING - MATCHING STAFF1.HTML DESIGN ===== */

        /* SECTION CONTAINER STYLING */
        section {
            animation: fadeIn 0.3s ease;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* SEARCH & FILTER CONTAINER */
        .search-filter-container {
            display: flex;
            gap: 20px;
            margin-bottom: 25px;
            flex-wrap: wrap;
            align-items: flex-end;
        }

        .search-box {
            flex: 1;
            min-width: 250px;
            position: relative;
        }

        .search-box i {
            position: absolute;
            left: 15px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--color-light-blue);
            pointer-events: none;
        }

        .search-box input {
            width: 100%;
            padding: 12px 15px 12px 45px;
            background: rgba(var(--color-white-rgb), 0.05);
            border: 2px solid rgba(var(--color-light-blue-rgb), 0.2);
            border-radius: 10px;
            color: white;
            font-size: 14px;
            transition: all 0.3s ease;
        }

        .search-box input::placeholder {
            color: #8899aa;
        }

        .search-box input:focus {
            outline: none;
            border-color: var(--color-light-blue);
            background: rgba(var(--color-light-blue-rgb), 0.05);
            box-shadow: 0 0 15px rgba(var(--color-light-blue-rgb), 0.2);
        }

        .status-filter {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .status-filter label {
            color: #bcd9ff;
            font-weight: 500;
            white-space: nowrap;
        }

        .status-filter select {
            padding: 10px 15px;
            background: rgba(var(--color-white-rgb), 0.05);
            border: 2px solid rgba(var(--color-light-blue-rgb), 0.2);
            border-radius: 10px;
            color: white;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .status-filter select:hover {
            border-color: var(--color-light-blue);
            background: rgba(var(--color-light-blue-rgb), 0.08);
        }

        .status-filter select:focus {
            outline: none;
            border-color: var(--color-light-blue);
            background: rgba(var(--color-light-blue-rgb), 0.1);
        }

        .status-filter select option {
            background: var(--bg-darker);
            color: white;
        }

        /* TABS CONTAINER */
        .tabs-container {
            display: flex;
            gap: 12px;
            margin-bottom: 25px;
            flex-wrap: wrap;
            padding-bottom: 15px;
            border-bottom: 2px solid rgba(var(--color-light-blue-rgb), 0.1);
        }

        .tab-btn {
            padding: 10px 20px;
            background: rgba(var(--color-white-rgb), 0.05);
            border: 2px solid rgba(var(--color-light-blue-rgb), 0.2);
            color: #bcd9ff;
            border-radius: 10px;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.3s ease;
        }

        .tab-btn:hover {
            background: rgba(var(--color-light-blue-rgb), 0.1);
            border-color: var(--color-light-blue);
            color: var(--color-light-blue);
        }

        .tab-btn.active {
            background: linear-gradient(90deg, var(--color-light-blue), #00a8e8);
            border-color: transparent;
            color: white;
            box-shadow: 0 4px 15px rgba(var(--color-light-blue-rgb), 0.3);
        }

        /* FORM ELEMENTS */
        .form-group {
            display: flex;
            flex-direction: column;
            gap: 8px;
            margin-bottom: 15px;
        }

        .form-group label {
            color: #bcd9ff;
            font-weight: 500;
        }

        .input-field,
        .reason-select {
            padding: 12px 15px;
            background: rgba(var(--color-white-rgb), 0.05);
            border: 2px solid rgba(var(--color-light-blue-rgb), 0.2);
            border-radius: 10px;
            color: white;
            font-size: 14px;
            transition: all 0.3s ease;
        }

        .input-field::placeholder {
            color: #7a8aa1;
        }

        .input-field:focus,
        .reason-select:focus {
            outline: none;
            border-color: var(--color-light-blue);
            background: rgba(var(--color-light-blue-rgb), 0.05);
        }

        /* BUTTONS */
        .btn {
            padding: 12px 24px;
            border-radius: 10px;
            font-weight: 600;
            font-size: 14px;
            font-family: "Poppins", sans-serif;
            border: none;
            cursor: pointer;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }

        .btn-primary {
            background: linear-gradient(90deg, var(--color-light-blue), #00a8e8);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(var(--color-light-blue-rgb), 0.3);
        }

        .btn-approve {
            background: linear-gradient(90deg, #10b981, #34d399);
            color: white;
        }

        .btn-approve:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(16, 185, 129, 0.3);
        }

        .btn-reject {
            background: linear-gradient(90deg, #ef4444, #f43f5e);
            color: white;
        }

        .btn-reject:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(239, 68, 68, 0.3);
        }

        .btn-cancel {
            background: rgba(var(--color-white-rgb), 0.1);
            border: 2px solid rgba(var(--color-light-blue-rgb), 0.3);
            color: #bcd9ff;
        }

        .btn-cancel:hover {
            background: rgba(var(--color-light-blue-rgb), 0.1);
            border-color: var(--color-light-blue);
            color: var(--color-light-blue);
        }

        /* MODAL STYLING */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.7);
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
            z-index: 2000;
        }

        .modal-overlay.active {
            opacity: 1;
            visibility: visible;
        }

        .modal {
            background: linear-gradient(135deg, var(--bg-darker), var(--bg-dark));
            border: 2px solid rgba(var(--color-light-blue-rgb), 0.3);
            border-radius: 18px;
            max-width: 500px;
            width: 90%;
            max-height: 90vh;
            overflow-y: auto;
            animation: slideUp 0.3s ease;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
        }

        @keyframes slideUp {
            from {
                transform: translateY(30px);
                opacity: 0;
            }

            to {
                transform: translateY(0);
                opacity: 1;
            }
        }

        .modal-header {
            padding: 25px;
            border-bottom: 2px solid rgba(var(--color-light-blue-rgb), 0.1);
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .modal-header h2 {
            color: white;
            font-size: 20px;
            margin: 0;
        }

        .modal-header i {
            color: var(--color-light-blue);
            font-size: 20px;
        }

        .modal-body {
            padding: 25px;
        }

        .modal-section {
            margin-bottom: 20px;
        }

        .modal-section label {
            display: block;
            color: #bcd9ff;
            font-weight: 500;
            margin-bottom: 8px;
        }

        .modal-section p {
            color: white;
            margin: 0;
            padding: 10px 0;
        }

        .modal-actions {
            padding: 20px 25px;
            display: flex;
            gap: 12px;
            justify-content: flex-end;
            border-top: 2px solid rgba(var(--color-light-blue-rgb), 0.1);
        }

        .modal-actions .btn {
            flex: 1;
            justify-content: center;
        }

        /* TABLE RESPONSIVE */
        .table-responsive {
            overflow-x: auto;
        }

        /* INVENTORY DASHBOARD SECTION */
        .inventory-dashboard-section {
            margin-bottom: 30px;
        }

        .inventory-dashboard-section h2 {
            font-size: 22px;
            font-weight: 700;
            margin-bottom: 20px;
            color: white;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .inventory-dashboard-section h2 i {
            color: var(--color-light-blue);
        }

        .analytics-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 20px;
            margin-bottom: 25px;
        }

        .analytics-card {
            background: linear-gradient(var(--bg-darker), var(--bg-dark)) padding-box,
                var(--gradient-border) border-box;
            background-clip: padding-box, border-box;
            border: 5px solid transparent;
            border-radius: 18px;
            padding: 25px;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
        }

        .analytics-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(var(--color-white-rgb), 0.05), transparent);
            z-index: 0;
            transition: left 0.5s ease;
        }

        .analytics-card:hover::before {
            left: 100%;
        }

        .analytics-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 8px 25px rgba(77, 166, 214, 0.2);
        }

        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            position: relative;
            z-index: 1;
            padding-bottom: 15px;
            border-bottom: 2px solid rgba(var(--color-light-blue-rgb), 0.2);
        }

        .card-header h3 {
            font-size: 17px;
            font-weight: 700;
            color: white;
            display: flex;
            align-items: center;
            gap: 10px;
            margin: 0;
        }

        .card-header h3 i {
            color: var(--color-light-blue);
            font-size: 18px;
        }

        .trend-badge,
        .insight-badge,
        .stock-badge {
            padding: 6px 12px;
            border-radius: 8px;
            font-size: 11px;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            display: inline-block;
        }

        .badge-up {
            background: rgba(16, 185, 129, 0.2);
            color: #10b981;
            border: 1px solid rgba(16, 185, 129, 0.4);
        }

        .badge-info {
            background: rgba(77, 166, 214, 0.2);
            color: var(--color-light-blue);
            border: 1px solid rgba(77, 166, 214, 0.4);
        }

        .badge-warning {
            background: rgba(245, 158, 11, 0.2);
            color: #f59e0b;
            border: 1px solid rgba(245, 158, 11, 0.4);
        }

        .card-body {
            position: relative;
            z-index: 1;
        }

        .trend-item,
        .insight-item,
        .status-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 14px 0;
            border-bottom: 1px solid rgba(var(--color-white-rgb), 0.05);
        }

        .trend-item:last-child,
        .insight-item:last-child,
        .status-row:last-child {
            border-bottom: none;
        }

        .trend-label,
        .insight-label,
        .counter-label {
            font-size: 13px;
            color: #b9c3d9;
            font-weight: 500;
        }

        .trend-value,
        .insight-value,
        .counter-value {
            font-size: 14px;
            font-weight: 700;
            color: var(--color-light-blue);
            text-align: right;
        }

        .status-counter {
            display: flex;
            align-items: center;
            gap: 12px;
            width: 100%;
        }

        .status-counter i {
            font-size: 22px;
            min-width: 30px;
        }

        .status-counter div {
            flex: 1;
        }

        .counter-label {
            display: block;
            color: #b9c3d9;
            font-size: 12px;
            margin-bottom: 4px;
        }

        .counter-value {
            display: block;
            font-size: 16px;
            font-weight: 700;
            color: white;
        }

        .btn-small {
            width: 100%;
            padding: 10px 15px;
            margin-top: 15px;
            background: rgba(var(--color-light-blue-rgb), 0.2);
            border: 2px solid var(--color-light-blue);
            color: var(--color-light-blue);
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 13px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            font-family: "Poppins", sans-serif;
        }

        .btn-small:hover {
            background: var(--color-light-blue);
            color: var(--bg-darker);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(77, 166, 214, 0.3);
        }

        .btn-small i {
            font-size: 14px;
        }

        /* Stock Modal Styles */
        .modal-close {
            background: none;
            border: none;
            color: #b9c3d9;
            font-size: 32px;
            cursor: pointer;
            padding: 0;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            margin-left: auto;
            flex-shrink: 0;
        }

        .modal-close:hover {
            color: white;
            transform: rotate(90deg);
        }

        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        .input-field {
            width: 100%;
            padding: 12px 15px;
            background: rgba(var(--color-white-rgb), 0.05);
            border: 2px solid rgba(var(--color-light-blue-rgb), 0.3);
            border-radius: 8px;
            color: white;
            font-size: 13px;
            font-family: "Poppins", sans-serif;
            transition: all 0.3s ease;
        }

        .input-field::placeholder {
            color: #b9c3d9;
        }

        .input-field:focus {
            outline: none;
            background: rgba(var(--color-white-rgb), 0.08);
            border-color: var(--color-light-blue);
            box-shadow: 0 0 10px rgba(77, 166, 214, 0.2);
        }

        .input-field:read-only {
            background: rgba(var(--color-white-rgb), 0.02);
            cursor: not-allowed;
            color: #bcd9ff;
        }

        /* HOME SECTION - SUMMARY CARDS, CHARTS, NOTIFICATIONS */
        .home-summary-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
            gap: 16px;
            margin-bottom: 22px;
        }

        .summary-card {
            background: linear-gradient(var(--bg-darker), var(--bg-dark)) padding-box,
                var(--gradient-border) border-box;
            background-clip: padding-box, border-box;
            border-radius: 12px;
            padding: 18px;
            text-align: center;
            border: 2px solid rgba(var(--color-white-rgb), 0.04);
        }

        .summary-card h4 {
            font-size: 13px;
            color: #b9c3d9;
            margin-bottom: 6px;
            font-weight: 600;
        }

        .summary-card .value {
            font-size: 20px;
            font-weight: 800;
            color: white;
        }

        .charts-grid {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 18px;
            margin-bottom: 22px;
        }

        .chart-card {
            background: linear-gradient(var(--bg-darker), var(--bg-dark)) padding-box,
                var(--gradient-border) border-box;
            background-clip: padding-box, border-box;
            border-radius: 12px;
            padding: 16px;
            border: 2px solid rgba(var(--color-white-rgb), 0.04);
        }

        .chart-card h4 {
            margin: 0 0 12px 0;
            font-size: 15px;
            color: white;
        }

        .notifications-panel {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .notifications-panel .notif-item {
            display: flex;
            gap: 10px;
            align-items: flex-start;
            padding: 10px;
            border-radius: 8px;
            background: rgba(var(--color-white-rgb), 0.02);
            border: 1px solid rgba(var(--color-white-rgb), 0.03);
        }

        .notif-item i {
            font-size: 18px;
            min-width: 28px;
        }

        .notif-item .notif-text {
            color: #bcd9ff;
            font-size: 13px;
        }

        .staff-panel table {
            width: 100%;
            border-collapse: collapse;
        }

        .staff-panel th,
        .staff-panel td {
            text-align: left;
            padding: 8px 6px;
            color: #bcd9ff;
            font-size: 13px;
            border-bottom: 1px solid rgba(var(--color-white-rgb), 0.03);
        }

        @media (max-width: 900px) {
            .charts-grid {
                grid-template-columns: 1fr;
            }
        }

        /* RESPONSIVE DESIGN */
        @media (max-width: 768px) {
            .container {
                flex-direction: column;
                gap: 15px;
            }

            .sidebar {
                width: 100%;
                padding: 20px;
            }

            .search-filter-container {
                flex-direction: column;
            }

            .search-box {
                min-width: 100%;
            }

            .modal {
                width: 95%;
                max-height: 80vh;
            }

            .tabs-container {
                flex-direction: column;
            }

            .tab-btn {
                width: 100%;
            }

            .card {
                min-width: 100%;
            }

            .items {
                flex-direction: column;
            }

            .item {
                width: 100%;
            }
        }
    </style>
</head>

<body>
    <div class="container">
        <!-- SIDEBAR -->
        <aside class="sidebar">
            <div class="brand" style="display:flex;flex-direction:column;align-items:center;margin-bottom:18px;">
                <img id="mainSidebarLogo" src="assets/logo.png" alt="Padua Hardware Logo"
                    style="width:150px;height:150px;border-radius:50%;border:2px solid #4da6d6;background:#fff;object-fit:cover;box-shadow:0 2px 8px rgba(0,157,255,0.08);margin-bottom:8px;">
                <h4 style="color:#bcd9ff;font-size:18px;font-weight:700;margin-bottom:2px;">Padua Hardware</h4>
                <small>Admin Dashboard</small>
            </div>
            <script>
                function updateSidebarLogo(event) {
                    const file = event.target.files[0];
                    if (!file) return;
                    const reader = new FileReader();
                    reader.onload = function (e) {
                        document.getElementById('mainSidebarLogo').src = e.target.result;
                        const sidebarLogo = document.getElementById('sidebarLogo');
                        if (sidebarLogo) sidebarLogo.src = e.target.result;
                    };
                    reader.readAsDataURL(file);
                }
            </script>
            <script>
                // --- STAFF MANAGEMENT LOGIC ---
                let staffData = JSON.parse(localStorage.getItem('staffData') || '[]');
                let staffLogs = JSON.parse(localStorage.getItem('staffLogs') || '[]');
                let editingStaffIndex = null;

                function showStaffTab(tab, event) {
                    document.querySelectorAll('#staffSection .tab-btn').forEach(btn => btn.classList.remove('active'));
                    if (event) event.target.classList.add('active');
                    document.querySelectorAll('#staffSection .staff-tab').forEach(tabDiv => tabDiv.style.display = 'none');
                    document.getElementById('staffTab-' + tab).style.display = 'block';
                    if (tab === 'list') renderStaffTable();
                    if (tab === 'logs') renderStaffLogs();
                }

                function renderStaffTable() {
                    const tbody = document.getElementById('staffTableBody');
                    if (!tbody) return;
                    let q = (document.getElementById('staffSearchInput') || { value: '' }).value.toLowerCase();
                    let role = (document.getElementById('staffRoleFilter') || { value: '' }).value;
                    let status = (document.getElementById('staffStatusFilter') || { value: '' }).value;
                    let filtered = staffData.filter(staff => {
                        if (role && staff.roleAssign !== role) return false;
                        if (status && staff.accountStatus !== status) return false;
                        if (!q) return true;
                        return [staff.empId, staff.firstName, staff.lastName, staff.email].some(x => (x || '').toLowerCase().includes(q));
                    });
                    tbody.innerHTML = '';
                    if (!filtered.length) {
                        tbody.innerHTML = '<tr><td colspan="9" style="text-align:center; color:#8899aa; padding:20px;">No staff found</td></tr>';
                        return;
                    }
                    filtered.forEach((staff, i) => {
                        const online = staff.online ? '<span class="status-dot online" title="Online"></span>' : '<span class="status-dot offline" title="Offline"></span>';
                        const badge = staff.accountStatus === 'Active' ? '<span class="status-badge status-in">Active</span>' : '<span class="status-badge status-out">Inactive</span>';
                        const photo = staff.photo ? `<img src="${staff.photo}" style="width:38px;height:38px;border-radius:50%;object-fit:cover;">` : '<img src="assets/user-default.png" style="width:38px;height:38px;border-radius:50%;object-fit:cover;">';
                        tbody.innerHTML += `
                        <tr>
                            <td>${photo}</td>
                            <td>${staff.empId}</td>
                            <td>${staff.firstName} ${staff.lastName}</td>
                            <td>${staff.roleAssign}</td>
                            <td>${staff.email}</td>
                            <td>${staff.contact}</td>
                            <td>${online} ${badge}</td>
                            <td>${staff.lastLogin || '-'}</td>
                            <td>
                                <button class="btn" onclick="editStaff(${i})"><i class="fas fa-edit"></i></button>
                                <button class="btn btn-danger" onclick="deactivateStaff(${i})"><i class="fas fa-user-slash"></i></button>
                            </td>
                        </tr>
                    `;
                    });
                }

                function filterStaffList() { renderStaffTable(); }

                function previewStaffPhoto(event) {
                    const file = event.target.files[0];
                    if (!file) return;
                    const reader = new FileReader();
                    reader.onload = function (e) {
                        document.getElementById('staffPhotoPreview').src = e.target.result;
                    };
                    reader.readAsDataURL(file);
                }

                function submitStaffForm(e) {
                    e.preventDefault();
                    const get = id => document.getElementById(id).value.trim();
                    const photo = document.getElementById('staffPhotoPreview').src;
                    const staff = {
                        photo: photo.includes('user-default.png') ? '' : photo,
                        empId: get('staffEmpId'),
                        firstName: get('staffFirstName'),
                        lastName: get('staffLastName'),
                        middleName: get('staffMiddleName'),
                        gender: get('staffGender'),
                        birthdate: get('staffBirthdate'),
                        contact: get('staffContact'),
                        email: get('staffEmail'),
                        role: get('staffRole'),
                        dept: get('staffDept'),
                        dateHired: get('staffDateHired'),
                        empType: get('staffEmpType'),
                        shift: get('staffShift'),
                        username: get('staffUsername'),
                        password: get('staffPassword'),
                        roleAssign: get('staffRoleAssign'),
                        forcePwdChange: document.getElementById('staffForcePwdChange').checked,
                        accountStatus: get('staffAccountStatus'),
                        lastLogin: staffData[editingStaffIndex]?.lastLogin || '-',
                        online: false
                    };
                    if (get('staffPassword') !== get('staffConfirmPassword')) {
                        alert('Passwords do not match!');
                        return;
                    }
                    if (editingStaffIndex !== null) {
                        staffData[editingStaffIndex] = staff;
                        logStaffAction('Edit', staff.empId);
                    } else {
                        staffData.push(staff);
                        logStaffAction('Create', staff.empId);
                    }
                    localStorage.setItem('staffData', JSON.stringify(staffData));
                    editingStaffIndex = null;
                    document.getElementById('staffForm').reset();
                    document.getElementById('staffPhotoPreview').src = 'assets/user-default.png';
                    showStaffTab('list');
                }

                function editStaff(i) {
                    editingStaffIndex = i;
                    const s = staffData[i];
                    document.getElementById('staffEmpId').value = s.empId;
                    document.getElementById('staffFirstName').value = s.firstName;
                    document.getElementById('staffLastName').value = s.lastName;
                    document.getElementById('staffMiddleName').value = s.middleName;
                    document.getElementById('staffGender').value = s.gender;
                    document.getElementById('staffBirthdate').value = s.birthdate;
                    document.getElementById('staffContact').value = s.contact;
                    document.getElementById('staffEmail').value = s.email;
                    document.getElementById('staffRole').value = s.role;
                    document.getElementById('staffDept').value = s.dept;
                    document.getElementById('staffDateHired').value = s.dateHired;
                    document.getElementById('staffEmpType').value = s.empType;
                    document.getElementById('staffShift').value = s.shift;
                    document.getElementById('staffUsername').value = s.username;
                    document.getElementById('staffPassword').value = s.password;
                    document.getElementById('staffConfirmPassword').value = s.password;
                    document.getElementById('staffRoleAssign').value = s.roleAssign;
                    document.getElementById('staffForcePwdChange').checked = !!s.forcePwdChange;
                    document.getElementById('staffAccountStatus').value = s.accountStatus;
                    document.getElementById('staffPhotoPreview').src = s.photo || 'assets/user-default.png';
                    showStaffTab('add');
                }

                function deactivateStaff(i) {
                    if (!confirm('Deactivate this staff account?')) return;
                    staffData[i].accountStatus = 'Inactive';
                    staffData[i].online = false;
                    logStaffAction('Deactivate', staffData[i].empId);
                    localStorage.setItem('staffData', JSON.stringify(staffData));
                    renderStaffTable();
                }

                function logStaffAction(action, empId) {
                    staffLogs.push({
                        datetime: new Date().toLocaleString(),
                        user: empId,
                        action: action,
                        ip: '127.0.0.1'
                    });
                    localStorage.setItem('staffLogs', JSON.stringify(staffLogs));
                }

                function renderStaffLogs() {
                    const tbody = document.getElementById('staffLogsTable');
                    if (!tbody) return;
                    let user = (document.getElementById('logUserFilter') || { value: '' }).value.toLowerCase();
                    let from = (document.getElementById('logDateFrom') || { value: '' }).value;
                    let to = (document.getElementById('logDateTo') || { value: '' }).value;
                    let type = (document.getElementById('logActionType') || { value: '' }).value;
                    let filtered = staffLogs.filter(log => {
                        if (user && !log.user.toLowerCase().includes(user)) return false;
                        if (type && log.action !== type) return false;
                        if (from && new Date(log.datetime) < new Date(from)) return false;
                        if (to && new Date(log.datetime) > new Date(to + 'T23:59:59')) return false;
                        return true;
                    });
                    tbody.innerHTML = '';
                    if (!filtered.length) {
                        tbody.innerHTML = '<tr><td colspan="4" style="text-align:center; color:#8899aa; padding:20px;">No logs found</td></tr>';
                        return;
                    }
                    filtered.forEach(log => {
                        tbody.innerHTML += `<tr><td>${log.datetime}</td><td>${log.user}</td><td>${log.action}</td><td>${log.ip}</td></tr>`;
                    });
                }

                function exportStaffLogs() {
                    let csv = 'Date/Time,User,Action,IP Address\n';
                    staffLogs.forEach(log => {
                        csv += `${log.datetime},${log.user},${log.action},${log.ip}\n`;
                    });
                    const blob = new Blob([csv], { type: 'text/csv' });
                    const url = URL.createObjectURL(blob);
                    const a = document.createElement('a');
                    a.href = url;
                    a.download = 'staff_logs_' + new Date().toISOString().slice(0, 10) + '.csv';
                    a.click();
                    URL.revokeObjectURL(url);
                }

                function checkPwdStrength() {
                    const pwd = document.getElementById('staffPassword').value;
                    const strength = document.getElementById('pwdStrength');
                    let score = 0;
                    if (pwd.length >= 8) score++;
                    if (/[A-Z]/.test(pwd)) score++;
                    if (/[0-9]/.test(pwd)) score++;
                    if (/[^A-Za-z0-9]/.test(pwd)) score++;
                    let msg = ['Weak', 'Fair', 'Good', 'Strong', 'Very Strong'][score];
                    let color = ['#f87171', '#fbbf24', '#34d399', '#10b981', '#059669'][score];
                    strength.textContent = pwd ? msg : '';
                    strength.style.color = color;
                }

                document.addEventListener('DOMContentLoaded', () => {
                    renderStaffTable();
                    document.getElementById('staffSearchInput').addEventListener('input', filterStaffList);
                    document.getElementById('staffRoleFilter').addEventListener('change', filterStaffList);
                    document.getElementById('staffStatusFilter').addEventListener('change', filterStaffList);
                    document.getElementById('logUserFilter').addEventListener('input', renderStaffLogs);
                    document.getElementById('logDateFrom').addEventListener('change', renderStaffLogs);
                    document.getElementById('logDateTo').addEventListener('change', renderStaffLogs);
                    document.getElementById('logActionType').addEventListener('change', renderStaffLogs);
                });
            </script>
            <div class="home-summary-grid">
                <div class="summary-card">
                    <h4>Total Sales Today</h4>
                    <div class="value" id="totalSalesToday">₱4,790</div>
                </div>
                <div class="summary-card">
                    <h4>Total Sales This Month</h4>
                    <div class="value" id="totalSalesMonth">₱45,790</div>
                </div>
                <div class="summary-card">
                    <h4>Total Customers</h4>
                    <div class="value" id="totalCustomers">150</div>
                </div>
                <div class="summary-card">
                    <h4>Pending Orders</h4>
                    <div class="value" id="pendingOrders">15</div>
                </div>
                <div class="summary-card">
                    <h4>Low Stock Items</h4>
                    <div class="value" id="lowStockItems">12</div>
                </div>
                <div class="summary-card">
                    <h4>Total Revenue</h4>
                    <div class="value" id="totalRevenue">₱125,450</div>
                </div>
            </div>
        </aside>
        <!-- MAIN -->
        <main class="main">
            <!-- TOPBAR -->
            <nav class="topbar">
                <div class="menu">
                    <a href="#home" class="active" onclick="navigateTo('home'); return false;"><i
                            class="fas fa-home"></i> Home</a>
                    <a href="#customers" onclick="navigateTo('customers'); return false;"><i class="fas fa-users"></i>
                        Customers</a>
                    <a href="#orders" onclick="navigateTo('orders'); return false;"><i class="fas fa-receipt"></i>
                        Transactions</a>
                    <a href="#inventory" onclick="navigateTo('inventory'); return false;"><i class="fas fa-boxes"></i>
                        Inventory</a>
                    <a href="#settings" onclick="navigateTo('settings'); return false;"><i class="fas fa-cog"
                            title="Settings"></i></a>
                </div>
                <div class="menu-popup-container">
                    <button class="menu-toggle" onclick="toggleMenuPopup()">
                        <i class="fas fa-bars"></i> Menu
                    </button>
                    <div class="menu-popup" id="menuPopup">
                        <div class="popup-header">
                            <h4>Quick Menu</h4>
                            <button class="close-popup" onclick="toggleMenuPopup()">
                                <i class="fas fa-times"></i>
                            </button>
                        </div>
                        <div class="popup-content">
                            <a href="#sales" class="popup-item" onclick="navigateTo('sales'); return false;">
                                <i class="fas fa-chart-line"></i>
                                <span>Sales</span>
                            </a>
                            <a href="#reports" class="popup-item" onclick="navigateTo('reports'); return false;">
                                <i class="fas fa-chart-bar"></i>
                                <span>Reports</span>
                            </a>
                            <a href="#staff" class="popup-item" onclick="navigateTo('staff'); return false;">
                                <i class="fas fa-user-friends"></i>
                                <span>Staff</span>
                            </a>
                            <a href="#delivery" class="popup-item" onclick="navigateTo('delivery'); return false;">
                                <i class="fas fa-truck"></i>
                                <span>Delivery Status</span>
                            </a>
                            <a href="#message" class="popup-item">
                                <i class="fas fa-envelope"></i>
                                <span>Message</span>
                            </a>
                            <a href="#topproduct" class="popup-item" onclick="navigateTo('topproduct'); return false;">
                                <i class="fas fa-star"></i>
                                <span>Top Product</span>
                            </a>
                            <div class="popup-divider"></div>
                            <a href="#" class="popup-item logout-btn" onclick="logout(event); return false;">
                                <i class="fas fa-sign-out-alt"></i>
                                <span>Logout</span>
                            </a>
                        </div>
                    </div>
                </div>
                <div class="icons">
                    <div class="icon-container">
                        <i class="fas fa-bell" onclick="toggleNotification()"></i>
                        <div class="notification-popup" id="notificationPopup">
                            <h3 class="notification-title">NOTIFICATIONS</h3>
                            <span class="date-label">Today</span>
                            <div class="notification-item">
                                <div class="notification-icon">ðŸ“¦</div>
                                <div class="notification-text">
                                    <strong>New Order Received</strong>
                                    <p>Order #1023 has been placed and is awaiting confirmation.</p>
                                </div>
                            </div>
                            <div class="notification-divider"></div>
                            <div class="notification-item">
                                <div class="notification-icon">ðŸšš</div>
                                <div class="notification-text">
                                    <strong>Out for Delivery</strong>
                                    <p>Order #1003 is out for delivery. Assigned staff: Juan Dela Cruz.</p>
                                </div>
                            </div>
                            <span class="date-label">Yesterday</span>
                            <div class="notification-item">
                                <div class="notification-icon" style="color: #00ff9c;">âœ”</div>
                                <div class="notification-text">
                                    <strong>Payment Received</strong>
                                    <p>Payment for Order #1001 has been received.</p>
                                </div>
                            </div>
                            <div class="notification-divider"></div>
                            <div class="notification-item">
                                <div class="notification-icon" style="color: #ffcc00;">âš </div>
                                <div class="notification-text">
                                    <strong>Low Stock Alert</strong>
                                    <p>Cement is low in stock (20 remaining).</p>
                                </div>
                            </div>
                            <div class="notification-divider"></div>
                            <div class="notification-item">
                                <div class="notification-icon" style="color: #ff4d4d;">âœ–</div>
                                <div class="notification-text">
                                    <strong>Out of Stock</strong>
                                    <p>Latex Paint is out of stock.</p>
                                </div>
                            </div>
                        </div>
                    </div>

                </div>
            </nav>

            <!-- MAIN SECTIONS -->
            <section id="homeSection">
                <!-- DETAILED HOME DASHBOARD -->
                <div class="charts-grid">
                    <div>
                        <div class="chart-card">
                            <h4><i class="fas fa-chart-bar"></i> Sales per Day / Week / Month</h4>
                            <canvas id="salesChart" style="width:100%; height:220px;"></canvas>
                        </div>

                        <div class="chart-card" style="margin-top:16px;">
                            <h4><i class="fas fa-star"></i> Top Selling Products</h4>
                            <canvas id="topProductsChart" style="width:100%; height:200px;"></canvas>
                        </div>

                        <div class="chart-card" style="margin-top:16px;">
                            <h4><i class="fas fa-chart-line"></i> Revenue Trend</h4>
                            <canvas id="revenueTrendChart" style="width:100%; height:160px;"></canvas>
                        </div>

                        <div class="chart-card" style="margin-top:16px;">
                            <h4><i class="fas fa-users"></i> Customer Growth</h4>
                            <canvas id="customerGrowthChart" style="width:100%; height:160px;"></canvas>
                        </div>
                    </div>

                    <aside>
                        <div class="chart-card notifications-panel">
                            <h4><i class="fas fa-bell"></i> Notifications</h4>
                            <div class="notif-item"><i class="fas fa-exclamation-triangle" style="color:#f59e0b;"></i>
                                <div class="notif-text"><strong>Low Stock:</strong> Latex Paint — 0 units</div>
                            </div>
                            <div class="notif-item"><i class="fas fa-user-plus" style="color:#4da6d6;"></i>
                                <div class="notif-text"><strong>New Customer:</strong> Juan Dela Cruz registered</div>
                            </div>
                            <div class="notif-item"><i class="fas fa-file-signature" style="color:#f59e0b;"></i>
                                <div class="notif-text"><strong>Orders needing approval:</strong> 3</div>
                            </div>
                            <div class="notif-item"><i class="fas fa-calendar-check" style="color:#10b981;"></i>
                                <div class="notif-text"><strong>Follow-up:</strong> Call supplier ABC (Tomorrow)</div>
                            </div>
                        </div>

                        <div class="chart-card staff-panel" style="margin-top:16px;">
                            <h4><i class="fas fa-user-tie"></i> Staff Performance Snapshot</h4>
                            <table>
                                <thead>
                                    <tr>
                                        <th>Staff</th>
                                        <th>Sales</th>
                                        <th>Completed</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>Maria</td>
                                        <td>₱45,000</td>
                                        <td>25</td>
                                    </tr>
                                    <tr>
                                        <td>Jose</td>
                                        <td>₱32,500</td>
                                        <td>18</td>
                                    </tr>
                                    <tr>
                                        <td>Anna</td>
                                        <td>₱18,200</td>
                                        <td>10</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </aside>
                </div>

                <div class="panel" style="margin-top: 20px;">
                    <h3><i class="fas fa-chart-pie"></i> Sales Distribution by Category</h3>
                    <div
                        style="display: grid; grid-template-columns: 1fr 1fr; gap: 30px; align-items: center; margin-top: 20px;">
                        <div style="display: flex; justify-content: center;">
                            <canvas id="pieChart" width="300" height="300"
                                style="max-width: 100%; height: auto;"></canvas>
                        </div>
                        <div>
                            <div id="chartLegend" style="display: flex; flex-direction: column; gap: 12px;"></div>
                        </div>
                    </div>
                </div>
            </section>

            <section id="customersSection" style="display:none;">
                <!-- CUSTOMER STATS CARDS -->
                <div
                    style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; margin-bottom: 20px;">
                    <div class="card" style="text-align: center;">
                        <h4>Total Customers</h4>
                        <h2 class="price" id="custTotalCount">0</h2>
                    </div>
                    <div class="card" style="text-align: center;">
                        <h4>Active</h4>
                        <h2 class="price" style="color: #10b981;" id="custActiveCount">0</h2>
                    </div>
                    <div class="card" style="text-align: center;">
                        <h4>Archived</h4>
                        <h2 class="price" style="color: #8899aa;" id="custArchivedCount">0</h2>
                    </div>
                    <div class="card" style="text-align: center;">
                        <h4>Pending</h4>
                        <h2 class="price" style="color: #f59e0b;" id="custPendingCount">0</h2>
                    </div>
                </div>

                <div class="panel">
                    <!-- HEADER WITH ACTIONS -->
                    <div
                        style="display:flex; justify-content:space-between; align-items:center; gap:12px; margin-bottom:20px;">
                        <h3><i class="fas fa-users"></i> Customer Database</h3>
                        <div style="display:flex; gap:8px; align-items:center; flex-wrap:wrap;">
                            <button class="btn btn-primary" onclick="cdb_openAddCustomerModal()"><i
                                    class="fas fa-plus"></i> New Customer</button>
                            <button class="btn" onclick="cdb_exportCSV()"><i class="fas fa-file-csv"></i> Export
                                CSV</button>
                            <button class="btn" onclick="cdb_exportExcel()"><i class="fas fa-file-excel"></i> Export
                                Excel</button>
                            <button class="btn" onclick="document.getElementById('cdbImportFile').click()"><i
                                    class="fas fa-file-import"></i> Import</button>
                            <input type="file" id="cdbImportFile" accept=".csv,application/json" style="display:none;"
                                onchange="cdb_handleImport(event)" />
                            <button class="btn btn-warning" onclick="cdb_detectDuplicates()"><i class="fas fa-copy"></i>
                                Find Duplicates</button>
                        </div>
                    </div>

                    <!-- TABS: ACTIVE / ARCHIVED -->
                    <div
                        style="display:flex; gap:8px; margin-bottom:15px; border-bottom:2px solid rgba(255,255,255,0.1); padding-bottom:12px;">
                        <button class="tab-btn active" onclick="cdb_switchTab('active', event)"><i
                                class="fas fa-check-circle"></i> Active Customers</button>
                        <button class="tab-btn" onclick="cdb_switchTab('archived', event)"><i
                                class="fas fa-archive"></i> Archived</button>
                    </div>

                    <!-- SEARCH & FILTERS -->
                    <div class="search-filter-container"
                        style="margin-bottom:15px; display:flex; gap:12px; align-items:center;">
                        <div class="search-box" style="flex:1;">
                            <i class="fas fa-search"></i>
                            <input type="text" id="cdbSearchInput"
                                placeholder="Search by name, ID, email, contact..." />
                        </div>
                        <div class="status-filter">
                            <label for="cdbStatusFilter">Status:</label>
                            <select id="cdbStatusFilter">
                                <option value="">All</option>
                                <option value="Active">Active</option>
                                <option value="Pending">Pending</option>
                                <option value="Inactive">Inactive</option>
                            </select>
                        </div>
                        <div class="status-filter">
                            <label for="cdbTypeFilter">Type:</label>
                            <select id="cdbTypeFilter">
                                <option value="">All</option>
                                <option value="Walk-in">Walk-in</option>
                                <option value="Regular">Regular</option>
                            </select>
                        </div>
                    </div>

                    <!-- CUSTOMER TABLE -->
                    <div class="table-responsive" style="margin-top:12px;">
                        <table>
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>Name</th>
                                    <th>Contact</th>
                                    <th>Email</th>
                                    <th>Type</th>
                                    <th>Credit / Limit</th>
                                    <th>Status</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="cdbCustomerTable"></tbody>
                        </table>
                    </div>
                </div>

                <!-- ADD / EDIT CUSTOMER MODAL -->
                <div class="modal-overlay" id="cdbAddEditCustomerModal">
                    <div class="modal">
                        <div class="modal-header">
                            <i class="fas fa-user-edit"></i>
                            <h2 id="cdbAddEditTitle">Add Customer</h2>
                        </div>
                        <div class="modal-body">
                            <input type="hidden" id="cdbCustId" />
                            <div style="display:grid; grid-template-columns:1fr 1fr; gap:15px;">
                                <div class="modal-section form-group">
                                    <label for="cdbCustName">Full Name *</label>
                                    <input id="cdbCustName" class="input-field" required />
                                </div>
                                <div class="modal-section form-group">
                                    <label for="cdbCustEmail">Email</label>
                                    <input id="cdbCustEmail" class="input-field" type="email" />
                                </div>
                                <div class="modal-section form-group">
                                    <label for="cdbCustContact">Contact</label>
                                    <input id="cdbCustContact" class="input-field" />
                                </div>
                                <div class="modal-section form-group">
                                    <label for="cdbCustType">Type</label>
                                    <select id="cdbCustType" class="reason-select">
                                        <option value="Walk-in">Walk-in</option>
                                        <option value="Regular">Regular</option>
                                    </select>
                                </div>
                            </div>
                            <div class="modal-section form-group">
                                <label for="cdbCustAddress">Address</label>
                                <textarea id="cdbCustAddress" class="input-field" style="min-height:80px;"></textarea>
                            </div>
                            <div style="display:grid; grid-template-columns:1fr 1fr; gap:15px;">
                                <div class="modal-section form-group">
                                    <label for="cdbCustCreditLimit">Credit Limit (₱)</label>
                                    <input id="cdbCustCreditLimit" class="input-field" type="number" min="0" />
                                </div>
                                <div class="modal-section form-group">
                                    <label for="cdbCustStatus">Status</label>
                                    <select id="cdbCustStatus" class="reason-select">
                                        <option value="Active">Active</option>
                                        <option value="Pending">Pending</option>
                                        <option value="Inactive">Inactive</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        <div class="modal-actions">
                            <button class="btn btn-cancel" onclick="cdb_closeAddEditCustomerModal()">Cancel</button>
                            <button class="btn btn-primary" onclick="cdb_submitAddEditCustomer()">Save Customer</button>
                        </div>
                    </div>
                </div>

                <!-- CUSTOMER PROFILE MODAL -->
                <div class="modal-overlay" id="cdbProfileModal">
                    <div class="modal" style="max-width:600px;">
                        <div class="modal-header">
                            <i class="fas fa-id-card"></i>
                            <h2>Customer Profile</h2>
                        </div>
                        <div class="modal-body">
                            <div id="cdbProfileContent" style="color:#bcd9ff; line-height:1.8;"></div>
                        </div>
                        <div class="modal-actions">
                            <button class="btn btn-cancel" onclick="cdb_closeProfileModal()">Close</button>
                        </div>
                    </div>
                </div>

                <!-- DUPLICATE DETECTION & MERGE MODAL -->
                <div class="modal-overlay" id="cdbDuplicatesModal">
                    <div class="modal" style="max-width:800px;">
                        <div class="modal-header">
                            <i class="fas fa-clone"></i>
                            <h2>Duplicate Detection & Merge</h2>
                        </div>
                        <div class="modal-body">
                            <div id="cdbDuplicatesList" style="color:#bcd9ff;"></div>
                        </div>
                        <div class="modal-actions">
                            <button class="btn btn-cancel" onclick="cdb_closeDuplicatesModal()">Close</button>
                        </div>
                    </div>
                </div>

                <!-- ARCHIVE CONFIRMATION MODAL -->
                <div class="modal-overlay" id="cdbArchiveModal">
                    <div class="modal" style="max-width:500px;">
                        <div class="modal-header">
                            <i class="fas fa-archive"></i>
                            <h2 id="cdbArchiveTitle">Archive Customer</h2>
                        </div>
                        <div class="modal-body">
                            <p id="cdbArchiveMsg" style="color:#bcd9ff; margin-bottom:15px;"></p>
                            <div
                                style="background:rgba(255,255,255,0.05); padding:12px; border-radius:8px; border-left:3px solid #f59e0b;">
                                <p style="color:#f59e0b; margin:0; font-size:14px;"><i class="fas fa-info-circle"></i>
                                    Archived records can be restored anytime from the Archived tab.</p>
                            </div>
                        </div>
                        <div class="modal-actions">
                            <button class="btn btn-cancel" onclick="cdb_closeArchiveModal()">Cancel</button>
                            <button class="btn btn-warning" onclick="cdb_confirmArchive()"
                                id="cdbArchiveBtn">Archive</button>
                        </div>
                    </div>
                </div>
            </section>


            <!-- order -->
            <section id="ordersSection" style="display:none;">
                <!-- SALES OVERVIEW CARDS -->
                <div
                    style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; margin-bottom: 20px;">
                    <div class="card" style="text-align: center;">
                        <h4>Total Sales</h4>
                        <h2 class="price" id="stm_totalSales">₱0</h2>
                    </div>
                    <div class="card" style="text-align: center;">
                        <h4>Transactions</h4>
                        <h2 class="price" id="stm_totalTrans">0</h2>
                    </div>
                    <div class="card" style="text-align: center;">
                        <h4>Avg Per Transaction</h4>
                        <h2 class="price" id="stm_avgTrans">₱0</h2>
                    </div>
                    <div class="card" style="text-align: center;">
                        <h4>Discounts Given</h4>
                        <h2 class="price" style="color: #f59e0b;" id="stm_totalDiscount">₱0</h2>
                    </div>
                </div>

                <div class="panel">
                    <!-- HEADER & ACTIONS -->
                    <div
                        style="display:flex; justify-content:space-between; align-items:center; gap:12px; margin-bottom:20px;">
                        <h3><i class="fas fa-receipt"></i> Transaction Management</h3>
                        <div style="display:flex; gap:8px; flex-wrap:wrap;">
                            <button class="btn" onclick="stm_generateReport('daily')"><i
                                    class="fas fa-calendar-day"></i> Daily</button>
                            <button class="btn" onclick="stm_generateReport('weekly')"><i
                                    class="fas fa-calendar-week"></i> Weekly</button>
                            <button class="btn" onclick="stm_generateReport('monthly')"><i
                                    class="fas fa-calendar-alt"></i> Monthly</button>
                            <button class="btn" onclick="stm_generateReport('annual')"><i class="fas fa-calendar"></i>
                                Annual</button>
                            <button class="btn" onclick="stm_openDiscountModal()"><i class="fas fa-tag"></i>
                                Discounts</button>
                            <button class="btn" onclick="stm_exportReport()"><i class="fas fa-download"></i>
                                Export</button>
                        </div>
                    </div>

                    <!-- TABS: TRANSACTIONS / STAFF PERFORMANCE / TRENDS -->
                    <div
                        style="display:flex; gap:8px; margin-bottom:15px; border-bottom:2px solid rgba(255,255,255,0.1); padding-bottom:12px;">
                        <button class="tab-btn active" onclick="stm_switchView('transactions', event)"><i
                                class="fas fa-receipt"></i> Transactions</button>
                        <button class="tab-btn" onclick="stm_switchView('staff', event)"><i class="fas fa-user-tie"></i>
                            Staff Performance</button>
                        <button class="tab-btn" onclick="stm_switchView('trends', event)"><i
                                class="fas fa-chart-bar"></i> Trends</button>
                    </div>

                    <!-- SEARCH & FILTERS -->
                    <div style="display:flex; gap:12px; margin-bottom:15px; flex-wrap:wrap; align-items:center;">
                        <div class="search-box" style="flex:1; min-width:250px;">
                            <i class="fas fa-search"></i>
                            <input type="text" id="stm_searchInput"
                                placeholder="Search transaction ID, customer, staff..." />
                        </div>
                        <div class="status-filter">
                            <label for="stm_statusFilter">Status:</label>
                            <select id="stm_statusFilter">
                                <option value="">All</option>
                                <option value="Completed">Completed</option>
                                <option value="Pending">Pending</option>
                                <option value="Cancelled">Cancelled</option>
                            </select>
                        </div>
                        <div class="status-filter">
                            <label for="stm_paymentFilter">Payment:</label>
                            <select id="stm_paymentFilter">
                                <option value="">All</option>
                                <option value="Cash">Cash</option>
                                <option value="Card">Card</option>
                                <option value="GCash">GCash</option>
                            </select>
                        </div>
                    </div>

                    <!-- TRANSACTIONS VIEW -->
                    <div id="stm_transactionsView" class="table-responsive">
                        <table>
                            <thead>
                                <tr>
                                    <th>Trans ID</th>
                                    <th>Date</th>
                                    <th>Customer</th>
                                    <th>Staff</th>
                                    <th>Items</th>
                                    <th>Amount</th>
                                    <th>Discount</th>
                                    <th>Payment</th>
                                    <th>Status</th>
                                    <th>Action</th>
                                </tr>
                            </thead>
                            <tbody id="stm_transactionsTable"></tbody>
                        </table>
                    </div>

                    <!-- STAFF PERFORMANCE VIEW -->
                    <div id="stm_staffView" style="display:none;">
                        <div class="table-responsive">
                            <table>
                                <thead>
                                    <tr>
                                        <th>Staff Name</th>
                                        <th>Total Sales</th>
                                        <th>Transactions</th>
                                        <th>Avg Per Trans</th>
                                        <th>Performance</th>
                                        <th>Details</th>
                                    </tr>
                                </thead>
                                <tbody id="stm_staffTable"></tbody>
                            </table>
                        </div>
                    </div>

                    <!-- TRENDS VIEW -->
                    <div id="stm_trendsView" style="display:none;">
                        <div style="color:#bcd9ff;">
                            <h4 style="margin-bottom:15px;">Sales Trends & Patterns</h4>
                            <div style="display:grid; grid-template-columns:1fr 1fr; gap:15px;">
                                <div
                                    style="background:rgba(255,255,255,0.05); padding:15px; border-radius:8px; border-left:3px solid #10b981;">
                                    <p><strong>Top Selling Items</strong></p>
                                    <div id="stm_topItems" style="margin-top:10px; font-size:13px;"></div>
                                </div>
                                <div
                                    style="background:rgba(255,255,255,0.05); padding:15px; border-radius:8px; border-left:3px solid var(--color-warning);">
                                    <p><strong>Peak Hours</strong></p>
                                    <div id="stm_peakHours" style="margin-top:10px; font-size:13px;"></div>
                                </div>
                                <div
                                    style="background:rgba(255,255,255,0.05); padding:15px; border-radius:8px; border-left:3px solid var(--color-light-blue);">
                                    <p><strong>Payment Methods</strong></p>
                                    <div id="stm_paymentMethods" style="margin-top:10px; font-size:13px;"></div>
                                </div>
                                <div
                                    style="background:rgba(255,255,255,0.05); padding:15px; border-radius:8px; border-left:3px solid var(--color-light-blue);">
                                    <p><strong>Customer Segments</strong></p>
                                    <div id="stm_segments" style="margin-top:10px; font-size:13px;"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- TRANSACTION DETAIL MODAL -->
                <div class="modal-overlay" id="stm_detailModal">
                    <div class="modal" style="max-width:600px;">
                        <div class="modal-header">
                            <i class="fas fa-receipt"></i>
                            <h2>Transaction Details</h2>
                        </div>
                        <div class="modal-body" id="stm_detailContent" style="color:#bcd9ff;"></div>
                        <div class="modal-actions">
                            <button class="btn btn-cancel" onclick="stm_closeDetail()">Close</button>
                        </div>
                    </div>
                </div>

                <!-- DISCOUNT & PRICING POLICY MODAL -->
                <div class="modal-overlay" id="stm_discountModal">
                    <div class="modal" style="max-width:700px;">
                        <div class="modal-header">
                            <i class="fas fa-tag"></i>
                            <h2>Discount & Pricing Management</h2>
                        </div>
                        <div class="modal-body">
                            <div style="margin-bottom:20px;">
                                <h4 style="color:#fff; margin-bottom:10px;">Active Discount Policies</h4>
                                <div id="stm_discountList" style="color:#bcd9ff;"></div>
                            </div>
                            <div style="background:rgba(255,255,255,0.05); padding:15px; border-radius:8px;">
                                <h4 style="color:#fff; margin-bottom:12px;">Add New Discount</h4>
                                <div style="display:grid; grid-template-columns:1fr 1fr; gap:12px; margin-bottom:12px;">
                                    <div class="form-group">
                                        <label for="stm_discountName">Policy Name</label>
                                        <input id="stm_discountName" class="input-field"
                                            placeholder="e.g., Senior Discount" />
                                    </div>
                                    <div class="form-group">
                                        <label for="stm_discountPercent">Discount %</label>
                                        <input id="stm_discountPercent" class="input-field" type="number" min="0"
                                            max="100" placeholder="10" />
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label for="stm_discountDesc">Description</label>
                                    <textarea id="stm_discountDesc" class="input-field" style="min-height:60px;"
                                        placeholder="Apply to..."></textarea>
                                </div>
                                <button class="btn btn-primary" onclick="stm_addDiscount()" style="width:100%;">Add
                                    Policy</button>
                            </div>
                        </div>
                        <div class="modal-actions">
                            <button class="btn btn-cancel" onclick="stm_closeDiscount()">Close</button>
                        </div>
                    </div>
                </div>

                <!-- REPORT GENERATION MODAL -->
                <div class="modal-overlay" id="stm_reportModal">
                    <div class="modal" style="max-width:700px;">
                        <div class="modal-header">
                            <i class="fas fa-chart-bar"></i>
                            <h2 id="stm_reportTitle">Sales Report</h2>
                        </div>
                        <div class="modal-body" id="stm_reportContent"
                            style="color:#bcd9ff; max-height:500px; overflow-y:auto;"></div>
                        <div class="modal-actions">
                            <button class="btn" onclick="stm_downloadReport()"><i class="fas fa-download"></i> Download
                                PDF</button>
                            <button class="btn btn-cancel" onclick="stm_closeReport()">Close</button>
                        </div>
                    </div>
                </div>
            </section>

            <!-- INVENTORY SECTION -->
            <section id="inventorySection" style="display:none;">
                <!-- INVENTORY DASHBOARD ANALYTICS -->
                <section class="inventory-dashboard-section">
                    <h2><i class="fas fa-chart-line"></i> Inventory & Sales Dashboard</h2>
                    <div class="analytics-grid">
                        <!-- Sales Trends Card -->
                        <div class="analytics-card">
                            <div class="card-header">
                                <h3><i class="fas fa-trending-up"></i> Sales Reports & Trends</h3>
                                <span class="trend-badge badge-up">+12.5%</span>
                            </div>
                            <div class="card-body">
                                <div class="trend-item">
                                    <span class="trend-label">Total Sales (This Month)</span>
                                    <span class="trend-value">₱125,450.00</span>
                                </div>
                                <div class="trend-item">
                                    <span class="trend-label">Top Selling Product</span>
                                    <span class="trend-value">Steel Nails (1,200 units)</span>
                                </div>
                                <div class="trend-item">
                                    <span class="trend-label">Average Order Value</span>
                                    <span class="trend-value">₱3,850.00</span>
                                </div>
                                <div class="trend-item">
                                    <span class="trend-label">Orders Processed</span>
                                    <span class="trend-value">32 Orders</span>
                                </div>
                                <button class="btn btn-small" onclick="openSalesReport()"><i
                                        class="fas fa-download"></i> View Detailed Report</button>
                            </div>
                        </div>

                        <!-- Customer Insights Card -->

                        <div class="analytics-card">
                            <div class="card-header">
                                <h3><i class="fas fa-users"></i> Customer Insights & Statistics</h3>
                                <span class="insight-badge badge-info">+8%</span>
                            </div>
                            <div class="card-body">
                                <div class="insight-item">
                                    <span class="insight-label">Total Customers</span>
                                    <span class="insight-value">145</span>
                                </div>
                                <div class="insight-item">
                                    <span class="insight-label">Repeat Customers</span>
                                    <span class="insight-value">58 (40%)</span>
                                </div>
                                <div class="insight-item">
                                    <span class="insight-label">New Customers (7 days)</span>
                                    <span class="insight-value">12</span>
                                </div>
                                <div class="insight-item">
                                    <span class="insight-label">Customer Satisfaction</span>
                                    <span class="insight-value">4.8/5.0</span>
                                </div>
                                <button class="btn btn-small" onclick="openCustomerAnalytics()"><i
                                        class="fas fa-chart-pie"></i> View Analytics</button>
                            </div>
                        </div>

                        <!-- Inventory Status Overview Card -->
                        <div class="analytics-card">
                            <div class="card-header">
                                <h3><i class="fas fa-warehouse"></i> Inventory Status Overview</h3>
                                <span class="stock-badge badge-warning">Action Required</span>
                            </div>
                            <div class="card-body">
                                <div class="status-row">
                                    <div class="status-counter">
                                        <i class="fas fa-check-circle" style="color:#10b981;"></i>
                                        <div>
                                            <span class="counter-label">In Stock</span>
                                            <span class="counter-value">25 Items</span>
                                        </div>
                                    </div>
                                </div>
                                <div class="status-row">
                                    <div class="status-counter">
                                        <i class="fas fa-exclamation-triangle" style="color:#f59e0b;"></i>
                                        <div>
                                            <span class="counter-label">Low Stock</span>
                                            <span class="counter-value">8 Items</span>
                                        </div>
                                    </div>
                                </div>
                                <div class="status-row">
                                    <div class="status-counter">
                                        <i class="fas fa-times-circle" style="color:#ef4444;"></i>
                                        <div>
                                            <span class="counter-label">Out of Stock</span>
                                            <span class="counter-value">3 Items</span>
                                        </div>
                                    </div>
                                </div>
                                <button class="btn btn-small" onclick="openStockAlert()"><i class="fas fa-bell"></i>
                                    View Alerts</button>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- SEARCH AND FILTER SECTION -->
                <section class="search-filter-section" style="margin-top:30px;">
                    <div class="search-bar">
                        <input type="text" id="searchInputInventory"
                            placeholder="Search by Product ID, Name, Category..." />
                        <i class="fas fa-search"></i>
                    </div>
                    <div class="filter-buttons">
                        <button class="filter-btn active" onclick="filterInventory('all')">
                            <i class="fas fa-list"></i> All
                        </button>
                        <button class="filter-btn" onclick="filterInventory('in')">
                            <i class="fas fa-boxes"></i> In Stock
                        </button>
                        <button class="filter-btn" onclick="filterInventory('low')">
                            Low Stock<i class="fas fa-exclamation"></i>
                        </button>
                        <button class="filter-btn" onclick="filterInventory('out')">
                            <i class="fas fa-times"></i> Out of Stock
                        </button>
                        <button class="filter-btn" onclick="openAddStockModal()">
                            <i class="fas fa-plus"></i> Add Stock
                        </button>
                    </div>
                </section>

                <!-- INVENTORY TABLE SECTION -->
                <section class="table-section" style="margin-top:30px;">
                    <h3><i class="fas fa-boxes"></i> Product Inventory</h3>
                    <div class="table-responsive">
                        <table>
                            <thead>
                                <tr>
                                    <th>Product ID</th>
                                    <th>Name</th>
                                    <th>Category</th>
                                    <th>Variant</th>
                                    <th>Stock</th>
                                    <th>Unit Price</th>
                                    <th>Status</th>
                                    <th>Action</th>
                                </tr>
                            </thead>
                            <tbody id="inventoryTable">
                                <tr data-type="in">
                                    <td>#001</td>
                                    <td>Cement</td>
                                    <td>Building Materials</td>
                                    <td>50kg Bag</td>
                                    <td>560</td>
                                    <td>₱250.00</td>
                                    <td>
                                        <span class="status-badge status-stock">In Stock</span>
                                    </td>
                                    <td>
                                        <button class="action-btn"
                                            onclick="openUpdateStockModal('#001', 'Cement', 560)"><i
                                                class="fas fa-plus"></i> Add Stock</button>
                                        <button class="action-btn delete"><i class="fas fa-trash"></i></button>
                                    </td>
                                </tr>
                                <tr data-type="out">
                                    <td>#002</td>
                                    <td>Latex Paint</td>
                                    <td>Paints & Finishes</td>
                                    <td>1L Container</td>
                                    <td>0</td>
                                    <td>₱350.00</td>
                                    <td>
                                        <span class="status-badge status-out">Out of Stock</span>
                                    </td>
                                    <td>
                                        <button class="action-btn"
                                            onclick="openUpdateStockModal('#002', 'Latex Paint', 0)"><i
                                                class="fas fa-restock"></i> Restock</button>
                                        <button class="action-btn delete"><i class="fas fa-trash"></i></button>
                                    </td>
                                </tr>
                                <tr data-type="in">
                                    <td>#003</td>
                                    <td>Pliers</td>
                                    <td>Hand Tools</td>
                                    <td>10-inch</td>
                                    <td>270</td>
                                    <td>₱150.00</td>
                                    <td>
                                        <span class="status-badge status-stock">In Stock</span>
                                    </td>
                                    <td>
                                        <button class="action-btn"
                                            onclick="openUpdateStockModal('#003', 'Pliers', 270)"><i
                                                class="fas fa-plus"></i> Add Stock</button>
                                        <button class="action-btn delete"><i class="fas fa-trash"></i></button>
                                    </td>
                                </tr>
                                <tr data-type="in">
                                    <td>#004</td>
                                    <td>Screwdriver Set</td>
                                    <td>Hand Tools</td>
                                    <td>7-Piece Set</td>
                                    <td>230</td>
                                    <td>₱450.00</td>
                                    <td>
                                        <span class="status-badge status-stock">In Stock</span>
                                    </td>
                                    <td>
                                        <button class="action-btn"
                                            onclick="openUpdateStockModal('#004', 'Screwdriver Set', 230)"><i
                                                class="fas fa-plus"></i> Add Stock</button>
                                        <button class="action-btn delete"><i class="fas fa-trash"></i></button>
                                    </td>
                                </tr>
                                <tr data-type="in">
                                    <td>#005</td>
                                    <td>Steel Nails</td>
                                    <td>Fasteners</td>
                                    <td>1kg Pack</td>
                                    <td>1200</td>
                                    <td>₱80.00</td>
                                    <td>
                                        <span class="status-badge status-stock">In Stock</span>
                                    </td>
                                    <td>
                                        <button class="action-btn"
                                            onclick="openUpdateStockModal('#005', 'Steel Nails', 1200)"><i
                                                class="fas fa-plus"></i> Add Stock</button>
                                        <button class="action-btn delete"><i class="fas fa-trash"></i></button>
                                    </td>
                                </tr>
                                <tr data-type="out">
                                    <td>#006</td>
                                    <td>Wood Stain</td>
                                    <td>Paints & Finishes</td>
                                    <td>500ml Bottle</td>
                                    <td>0</td>
                                    <td>₱280.00</td>
                                    <td>
                                        <span class="status-badge status-out">Out of Stock</span>
                                    </td>
                                    <td>
                                        <button class="action-btn"
                                            onclick="openUpdateStockModal('#006', 'Wood Stain', 0)"><i
                                                class="fas fa-restock"></i> Restock</button>
                                        <button class="action-btn delete"><i class="fas fa-trash"></i></button>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </section>

                <!-- ADD/UPDATE STOCK MODAL -->
                <div class="modal-overlay" id="stockModal">
                    <div class="modal" style="max-width:600px;">
                        <div class="modal-header">
                            <i class="fas fa-cube"></i>
                            <h2>Add/Update Stock</h2>
                            <button class="modal-close" onclick="closeStockModal()">&times;</button>
                        </div>
                        <div class="modal-body">
                            <div class="form-group">
                                <label>Product</label>
                                <div
                                    style="padding:12px 15px; background:rgba(255,255,255,0.08); border-radius:8px; border-left:3px solid var(--color-light-blue);">
                                    <span id="stockModal_productName" style="font-weight:600;"></span>
                                    <p style="font-size:12px; color:#b9c3d9; margin-top:4px;">ID: <span
                                            id="stockModal_productId"></span></p>
                                </div>
                            </div>

                            <div class="form-group">
                                <label>Current Stock Level</label>
                                <input type="text" id="stockModal_currentStock" readonly
                                    style="background:rgba(255,255,255,0.05); cursor:not-allowed;">
                            </div>

                            <div class="form-group">
                                <label for="stockModal_quantity">Quantity to Add <span
                                        style="color:#ff4757;">*</span></label>
                                <input type="number" id="stockModal_quantity" placeholder="Enter quantity" min="1"
                                    required>
                                <small style="color:#b9c3d9;">New stock level will be: <span
                                        id="stockModal_newTotal">0</span> units</small>
                            </div>

                            <div
                                style="background:rgba(255,255,255,0.05); padding:15px; border-radius:8px; margin:20px 0;">
                                <h4 style="color:#fff; margin-bottom:12px;">Supplier & Purchase Details (Optional)</h4>
                                <div class="form-group">
                                    <label for="stockModal_supplier">Supplier Name</label>
                                    <input type="text" id="stockModal_supplier" class="input-field"
                                        placeholder="e.g., ABC Supplier Co.">
                                </div>
                                <div class="form-row">
                                    <div class="form-group">
                                        <label for="stockModal_invoiceNo">Invoice Number</label>
                                        <input type="text" id="stockModal_invoiceNo" class="input-field"
                                            placeholder="e.g., INV-2026-001">
                                    </div>
                                    <div class="form-group">
                                        <label for="stockModal_purchaseDate">Purchase Date</label>
                                        <input type="date" id="stockModal_purchaseDate" class="input-field">
                                    </div>
                                </div>
                            </div>

                            <div class="form-group">
                                <label for="stockModal_notes">Additional Notes</label>
                                <textarea id="stockModal_notes" class="input-field" style="min-height:80px;"
                                    placeholder="e.g., Delivery from ABC Supplier - Invoice #123&#10;Condition: Good&#10;Checked by: John Doe"></textarea>
                            </div>

                            <div
                                style="background:rgba(16, 185, 129, 0.1); padding:12px; border-radius:8px; border-left:3px solid #10b981; margin-top:15px;">
                                <p style="font-size:13px; color:#bcd9ff;"><i class="fas fa-info-circle"></i> Stock will
                                    automatically update when you save. A record of this transaction will be logged.</p>
                            </div>
                        </div>
                        <div class="modal-actions">
                            <button class="btn btn-cancel" onclick="closeStockModal()">Cancel</button>
                            <button class="btn btn-primary" onclick="saveStockUpdate()"><i class="fas fa-save"></i> Save
                                & Update Stock</button>
                        </div>
                    </div>
                </div>
            </section>

            <!-- SETTINGS SECTION -->
            <section id="settingsSection" style="display:none;">
                <div class="settings-container">
                    <aside class="settings-sidebar">
                        <h3><i class="fas fa-cogs"></i>SETTINGS <span
                                style="font-size:12px;color:#bcd9ff;font-weight:400;"></span></h3>
                        <nav class="settings-nav" aria-label="Settings Navigation">
                            <a class="settings-nav-item active" onclick="showSection('business')"><i
                                    class="fas fa-building"></i> Business Info</a>
                            <a class="settings-nav-item" onclick="showSection('taxpay')"><i class="fas fa-receipt"></i>
                                Tax & Payment</a>
                            <a class="settings-nav-item" onclick="showSection('order')"><i
                                    class="fas fa-clipboard-list"></i> Order Settings</a>
                            <a class="settings-nav-item" onclick="showSection('product')"><i class="fas fa-box"></i>
                                Product Settings</a>
                            <a class="settings-nav-item" onclick="showSection('useracct')"><i
                                    class="fas fa-user-shield"></i> User Account</a>
                            <a class="settings-nav-item" onclick="showSection('backupdata')"><i
                                    class="fas fa-database"></i> Backup & Data</a>
                            <a class="settings-nav-item" onclick="showSection('notif')"><i class="fas fa-bell"></i>
                                Notifications</a>
                        </nav>
                    </aside>
                    <div class="settings-content">
                        <!-- BUSINESS INFO -->
                        <div class="settings-panel active" id="business-section">
                            <h2><i class="fas fa-building"></i> Business Information</h2>
                            <div class="form-group">
                                <label>Business Name</label>
                                <input id="settings_business_name" type="text" placeholder="Padua Hardware">
                            </div>
                            <div class="form-group">
                                <label>Address</label>
                                <input id="settings_business_address" type="text" placeholder="Business Address">
                            </div>
                            <div class="form-group">
                                <label>Contact Number</label>
                                <input id="settings_business_contact" type="text" placeholder="Mobile / Landline">
                            </div>
                            <div class="form-group">
                                <label>Email Address</label>
                                <input id="settings_business_email" type="email" placeholder="billing@company.com">
                            </div>
                            <div class="form-group">
                                <label>Business Logo</label>
                                <input id="settings_business_logo" type="file" accept="image/*"
                                    onchange="updateSidebarLogo(event)">
                            </div>
                        </div>
                        <!-- TAX & PAYMENT -->
                        <div class="settings-panel" id="taxpay-section">
                            <h2><i class="fas fa-receipt"></i> Tax & Payment</h2>
                            <div class="form-group">
                                <label>Tax Rate (%)</label>
                                <input id="settings_tax_rate" type="number" min="0" max="100" placeholder="12">
                            </div>
                            <div class="form-group">
                                <label>Payment Methods</label>
                                <div style="display:flex;gap:12px;flex-wrap:wrap;">
                                    <label><input type="checkbox" class="settings_payment_method" value="Cash">
                                        Cash</label>
                                    <label><input type="checkbox" class="settings_payment_method" value="GCash">
                                        GCash</label>
                                    <label><input type="checkbox" class="settings_payment_method" value="Bank Transfer">
                                        Bank Transfer</label>
                                    <label><input type="checkbox" class="settings_payment_method" value="Card">
                                        Card</label>
                                </div>
                            </div>
                            <div class="form-group">
                                <label>Currency</label>
                                <select id="settings_currency">
                                    <option value="PHP">PHP (₱)</option>
                                </select>
                            </div>
                        </div>
                        <!-- ORDER SETTINGS -->
                        <div class="settings-panel" id="order-section">
                            <h2><i class="fas fa-clipboard-list"></i> Order Settings</h2>
                            <div class="form-group">
                                <label>Order Number Prefix</label>
                                <input id="settings_order_prefix" type="text" placeholder="ORD-2025-">
                            </div>
                            <div class="form-group">
                                <label>Auto-generate Order Number</label>
                                <select id="settings_order_auto">
                                    <option value="yes">Yes</option>
                                    <option value="no">No</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>Default Order Status</label>
                                <select id="settings_order_status">
                                    <option value="Pending">Pending</option>
                                    <option value="Confirmed">Confirmed</option>
                                    <option value="Processing">Processing</option>
                                    <option value="Completed">Completed</option>
                                </select>
                            </div>
                        </div>
                        <!-- PRODUCT SETTINGS -->
                        <div class="settings-panel" id="product-section">
                            <h2><i class="fas fa-box"></i> Product Settings</h2>
                            <div class="form-group">
                                <label>Low Stock Alert Level</label>
                                <input id="settings_low_stock" type="number" min="1" placeholder="10">
                            </div>
                            <div class="form-group">
                                <label>Enable Stock Tracking</label>
                                <select id="settings_stock_tracking">
                                    <option value="yes">Yes</option>
                                    <option value="no">No</option>
                                </select>
                            </div>
                        </div>
                        <!-- USER ACCOUNT SETTINGS -->
                        <div class="settings-panel" id="useracct-section">
                            <h2><i class="fas fa-user-shield"></i> User Account Settings</h2>
                            <div class="form-group">
                                <label>Change Password</label>
                                <input id="settings_change_password" type="password" placeholder="New Password">
                            </div>
                            <div class="form-group">
                                <label>Session Timeout (minutes)</label>
                                <input id="settings_session_timeout" type="number" min="1" placeholder="30">
                            </div>
                        </div>
                        <!-- BACKUP & DATA -->
                        <div class="settings-panel" id="backupdata-section">
                            <h2><i class="fas fa-database"></i> Backup & Data</h2>
                            <div class="form-group">
                                <button class="btn btn-primary" onclick="backupDatabase()"><i
                                        class="fas fa-download"></i> Backup Database</button>
                            </div>
                            <div class="form-group">
                                <label>Restore Database</label>
                                <input id="settings_restore_db" type="file" accept=".sql,.bak">
                            </div>
                            <div class="form-group">
                                <button class="btn" onclick="exportCustomers()"><i class="fas fa-users"></i> Export
                                    Customer Data (CSV/Excel)</button>
                            </div>
                            <div class="form-group">
                                <button class="btn" onclick="exportSales()"><i class="fas fa-file-invoice-dollar"></i>
                                    Export Sales Report (PDF/Excel)</button>
                            </div>
                        </div>
                        <!-- NOTIFICATIONS -->
                        <div class="settings-panel" id="notif-section">
                            <h2><i class="fas fa-bell"></i> Notifications</h2>
                            <div class="form-group">
                                <label>Enable Low Stock Alerts</label>
                                <select id="settings_low_stock_alerts">
                                    <option value="yes">Yes</option>
                                    <option value="no">No</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>Enable New Order Notifications</label>
                                <select id="settings_new_order_notif">
                                    <option value="yes">Yes</option>
                                    <option value="no">No</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>Email Notifications</label>
                                <select id="settings_email_notif">
                                    <option value="yes">Yes</option>
                                    <option value="no">No</option>
                                </select>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- SALES SECTION -->
            <section id="salesSection" style="display:none;">
                <div class="panel">
                    <h3><i class="fas fa-chart-line"></i> Sales Report</h3>
                    <p style="color: #cbd5ff; margin-bottom: 25px;">View detailed sales performance and revenue
                        analytics</p>

                    <!-- OVERVIEW CARDS -->
                    <div
                        style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; margin-bottom: 30px;">
                        <div class="card">
                            <h4>Total Revenue</h4>
                            <h2 class="price">₱125,450</h2>
                        </div>
                        <div class="card">
                            <h4>Total Transactions</h4>
                            <h2 class="price">342</h2>
                        </div>
                        <div class="card">
                            <h4>Average Sale</h4>
                            <h2 class="price">₱367</h2>
                        </div>
                        <div class="card">
                            <h4>Growth Rate</h4>
                            <h2 class="price" style="color: #10b981;">+23%</h2>
                        </div>
                    </div>

                    <!-- MONTHLY SALES OVERVIEW -->
                    <div class="panel"
                        style="background: rgba(var(--color-blue-accent-2 rgb), 0.7); border: 1px solid rgba(var(--color-light-blue-rgb), 0.2); margin-bottom: 25px;">
                        <h3 style="margin-bottom: 20px;"><i class="fas fa-calendar-alt"></i> Monthly Sales Overview</h3>
                        <div style="overflow-x: auto;">
                            <table style="width: 100%;">
                                <thead>
                                    <tr style="background: rgba(var(--color-light-blue-rgb), 0.1);">
                                        <th style="padding: 12px; text-align: left;">Month</th>
                                        <th style="padding: 12px; text-align: right;">Revenue</th>
                                        <th style="padding: 12px; text-align: right;">Orders</th>
                                        <th style="padding: 12px; text-align: right;">Avg Sale</th>
                                        <th style="padding: 12px; text-align: right;">Growth</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr style="border-bottom: 1px solid rgba(var(--color-white-rgb), 0.1);">
                                        <td style="padding: 12px;">January 2026</td>
                                        <td
                                            style="padding: 12px; text-align: right; color: var(--color-light-blue); font-weight: 600;">
                                            ₱125,450</td>
                                        <td style="padding: 12px; text-align: right;">342</td>
                                        <td style="padding: 12px; text-align: right;">₱367</td>
                                        <td style="padding: 12px; text-align: right; color: #10b981;">+23%</td>
                                    </tr>
                                    <tr style="border-bottom: 1px solid rgba(var(--color-white-rgb), 0.1);">
                                        <td style="padding: 12px;">December 2025</td>
                                        <td style="padding: 12px; text-align: right; color: #cbd5ff;">₱102,300</td>
                                        <td style="padding: 12px; text-align: right;">278</td>
                                        <td style="padding: 12px; text-align: right;">₱368</td>
                                        <td style="padding: 12px; text-align: right; color: #f59e0b;">+18%</td>
                                    </tr>
                                    <tr style="border-bottom: 1px solid rgba(var(--color-white-rgb), 0.1);">
                                        <td style="padding: 12px;">November 2025</td>
                                        <td style="padding: 12px; text-align: right; color: #cbd5ff;">₱98,750</td>
                                        <td style="padding: 12px; text-align: right;">265</td>
                                        <td style="padding: 12px; text-align: right;">₱373</td>
                                        <td style="padding: 12px; text-align: right; color: #f59e0b;">+12%</td>
                                    </tr>
                                    <tr style="border-bottom: 1px solid rgba(var(--color-white-rgb), 0.1);">
                                        <td style="padding: 12px;">October 2025</td>
                                        <td style="padding: 12px; text-align: right; color: #cbd5ff;">₱87,890</td>
                                        <td style="padding: 12px; text-align: right;">242</td>
                                        <td style="padding: 12px; text-align: right;">₱363</td>
                                        <td style="padding: 12px; text-align: right; color: #10b981;">+8%</td>
                                    </tr>
                                    <tr style="border-bottom: 1px solid rgba(var(--color-white-rgb), 0.1);">
                                        <td style="padding: 12px;">September 2025</td>
                                        <td style="padding: 12px; text-align: right; color: #cbd5ff;">₱81,450</td>
                                        <td style="padding: 12px; text-align: right;">225</td>
                                        <td style="padding: 12px; text-align: right;">₱362</td>
                                        <td style="padding: 12px; text-align: right; color: #ef4444;">-3%</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <!-- SALES BY PRODUCT -->
                    <div class="table-section">
                        <h3>Sales by Product</h3>
                        <table>
                            <thead>
                                <tr>
                                    <th>Product</th>
                                    <th>Units Sold</th>
                                    <th>Revenue</th>
                                    <th>Margin</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>Cement (50kg)</td>
                                    <td>1,500</td>
                                    <td>â‚±375,000</td>
                                    <td>22%</td>
                                </tr>
                                <tr>
                                    <td>Latex Paint</td>
                                    <td>340</td>
                                    <td>â‚±119,000</td>
                                    <td>28%</td>
                                </tr>
                                <tr>
                                    <td>Claw Hammer</td>
                                    <td>420</td>
                                    <td>â‚±147,000</td>
                                    <td>35%</td>
                                </tr>
                                <tr>
                                    <td>Screwdriver Set</td>
                                    <td>230</td>
                                    <td>â‚±103,500</td>
                                    <td>40%</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </section>

            <!-- REPORTS SECTION -->
            <section id="reportsSection" style="display:none;">
                <div class="panel">
                    <h3><i class="fas fa-chart-bar"></i> Reports & Analytics</h3>
                    <p style="color: #cbd5ff; margin-bottom: 25px;">Comprehensive business intelligence and performance
                        metrics</p>
                    <div
                        style="display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 20px; margin-bottom: 30px;">
                        <div class="alert-card alert-in-stock">
                            <div class="alert-icon"><i class="fas fa-arrow-up"></i></div>
                            <div class="alert-content">
                                <h4>Monthly Growth</h4>
                                <p class="alert-count">+23%</p>
                                <p class="alert-desc">Compared to last month</p>
                            </div>
                        </div>
                        <div class="alert-card alert-low-stock">
                            <div class="alert-icon"><i class="fas fa-users"></i></div>
                            <div class="alert-content">
                                <h4>Customer Count</h4>
                                <p class="alert-count">150</p>
                                <p class="alert-desc">Active customers</p>
                            </div>
                        </div>
                        <div class="alert-card alert-out-of-stock">
                            <div class="alert-icon"><i class="fas fa-box"></i></div>
                            <div class="alert-content">
                                <h4>Products Listed</h4>
                                <p class="alert-count">67</p>
                                <p class="alert-desc">Active inventory items</p>
                            </div>
                        </div>
                    </div>
                    <div class="table-section">
                        <h3>Monthly Performance</h3>
                        <table>
                            <thead>
                                <tr>
                                    <th>Month</th>
                                    <th>Revenue</th>
                                    <th>Orders</th>
                                    <th>Profit Margin</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>January 2026</td>
                                    <td>â‚±125,450</td>
                                    <td>342</td>
                                    <td>29%</td>
                                </tr>
                                <tr>
                                    <td>December 2025</td>
                                    <td>â‚±102,300</td>
                                    <td>278</td>
                                    <td>27%</td>
                                </tr>
                                <tr>
                                    <td>November 2025</td>
                                    <td>â‚±98,750</td>
                                    <td>265</td>
                                    <td>26%</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </section>

            <!-- STAFF SECTION -->
            <section id="staffSection" style="display:none;">
                <div class="panel">
                    <h3><i class="fas fa-user-friends"></i> Staff Management</h3>
                    <div style="margin-bottom: 20px;">
                        <button class="tab-btn active" onclick="showStaffTab('list', event)"><i class="fas fa-list"></i>
                            Staff List</button>
                        <button class="tab-btn" onclick="showStaffTab('add', event)"><i class="fas fa-user-plus"></i>
                            Add/Edit Staff</button>
                        <button class="tab-btn" onclick="showStaffTab('roles', event)"><i
                                class="fas fa-user-shield"></i> Roles & Permissions</button>
                        <button class="tab-btn" onclick="showStaffTab('logs', event)"><i class="fas fa-history"></i>
                            Activity Logs</button>
                    </div>
                    <!-- STAFF LIST TAB -->
                    <div id="staffTab-list" class="staff-tab active">
                        <div style="display:flex; gap:16px; margin-bottom:18px; flex-wrap:wrap; align-items:center;">
                            <div class="search-box" style="flex:1; min-width:220px;">
                                <i class="fas fa-search"></i>
                                <input type="text" id="staffSearchInput" placeholder="Search by name, email, ID..."
                                    onkeyup="filterStaffList()">
                            </div>
                            <select id="staffRoleFilter" onchange="filterStaffList()"
                                style="padding:7px 12px; border-radius:8px;">
                                <option value="">All Roles</option>
                                <option>Administrator</option>
                                <option>Sales Staff</option>
                                <option>Inventory Manager</option>
                                <option>Cashier</option>
                            </select>
                            <select id="staffStatusFilter" onchange="filterStaffList()"
                                style="padding:7px 12px; border-radius:8px;">
                                <option value="">All Status</option>
                                <option>Active</option>
                                <option>Inactive</option>
                            </select>
                        </div>
                        <div class="table-section">
                            <table style="width:100%;">
                                <thead>
                                    <tr>
                                        <th>Photo</th>
                                        <th>Employee ID</th>
                                        <th>Full Name</th>
                                        <th>Role/Position</th>
                                        <th>Email</th>
                                        <th>Contact</th>
                                        <th>Status</th>
                                        <th>Last Login</th>
                                        <th>Actions</th>
                                    </tr>
                                </thead>
                                <tbody id="staffTableBody"></tbody>
                            </table>
                        </div>
                    </div>
                    <!-- ADD/EDIT STAFF TAB -->
                    <div id="staffTab-add" class="staff-tab" style="display:none;">
                        <form id="staffForm" class="panel" style="max-width:700px;margin:auto;"
                            onsubmit="submitStaffForm(event)">
                            <h3><i class="fas fa-user-plus"></i> Add/Edit Staff</h3>
                            <div style="display:grid; grid-template-columns:1fr 1fr; gap:18px;">
                                <div>
                                    <label>Employee Photo</label>
                                    <input type="file" id="staffPhoto" accept="image/*"
                                        onchange="previewStaffPhoto(event)">
                                    <img id="staffPhotoPreview" src="assets/user-default.png" alt="Preview"
                                        style="width:80px;height:80px;border-radius:50%;margin-top:8px;object-fit:cover;">
                                </div>
                                <div>
                                    <label>Employee ID *</label>
                                    <input type="text" id="staffEmpId" required>
                                </div>
                                <div>
                                    <label>First Name *</label>
                                    <input type="text" id="staffFirstName" required>
                                </div>
                                <div>
                                    <label>Last Name *</label>
                                    <input type="text" id="staffLastName" required>
                                </div>
                                <div>
                                    <label>Middle Name</label>
                                    <input type="text" id="staffMiddleName">
                                </div>
                                <div>
                                    <label>Gender</label>
                                    <select id="staffGender">
                                        <option>Male</option>
                                        <option>Female</option>
                                        <option>Other</option>
                                    </select>
                                </div>
                                <div>
                                    <label>Birthdate</label>
                                    <input type="date" id="staffBirthdate">
                                </div>
                                <div>
                                    <label>Contact Number *</label>
                                    <input type="text" id="staffContact" required>
                                </div>
                                <div>
                                    <label>Email Address *</label>
                                    <input type="email" id="staffEmail" required>
                                </div>
                                <div>
                                    <label>Position/Role *</label>
                                    <input type="text" id="staffRole" required>
                                </div>
                                <div>
                                    <label>Department</label>
                                    <input type="text" id="staffDept">
                                </div>
                                <div>
                                    <label>Date Hired</label>
                                    <input type="date" id="staffDateHired">
                                </div>
                                <div>
                                    <label>Employment Type</label>
                                    <select id="staffEmpType">
                                        <option>Full-time</option>
                                        <option>Part-time</option>
                                        <option>Contractual</option>
                                    </select>
                                </div>
                                <div>
                                    <label>Shift Schedule</label>
                                    <input type="text" id="staffShift">
                                </div>
                            </div>
                            <hr style="margin:24px 0;">
                            <h4>Account Settings</h4>
                            <div style="display:grid; grid-template-columns:1fr 1fr; gap:18px;">
                                <div>
                                    <label>Username *</label>
                                    <input type="text" id="staffUsername" required>
                                </div>
                                <div>
                                    <label>Password *</label>
                                    <input type="password" id="staffPassword" required oninput="checkPwdStrength()">
                                    <div id="pwdStrength" style="font-size:12px;margin-top:3px;"></div>
                                </div>
                                <div>
                                    <label>Confirm Password *</label>
                                    <input type="password" id="staffConfirmPassword" required>
                                </div>
                                <div>
                                    <label>Role Assignment *</label>
                                    <select id="staffRoleAssign" required>
                                        <option>Administrator</option>
                                        <option>Sales Staff</option>
                                        <option>Inventory Manager</option>
                                        <option>Cashier</option>
                                        <option>Custom</option>
                                    </select>
                                </div>
                                <div>
                                    <label>Force Password Change</label>
                                    <input type="checkbox" id="staffForcePwdChange">
                                </div>
                                <div>
                                    <label>Account Status</label>
                                    <select id="staffAccountStatus">
                                        <option>Active</option>
                                        <option>Inactive</option>
                                    </select>
                                </div>
                            </div>
                            <hr style="margin:24px 0;">
                            <h4>Permissions</h4>
                            <div style="overflow-x:auto;">
                                <table style="width:100%;margin-bottom:12px;">
                                    <thead>
                                        <tr>
                                            <th>Module</th>
                                            <th>View</th>
                                            <th>Create</th>
                                            <th>Edit</th>
                                            <th>Delete</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td>Customers</td>
                                            <td><input type="checkbox"></td>
                                            <td><input type="checkbox"></td>
                                            <td><input type="checkbox"></td>
                                            <td><input type="checkbox"></td>
                                        </tr>
                                        <tr>
                                            <td>Orders</td>
                                            <td><input type="checkbox"></td>
                                            <td><input type="checkbox"></td>
                                            <td><input type="checkbox"></td>
                                            <td><input type="checkbox"></td>
                                        </tr>
                                        <tr>
                                            <td>Inventory</td>
                                            <td><input type="checkbox"></td>
                                            <td><input type="checkbox"></td>
                                            <td><input type="checkbox"></td>
                                            <td><input type="checkbox"></td>
                                        </tr>
                                        <tr>
                                            <td>Reports</td>
                                            <td><input type="checkbox"></td>
                                            <td><input type="checkbox"></td>
                                            <td><input type="checkbox"></td>
                                            <td><input type="checkbox"></td>
                                        </tr>
                                        <tr>
                                            <td>Settings</td>
                                            <td><input type="checkbox"></td>
                                            <td><input type="checkbox"></td>
                                            <td><input type="checkbox"></td>
                                            <td><input type="checkbox"></td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                            <div style="text-align:right;">
                                <button class="btn btn-primary" type="submit"><i class="fas fa-save"></i> Save
                                    Staff</button>
                            </div>
                        </form>
                    </div>
                    <!-- ROLES & PERMISSIONS TAB -->
                    <div id="staffTab-roles" class="staff-tab" style="display:none;">
                        <div class="panel" style="max-width:900px;margin:auto;">
                            <h3><i class="fas fa-user-shield"></i> Roles & Permissions</h3>
                            <table style="width:100%;margin-bottom:20px;">
                                <thead>
                                    <tr>
                                        <th>Role</th>
                                        <th>Description</th>
                                        <th>Modules</th>
                                        <th>Actions</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>Administrator</td>
                                        <td>Full access to all modules</td>
                                        <td>All</td>
                                        <td>View, Create, Edit, Delete</td>
                                    </tr>
                                    <tr>
                                        <td>Sales Staff</td>
                                        <td>Sales and customer management</td>
                                        <td>Orders, Customers</td>
                                        <td>View, Create, Edit</td>
                                    </tr>
                                    <tr>
                                        <td>Inventory Manager</td>
                                        <td>Inventory control</td>
                                        <td>Inventory</td>
                                        <td>View, Edit</td>
                                    </tr>
                                    <tr>
                                        <td>Cashier</td>
                                        <td>POS and payments</td>
                                        <td>Orders, Payments</td>
                                        <td>View, Create</td>
                                    </tr>
                                    <tr>
                                        <td>Custom</td>
                                        <td>Custom role</td>
                                        <td>Custom</td>
                                        <td>Custom</td>
                                    </tr>
                                </tbody>
                            </table>
                            <h4>Permission Matrix</h4>
                            <div style="overflow-x:auto;">
                                <table style="width:100%;">
                                    <thead>
                                        <tr>
                                            <th>Module</th>
                                            <th>View</th>
                                            <th>Create</th>
                                            <th>Edit</th>
                                            <th>Delete</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td>Customers</td>
                                            <td><input type="checkbox" checked disabled></td>
                                            <td><input type="checkbox" checked disabled></td>
                                            <td><input type="checkbox" checked disabled></td>
                                            <td><input type="checkbox" checked disabled></td>
                                        </tr>
                                        <tr>
                                            <td>Orders</td>
                                            <td><input type="checkbox" checked disabled></td>
                                            <td><input type="checkbox" checked disabled></td>
                                            <td><input type="checkbox" checked disabled></td>
                                            <td><input type="checkbox" checked disabled></td>
                                        </tr>
                                        <tr>
                                            <td>Inventory</td>
                                            <td><input type="checkbox" checked disabled></td>
                                            <td><input type="checkbox" checked disabled></td>
                                            <td><input type="checkbox" checked disabled></td>
                                            <td><input type="checkbox" checked disabled></td>
                                        </tr>
                                        <tr>
                                            <td>Reports</td>
                                            <td><input type="checkbox" checked disabled></td>
                                            <td><input type="checkbox" checked disabled></td>
                                            <td><input type="checkbox" checked disabled></td>
                                            <td><input type="checkbox" checked disabled></td>
                                        </tr>
                                        <tr>
                                            <td>Settings</td>
                                            <td><input type="checkbox" checked disabled></td>
                                            <td><input type="checkbox" checked disabled></td>
                                            <td><input type="checkbox" checked disabled></td>
                                            <td><input type="checkbox" checked disabled></td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                    <!-- ACTIVITY LOGS TAB -->
                    <div id="staffTab-logs" class="staff-tab" style="display:none;">
                        <div class="panel" style="max-width:900px;margin:auto;">
                            <h3><i class="fas fa-history"></i> Activity Logs</h3>
                            <div
                                style="display:flex; gap:12px; margin-bottom:12px; flex-wrap:wrap; align-items:center;">
                                <input type="text" id="logUserFilter" placeholder="Filter by user..."
                                    style="padding:7px 12px; border-radius:8px;">
                                <input type="date" id="logDateFrom" style="padding:7px 12px; border-radius:8px;">
                                <input type="date" id="logDateTo" style="padding:7px 12px; border-radius:8px;">
                                <select id="logActionType" style="padding:7px 12px; border-radius:8px;">
                                    <option value="">All Actions</option>
                                    <option>Login</option>
                                    <option>Logout</option>
                                    <option>Create</option>
                                    <option>Edit</option>
                                    <option>Delete</option>
                                </select>
                                <button class="btn btn-primary" onclick="exportStaffLogs()"><i
                                        class="fas fa-download"></i> Export Logs</button>
                            </div>
                            <div class="table-section">
                                <table style="width:100%;">
                                    <thead>
                                        <tr>
                                            <th>Date/Time</th>
                                            <th>User</th>
                                            <th>Action</th>
                                            <th>IP Address</th>
                                        </tr>
                                    </thead>
                                    <tbody id="staffLogsTable"></tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- DELIVERY STATUS SECTION -->
            <section id="deliverySection" style="display:none;">
                <div class="panel">
                    <h3><i class="fas fa-truck"></i> Delivery Status</h3>
                    <p style="color: #cbd5ff; margin-bottom: 25px;">Track all active deliveries and shipping status</p>
                    <div
                        style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; margin-bottom: 30px;">
                        <div class="alert-card alert-in-stock">
                            <div class="alert-icon"><i class="fas fa-check-circle"></i></div>
                            <div class="alert-content">
                                <h4>Delivered</h4>
                                <p class="alert-count">28</p>
                                <p class="alert-desc">Completed deliveries</p>
                            </div>
                        </div>
                        <div class="alert-card alert-low-stock">
                            <div class="alert-icon"><i class="fas fa-box"></i></div>
                            <div class="alert-content">
                                <h4>Out for Delivery</h4>
                                <p class="alert-count">5</p>
                                <p class="alert-desc">In transit</p>
                            </div>
                        </div>
                        <div class="alert-card alert-out-of-stock">
                            <div class="alert-icon"><i class="fas fa-exclamation-circle"></i></div>
                            <div class="alert-content">
                                <h4>Failed Attempts</h4>
                                <p class="alert-count">2</p>
                                <p class="alert-desc">Requires rescheduling</p>
                            </div>
                        </div>
                    </div>
                    <div class="table-section">
                        <h3>Active Deliveries</h3>
                        <table>
                            <thead>
                                <tr>
                                    <th>Delivery ID</th>
                                    <th>Order ID</th>
                                    <th>Customer</th>
                                    <th>Driver</th>
                                    <th>Status</th>
                                    <th>Scheduled Date</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>#DLV-001</td>
                                    <td>#ORD-001</td>
                                    <td>Juan Dela Cruz</td>
                                    <td>Pedro Reyes</td>
                                    <td><span class="status-badge status-in">Delivered</span></td>
                                    <td>2026-01-28</td>
                                </tr>
                                <tr>
                                    <td>#DLV-002</td>
                                    <td>#ORD-002</td>
                                    <td>Maria Santos</td>
                                    <td>Pedro Reyes</td>
                                    <td><span class="status-badge status-stock">Out for Delivery</span></td>
                                    <td>2026-02-05</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </section>

            <!-- MESSAGES SECTION -->
            <section id="messageSection" style="display:none;">
                <div class="panel">
                    <h3><i class="fas fa-envelope"></i> Messages & Communication</h3>
                    <p style="color: #cbd5ff; margin-bottom: 25px;">View and manage customer and staff communications
                    </p>
                    <div style="max-width: 800px;">
                        <div
                            style="background: rgba(var(--color-white-rgb),0.05); border-radius: 12px; padding: 20px; margin-bottom: 20px; border-left: 4px solid var(--color-light-blue);">
                            <p style="color: var(--color-light-blue); font-weight: 600; margin: 0 0 8px 0;">Customer
                                Inquiry - Order #1023</p>
                            <p style="color: #bcd9ff; margin: 0 0 8px 0;">From: Juan Dela Cruz (juan.cruz@email.com)</p>
                            <p style="color: #cbd5ff; margin: 0;">Message: When will my order arrive? I ordered cement
                                and paint last week.</p>
                            <p style="color: #8899aa; font-size: 12px; margin: 12px 0 0 0;">2026-02-05 10:30 AM</p>
                        </div>
                        <div
                            style="background: rgba(255,255,255,0.05); border-radius: 12px; padding: 20px; margin-bottom: 20px; border-left: 4px solid #10b981;">
                            <p style="color: #10b981; font-weight: 600; margin: 0 0 8px 0;">Staff Notification -
                                Inventory Alert</p>
                            <p style="color: #bcd9ff; margin: 0;">Low stock alert for Latex Paint. Current inventory: 5
                                units. Please reorder soon.</p>
                            <p style="color: #8899aa; font-size: 12px; margin: 12px 0 0 0;">2026-02-05 09:15 AM</p>
                        </div>
                        <div
                            style="background: rgba(255,255,255,0.05); border-radius: 12px; padding: 20px; border-left: 4px solid #f59e0b;">
                            <p style="color: #f59e0b; font-weight: 600; margin: 0 0 8px 0;">System Alert - Maintenance
                                Scheduled</p>
                            <p style="color: #bcd9ff; margin: 0;">System maintenance scheduled for 2026-02-10 02:00 AM -
                                04:00 AM.</p>
                            <p style="color: #8899aa; font-size: 12px; margin: 12px 0 0 0;">2026-02-04 03:30 PM</p>
                        </div>
                    </div>
                </div>
            </section>

            <!-- TOP PRODUCT SECTION -->
            <section id="topproductSection" style="display:none;">
                <div class="panel">
                    <h3><i class="fas fa-star"></i> Top Products</h3>
                    <p style="color: #cbd5ff; margin-bottom: 25px;">Monitor your best-selling products and sales trends
                    </p>
                    <div
                        style="display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 20px; margin-bottom: 30px;">
                        <div
                            style="background: var(--gradient-primary); padding: 25px; border-radius: 15px; text-align: center; color: white;">
                            <i class="fas fa-cubes" style="font-size: 32px; margin-bottom: 10px;"></i>
                            <p style="margin: 0; font-weight: 600;">Cement (50kg Bag)</p>
                            <p style="margin: 8px 0 0 0; font-size: 24px; font-weight: 800;">1,500 sold</p>
                            <p style="margin: 5px 0 0 0; opacity: 0.9; font-size: 14px;">â‚±375,000 revenue</p>
                        </div>
                        <div
                            style="background: var(--gradient-primary); padding: 25px; border-radius: 15px; text-align: center; color: white;">
                            <i class="fas fa-paint-roller" style="font-size: 32px; margin-bottom: 10px;"></i>
                            <p style="margin: 0; font-weight: 600;">Latex Paint</p>
                            <p style="margin: 8px 0 0 0; font-size: 24px; font-weight: 800;">340 sold</p>
                            <p style="margin: 5px 0 0 0; opacity: 0.9; font-size: 14px;">â‚±119,000 revenue</p>
                        </div>
                        <div
                            style="background: var(--gradient-border); padding: 25px; border-radius: 15px; text-align: center; color: white;">
                            <i class="fas fa-hammer" style="font-size: 32px; margin-bottom: 10px;"></i>
                            <p style="margin: 0; font-weight: 600;">Claw Hammer</p>
                            <p style="margin: 8px 0 0 0; font-size: 24px; font-weight: 800;">420 sold</p>
                            <p style="margin: 5px 0 0 0; opacity: 0.9; font-size: 14px;">â‚±147,000 revenue</p>
                        </div>
                    </div>
                    <div class="table-section">
                        <h3>Top 10 Best Sellers</h3>
                        <table>
                            <thead>
                                <tr>
                                    <th>Rank</th>
                                    <th>Product Name</th>
                                    <th>Units Sold</th>
                                    <th>Revenue</th>
                                    <th>Growth</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>1</td>
                                    <td>Cement (50kg Bag)</td>
                                    <td>1,500</td>
                                    <td>â‚±375,000</td>
                                    <td style="color: #10b981; font-weight: 600;">+15%</td>
                                </tr>
                                <tr>
                                    <td>2</td>
                                    <td>Latex Paint (1L)</td>
                                    <td>340</td>
                                    <td>â‚±119,000</td>
                                    <td style="color: #10b981; font-weight: 600;">+8%</td>
                                </tr>
                                <tr>
                                    <td>3</td>
                                    <td>Claw Hammer</td>
                                    <td>420</td>
                                    <td>â‚±147,000</td>
                                    <td style="color: #10b981; font-weight: 600;">+22%</td>
                                </tr>
                                <tr>
                                    <td>4</td>
                                    <td>Screwdriver Set (7-Piece)</td>
                                    <td>230</td>
                                    <td>â‚±103,500</td>
                                    <td style="color: #f59e0b; font-weight: 600;">-3%</td>
                                </tr>
                                <tr>
                                    <td>5</td>
                                    <td>Steel Nails (1kg)</td>
                                    <td>1,200</td>
                                    <td>â‚±96,000</td>
                                    <td style="color: #10b981; font-weight: 600;">+12%</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </section>
        </main>
    </div>
    <script>
        // --- Orders Panel Logic ---
        const ordersData = [
            {
                id: "#ORD-001",
                customer: "Juan Dela Cruz",
                payment: "Credit Card",
                type: "Regular",
                amount: "â‚±1,200",
                status: "Approved",
                date: "2026-01-18",
            },
            {
                id: "#ORD-002",
                customer: "Maria Santos",
                payment: "Cash",
                type: "Bulk",
                amount: "â‚±4,500",
                status: "Approved",
                date: "2026-01-19",
            },
            {
                id: "#ORD-003",
                customer: "Pedro Garcia",
                payment: "Online Transfer",
                type: "Regular",
                amount: "â‚±2,100",
                status: "Approved",
                date: "2026-01-20",
            },
            {
                id: "#ORD-004",
                customer: "Ana Fernandez",
                payment: "Check",
                type: "Bulk",
                amount: "â‚±8,900",
                status: "Approved",
                date: "2026-01-15",
            },
            {
                id: "#ORD-005",
                customer: "Carlos Reyes",
                payment: "Credit Card",
                type: "Regular",
                amount: "â‚±750",
                status: "Approved",
                date: "2026-01-12",
            },
            {
                id: "#ORD-006",
                customer: "Rosa Miguel",
                payment: "Cash",
                type: "Regular",
                amount: "â‚±3,200",
                status: "Rejected",
                date: "2026-01-10",
            },
        ];
        let currentFilter = "all";
        let currentOrderForApproval = null;
        let selectedDecision = null;

        function renderOrders(filter) {
            const tableBody = document.getElementById("ordersTableBody");
            if (!tableBody) return;
            tableBody.innerHTML = "";
            let filtered = ordersData;
            if (filter === "approved") {
                filtered = ordersData.filter((o) => o.status === "Approved");
            } else if (filter === "rejected") {
                filtered = ordersData.filter((o) => o.status === "Rejected");
            } else if (filter === "history") {
                filtered = ordersData.filter((o) => o.status === "Approved" || o.status === "Rejected");
            }
            if (filtered.length === 0) {
                tableBody.innerHTML = '<tr><td colspan="8" style="text-align: center; padding: 20px; color: #8899aa;">No orders found</td></tr>';
                return;
            }
            filtered.forEach((order) => {
                const statusColor = order.status === "Approved" ? "status-approved" : "status-rejected";
                const isActionDisabled = true;
                const row = document.createElement("tr");
                row.innerHTML = `
                                                    <td>${order.id}</td>
                                                    <td>${order.customer}</td>
                                                    <td>${order.payment}</td>
                                                    <td>${order.type}</td>
                                                    <td><strong>${order.amount}</strong></td>
                                                    <td><span class="status-badge ${statusColor}">${order.status}</span></td>
                                                    <td>${order.date}</td>
                                                    <td>
                                                            <button class="approve-btn" onclick="openApprovalModal('${order.id}', '${order.customer}', '${order.amount}')" ${isActionDisabled ? "disabled" : ""}>
                                                                    ${isActionDisabled ? "Completed" : "Review"}
                                                            </button>
                                                    </td>
                                            `;
                tableBody.appendChild(row);
            });
        }

        function filterOrders(filter, event) {
            currentFilter = filter;
            // Update active tab
            document.querySelectorAll(".tab-btn").forEach((btn) => {
                btn.classList.remove("active");
            });
            if (event && event.target) event.target.classList.add("active");
            renderOrders(filter);
        }

        function openApprovalModal(orderId, customer, amount) {
            currentOrderForApproval = orderId;
            selectedDecision = null;
            document.getElementById("modalOrderId").textContent = orderId;
            document.getElementById("modalCustomer").textContent = customer;
            document.getElementById("modalAmount").textContent = amount;
            document.getElementById("rejectReason").classList.remove("show");
            document.getElementById("rejectReason").value = "";
            document.getElementById("modalOverlay").classList.add("active");
        }

        function selectDecision(decision) {
            selectedDecision = decision;
            const reasonSelect = document.getElementById("rejectReason");
            if (decision === "reject") {
                reasonSelect.classList.add("show");
            } else {
                reasonSelect.classList.remove("show");
                reasonSelect.value = "";
            }
        }

        function submitApproval() {
            if (!selectedDecision) {
                alert("Please select Approve or Reject");
                return;
            }
            if (selectedDecision === "reject") {
                const reason = document.getElementById("rejectReason").value;
                if (!reason) {
                    alert("Please select a rejection reason");
                    return;
                }
                alert(`Order ${currentOrderForApproval} has been rejected.\nReason: ${reason}`);
            } else {
                alert(`Order ${currentOrderForApproval} has been approved successfully!`);
            }
            // Update order status
            const order = ordersData.find((o) => o.id === currentOrderForApproval);
            if (order) {
                order.status = selectedDecision === "approve" ? "Approved" : "Rejected";
            }
            closeModal();
            renderOrders(currentFilter);
        }

        function closeModal() {
            document.getElementById("modalOverlay").classList.remove("active");
            selectedDecision = null;
            currentOrderForApproval = null;
        }

        // ===== PIE CHART FUNCTION =====
        function drawPieChart() {
            const canvas = document.getElementById('pieChart');
            if (!canvas) return;

            const ctx = canvas.getContext('2d');
            const data = [
                { label: 'Tools & Equipment', value: 35, color: '#7FD3FF' },
                { label: 'Paint & Supplies', value: 25, color: '#002F6C' },
                { label: 'Building Materials', value: 20, color: '#10b981' },
                { label: 'Hardware & Fasteners', value: 15, color: '#f59e0b' },
                { label: 'Safety Equipment', value: 5, color: '#ef4444' }
            ];

            const total = data.reduce((sum, item) => sum + item.value, 0);
            let currentAngle = -Math.PI / 2;
            const centerX = canvas.width / 2;
            const centerY = canvas.height / 2;
            const radius = Math.min(centerX, centerY) - 20;

            // Draw pie slices
            data.forEach(item => {
                const sliceAngle = (item.value / total) * 2 * Math.PI;

                // Draw slice
                ctx.fillStyle = item.color;
                ctx.beginPath();
                ctx.moveTo(centerX, centerY);
                ctx.arc(centerX, centerY, radius, currentAngle, currentAngle + sliceAngle);
                ctx.lineTo(centerX, centerY);
                ctx.fill();

                // Draw border
                ctx.strokeStyle = 'var(--bg-dark)';
                ctx.lineWidth = 2;
                ctx.stroke();

                // Draw label
                const labelAngle = currentAngle + sliceAngle / 2;
                const labelX = centerX + Math.cos(labelAngle) * (radius * 0.65);
                const labelY = centerY + Math.sin(labelAngle) * (radius * 0.65);

                const percentage = Math.round((item.value / total) * 100);
                ctx.fillStyle = '#fff';
                ctx.font = 'bold 12px Poppins';
                ctx.textAlign = 'center';
                ctx.textBaseline = 'middle';
                ctx.fillText(percentage + '%', labelX, labelY);

                currentAngle += sliceAngle;
            });

            // Draw legend
            const legend = document.getElementById('chartLegend');
            legend.innerHTML = '';
            data.forEach(item => {
                const percentage = Math.round((item.value / total) * 100);
                const legendItem = document.createElement('div');
                legendItem.className = 'legend-item';
                legendItem.innerHTML = `
                    <div class="legend-color" style="background-color: ${item.color};"></div>
                    <div class="legend-label">
                        <span>${item.label}</span>
                        <span class="legend-value">${percentage}%</span>
                    </div>
                `;
                legend.appendChild(legendItem);
            });
        }

        // Initial render for orders table
        document.addEventListener('DOMContentLoaded', function () {
            if (document.getElementById("ordersTableBody")) {
                renderOrders("all");
            }
            // Draw pie chart if canvas exists
            if (document.getElementById("pieChart")) {
                drawPieChart();
            }
        });
        // --- Customers Panel Logic ---
        const customersData = [
            {
                id: "#CUST-001",
                name: "Juan Dela Cruz",
                email: "juan@example.com",
                contact: "0917-123-4567",
                address: "Brgy. San Isidro, Makati",
                type: "Regular",
                credit: 1200.5,
                creditLimit: 5000,
                purchases: [
                    { id: "#ORD-1023", date: "2026-01-10", amount: 5230.0 }
                ],
                status: "Active",
            },
            {
                id: "#CUST-002",
                name: "Maria Santos",
                email: "maria@example.com",
                contact: "0922-765-4321",
                address: "Brgy. Poblacion, Pasig",
                type: "Walk-in",
                credit: 0,
                creditLimit: 0,
                purchases: [
                    { id: "#ORD-1019", date: "2025-12-22", amount: 320.0 }
                ],
                status: "Pending",
            },
            {
                id: "#CUST-003",
                name: "Pedro Garcia",
                email: "pedro@example.com",
                contact: "0933-555-1212",
                address: "Brgy. Malinis, Quezon City",
                type: "Regular",
                credit: 3500.75,
                creditLimit: 3000,
                purchases: [],
                status: "Inactive",
            },
        ];

        let filteredData = [...customersData];
        let editCustomerId = null;
        let setCreditCustomerId = null;

        function formatPeso(num) {
            return '₱' + Number(num || 0).toLocaleString('en-PH', { minimumFractionDigits: 2, maximumFractionDigits: 2 });
        }

        function generateCustomerId() {
            const n = customersData.length + 1;
            return '#CUST-' + String(1000 + n).slice(1 + String(n).length - 1 ? 1 : 0) + (1000 + n).toString().slice(-3);
        }

        function renderTable(data) {
            const tableBody = document.getElementById("customerTable");
            if (!tableBody) return;
            tableBody.innerHTML = "";
            if (data.length === 0) {
                tableBody.innerHTML = '<tr><td colspan="9" style="text-align: center; padding: 20px; color: #8899aa;">No customers found</td></tr>';
                return;
            }
            data.forEach((customer) => {
                const statusColor = customer.status === 'Active' ? '#10b981' : customer.status === 'Pending' ? '#f59e0b' : '#ef4444';
                const creditOver = customer.creditLimit > 0 && customer.credit > customer.creditLimit;
                const tr = document.createElement('tr');
                tr.innerHTML = `
                    <td>${customer.id}</td>
                    <td>${customer.name}</td>
                    <td>${customer.contact}</td>
                    <td>${customer.email || '-'}</td>
                    <td>${customer.type || '-'}</td>
                    <td style="font-weight:600; color:${creditOver ? '#b91c1c' : '#d1d5db'}">${formatPeso(customer.credit)}</td>
                    <td>${formatPeso(customer.creditLimit)}</td>
                    <td style="color:${statusColor}; font-weight:600;">${customer.status}</td>
                    <td>
                        <button class="btn btn-secondary" onclick="openEditCustomerModal('${customer.id}')">Edit</button>
                        <button class="btn btn-info" onclick="openPurchaseHistoryModal('${customer.id}')">History</button>
                        <button class="btn btn-warning" onclick="openSetCreditModal('${customer.id}')">Set Limit</button>
                    </td>
                `;
                tableBody.appendChild(tr);
            });
        }

        // Add / Edit modals handlers
        function openAddCustomerModal() {
            editCustomerId = null;
            document.getElementById('addEditTitle').textContent = 'Add Customer';
            document.getElementById('custName').value = '';
            document.getElementById('custEmail').value = '';
            document.getElementById('custContact').value = '';
            document.getElementById('custAddress').value = '';
            document.getElementById('custType').value = 'Walk-in';
            document.getElementById('custCreditLimit').value = 0;
            document.getElementById('addEditCustomerModal').classList.add('active');
        }

        function openEditCustomerModal(id) {
            const c = customersData.find(x => x.id === id);
            if (!c) return alert('Customer not found');
            editCustomerId = id;
            document.getElementById('addEditTitle').textContent = 'Edit Customer';
            document.getElementById('custName').value = c.name || '';
            document.getElementById('custEmail').value = c.email || '';
            document.getElementById('custContact').value = c.contact || '';
            document.getElementById('custAddress').value = c.address || '';
            document.getElementById('custType').value = c.type || 'Walk-in';
            document.getElementById('custCreditLimit').value = c.creditLimit || 0;
            document.getElementById('addEditCustomerModal').classList.add('active');
        }

        function closeAddEditCustomerModal() {
            document.getElementById('addEditCustomerModal').classList.remove('active');
        }

        function submitAddEditCustomer() {
            const name = document.getElementById('custName').value.trim();
            const email = document.getElementById('custEmail').value.trim();
            const contact = document.getElementById('custContact').value.trim();
            const address = document.getElementById('custAddress').value.trim();
            const type = document.getElementById('custType').value;
            const creditLimit = parseFloat(document.getElementById('custCreditLimit').value) || 0;
            if (!name) return alert('Name is required');
            if (editCustomerId) {
                const c = customersData.find(x => x.id === editCustomerId);
                if (!c) return alert('Customer not found');
                c.name = name; c.email = email; c.contact = contact; c.address = address; c.type = type; c.creditLimit = creditLimit;
            } else {
                const newId = '#CUST-' + String(Math.floor(1000 + Math.random() * 8999));
                customersData.push({ id: newId, name, email, contact, address, type, credit: 0, creditLimit, purchases: [], status: 'Active' });
            }
            renderTable(customersData);
            closeAddEditCustomerModal();
        }

        // Purchase history modal
        function openPurchaseHistoryModal(id) {
            const c = customersData.find(x => x.id === id);
            if (!c) return alert('Customer not found');
            const container = document.getElementById('purchaseHistoryContent');
            if (!container) return;
            if (!c.purchases || c.purchases.length === 0) {
                container.innerHTML = '<p style="color:#9aa4b2;">No purchases found for this customer.</p>';
            } else {
                let html = '<table style="width:100%; border-collapse:collapse;"><thead><tr><th>Order ID</th><th>Date</th><th style="text-align:right;">Amount</th></tr></thead><tbody>';
                c.purchases.forEach(p => {
                    html += `<tr><td>${p.id}</td><td>${p.date}</td><td style="text-align:right;">${formatPeso(p.amount)}</td></tr>`;
                });
                html += '</tbody></table>';
                const total = c.purchases.reduce((s, p) => s + (p.amount || 0), 0);
                html += `<div style="margin-top:12px; text-align:right; font-weight:600;">Total: ${formatPeso(total)}</div>`;
                container.innerHTML = html;
            }
            document.getElementById('purchaseHistoryModal').classList.add('active');
        }

        function closePurchaseHistoryModal() {
            document.getElementById('purchaseHistoryModal').classList.remove('active');
        }

        // Set credit limit
        function openSetCreditModal(id) {
            setCreditCustomerId = id;
            const c = customersData.find(x => x.id === id);
            if (!c) return alert('Customer not found');
            document.getElementById('creditLimitInput').value = c.creditLimit || 0;
            document.getElementById('setCreditModal').classList.add('active');
        }

        function closeSetCreditModal() {
            document.getElementById('setCreditModal').classList.remove('active');
        }

        function submitSetCredit() {
            const val = parseFloat(document.getElementById('creditLimitInput').value) || 0;
            const c = customersData.find(x => x.id === setCreditCustomerId);
            if (!c) return alert('Customer not found');
            c.creditLimit = val;
            renderTable(customersData);
            closeSetCreditModal();
        }

        // Search & filters
        document.addEventListener('DOMContentLoaded', function () {
            const searchInput = document.getElementById("searchInput");
            const statusFilter = document.getElementById("statusFilter");
            const typeFilter = document.getElementById("typeFilter");
            function applyFilters() {
                const searchTerm = (searchInput && searchInput.value || '').toLowerCase();
                const statusVal = (statusFilter && statusFilter.value) || '';
                const typeVal = (typeFilter && typeFilter.value) || '';
                filteredData = customersData.filter(c => {
                    const matchesSearch = [c.id, c.name, c.contact, c.email, c.address, c.type].map(v => (v || '').toString().toLowerCase()).some(s => s.includes(searchTerm));
                    const matchesStatus = statusVal === '' || c.status === statusVal;
                    const matchesType = typeVal === '' || c.type === typeVal;
                    return matchesSearch && matchesStatus && matchesType;
                });
                renderTable(filteredData);
            }
            if (searchInput) searchInput.addEventListener('keyup', applyFilters);
            if (statusFilter) statusFilter.addEventListener('change', applyFilters);
            if (typeFilter) typeFilter.addEventListener('change', applyFilters);

            // Initial render
            if (document.getElementById("customerTable")) {
                renderTable(customersData);
            }
        });

        // ===== NAVIGATION SYSTEM =====
        function navigateTo(section) {
            console.log('=== navigateTo called ===');
            console.log('Target section:', section);

            // Step 1: Hide ALL sections
            var sections = ['homeSection', 'customersSection', 'ordersSection', 'inventorySection', 'settingsSection', 'salesSection', 'reportsSection', 'staffSection', 'deliverySection', 'messageSection', 'topproductSection'];
            sections.forEach(function (id) {
                var el = document.getElementById(id);
                if (el) {
                    el.style.display = 'none';
                    el.style.visibility = 'visible'; // Reset visibility
                    el.style.opacity = '1'; // Reset opacity
                    el.style.zIndex = 'auto'; // Reset z-index
                    console.log('✓ Hidden:', id);
                }
            });

            // Step 2: Map section name to element ID
            var sectionMap = {
                'home': 'homeSection',
                'customers': 'customersSection',
                'orders': 'ordersSection',
                'inventory': 'inventorySection',
                'settings': 'settingsSection',
                'sales': 'salesSection',
                'reports': 'reportsSection',
                'staff': 'staffSection',
                'delivery': 'deliverySection',
                'message': 'messageSection',
                'topproduct': 'topproductSection'
            };

            // Step 3: Show target section
            var targetId = sectionMap[section];
            if (targetId) {
                var el = document.getElementById(targetId);
                if (el) {
                    el.style.display = 'block';
                    el.style.visibility = 'visible';
                    el.style.opacity = '1';
                    el.style.zIndex = '100';
                    console.log('✓ SHOWN:', targetId);
                    console.log('Display style:', el.style.display);
                } else {
                    console.error('ERROR: Element not found for ID:', targetId);
                }
            } else {
                console.error('ERROR: Unknown section name:', section);
            }

            // Step 4: Update active menu
            document.querySelectorAll('.menu a').forEach(function (link) {
                link.classList.remove('active');
            });
            var activeLink = document.querySelector('.menu a[href="#' + section + '"]');
            if (activeLink) {
                activeLink.classList.add('active');
                console.log('✓ Menu updated for:', section);
            }

            // Step 5: Close popup
            const popup = document.getElementById('menuPopup');
            if (popup) popup.classList.remove('active');

            console.log('=== Navigation complete ===\n');
        }

        // Close menu popup after navigation
        const popup = document.getElementById('menuPopup');
        if (popup) popup.classList.remove('active');

        function toggleMenuPopup() {
            const popup = document.getElementById('menuPopup');
            popup.classList.toggle('active');
        }
        function toggleNotification() {
            const notification = document.getElementById('notificationPopup');
            notification.classList.toggle('show');
        }
        // Close notification when clicking outside
        document.addEventListener('click', function (e) {
            const notification = document.getElementById('notificationPopup');
            const bellIcon = document.querySelector('.icon-container i');
            if (
                notification &&
                !notification.contains(e.target) &&
                !bellIcon.contains(e.target)
            ) {
                notification.classList.remove('show');
            }
        });
        function logout(e) {
            if (e) e.preventDefault();
            if (confirm('Are you sure you want to logout? Any unsaved changes will be lost.')) {
                alert('Logged out successfully! Redirecting to login page...');
                window.location.href = 'login.html';
            }
        }

        // --- Inventory Panel Logic ---
        let currentInventoryFilter = "all";
        function filterInventory(filterType) {
            currentInventoryFilter = filterType;
            updateInventoryFilterButtons();
            updateInventoryTableDisplay();
        }
        function updateInventoryFilterButtons() {
            document.querySelectorAll("#inventorySection .filter-btn").forEach((btn) => {
                btn.classList.remove("active");
            });
            // Find the correct button - need to handle both old and new button formats
            const buttons = document.querySelectorAll("#inventorySection .filter-btn");
            buttons.forEach(btn => {
                const onclick = btn.getAttribute("onclick");
                if (onclick && onclick.includes(`filterInventory('${currentInventoryFilter}')`)) {
                    btn.classList.add("active");
                }
            });
        }
        function updateInventoryTableDisplay() {
            const rows = document.querySelectorAll("#inventoryTable tr");
            const searchTerm = document
                .getElementById("searchInputInventory")
                .value.toLowerCase();
            rows.forEach((row) => {
                const rowType = row.getAttribute("data-type");
                const rowText = row.textContent.toLowerCase();
                let shouldShow = true;
                // Apply filter
                if (currentInventoryFilter === "in" && rowType !== "in") {
                    shouldShow = false;
                } else if (currentInventoryFilter === "low" && rowType !== "low") {
                    shouldShow = false;
                } else if (currentInventoryFilter === "out" && rowType !== "out") {
                    shouldShow = false;
                }
                // Apply search
                if (shouldShow && searchTerm && !rowText.includes(searchTerm)) {
                    shouldShow = false;
                }
                row.style.display = shouldShow ? "" : "none";
            });
        }

        // Stock Management Functions
        function openAddStockModal() {
            document.getElementById("stockModal").classList.add("active");
            // Reset form
            document.getElementById("stockModal_productName").textContent = "Select a product...";
            document.getElementById("stockModal_productId").textContent = "";
            document.getElementById("stockModal_currentStock").value = "";
            document.getElementById("stockModal_quantity").value = "";
            document.getElementById("stockModal_supplier").value = "";
            document.getElementById("stockModal_invoiceNo").value = "";
            document.getElementById("stockModal_purchaseDate").value = "";
            document.getElementById("stockModal_notes").value = "";
        }

        function openUpdateStockModal(productId, productName, currentStock) {
            document.getElementById("stockModal").classList.add("active");
            document.getElementById("stockModal_productId").textContent = productId;
            document.getElementById("stockModal_productName").textContent = productName;
            document.getElementById("stockModal_currentStock").value = currentStock;
            document.getElementById("stockModal_quantity").value = "";
            document.getElementById("stockModal_supplier").value = "";
            document.getElementById("stockModal_invoiceNo").value = "";
            document.getElementById("stockModal_purchaseDate").value = new Date().toISOString().split('T')[0];
            document.getElementById("stockModal_notes").value = "";

            // Add event listener for quantity changes
            document.getElementById("stockModal_quantity").addEventListener("input", updateNewStockTotal);
        }

        function updateNewStockTotal() {
            const currentStock = parseInt(document.getElementById("stockModal_currentStock").value) || 0;
            const quantityToAdd = parseInt(document.getElementById("stockModal_quantity").value) || 0;
            const newTotal = currentStock + quantityToAdd;
            document.getElementById("stockModal_newTotal").textContent = newTotal;
        }

        function closeStockModal() {
            document.getElementById("stockModal").classList.remove("active");
        }

        function saveStockUpdate() {
            const productId = document.getElementById("stockModal_productId").textContent;
            const quantity = parseInt(document.getElementById("stockModal_quantity").value);
            const supplier = document.getElementById("stockModal_supplier").value;
            const invoiceNo = document.getElementById("stockModal_invoiceNo").value;
            const notes = document.getElementById("stockModal_notes").value;

            if (!quantity || quantity <= 0) {
                alert("Please enter a valid quantity");
                return;
            }

            // Log the transaction
            const currentStock = parseInt(document.getElementById("stockModal_currentStock").value);
            const newStock = currentStock + quantity;

            // Update the table
            const rows = document.querySelectorAll("#inventoryTable tr");
            rows.forEach(row => {
                if (row.querySelector("td:first-child")?.textContent === productId) {
                    row.querySelector("td:nth-child(5)").textContent = newStock;
                }
            });

            // Show success message
            alert(`Stock updated successfully!\n\nProduct: ${document.getElementById("stockModal_productName").textContent}\nPrevious Stock: ${currentStock}\nAdded: ${quantity}\nNew Stock: ${newStock}${supplier ? '\nSupplier: ' + supplier : ''}${invoiceNo ? '\nInvoice: ' + invoiceNo : ''}`);

            closeStockModal();
        }

        // Analytics & Reports Functions
        function openSalesReport() {
            alert("Sales Report - Monthly Overview\n\n" +
                "Total Sales (This Month): ₱125,450.00\n" +
                "Orders Processed: 32\n" +
                "Average Order Value: ₱3,850.00\n" +
                "Top Product: Steel Nails\n" +
                "Product Sold: 1,200 units\n" +
                "Trend: +12.5% from last month\n\n" +
                "Detailed PDF report will be generated and downloaded.");
        }

        function openCustomerAnalytics() {
            alert("Customer Analytics & Statistics\n\n" +
                "Total Customers: 145\n" +
                "Repeat Customers: 58 (40%)\n" +
                "New Customers (Last 7 Days): 12\n" +
                "Customer Satisfaction: 4.8/5.0\n" +
                "Average Customer Lifetime Value: ₱18,500\n" +
                "Top Customer Segment: Construction Contractors\n\n" +
                "Complete customer analytics dashboard loading...");
        }

        function openStockAlert() {
            alert("Inventory Status Alerts\n\n" +
                "✓ In Stock: 25 Items\n" +
                "⚠ Low Stock: 8 Items\n" +
                "✗ Out of Stock: 3 Items\n\n" +
                "Items Requiring Attention:\n" +
                "• Latex Paint - Out of Stock\n" +
                "• Wood Stain - Out of Stock\n" +
                "• Electrical Wiring - Low Stock (15 units)\n\n" +
                "Action Required: Restock critical items");
        }

        // Add search input listener for inventory
        document.addEventListener('DOMContentLoaded', function () {
            const searchInputInventory = document.getElementById("searchInputInventory");
            if (searchInputInventory) {
                searchInputInventory.addEventListener("keyup", updateInventoryTableDisplay);
            }

            // Initialize quantity calculator
            const quantityInput = document.getElementById("stockModal_quantity");
            if (quantityInput) {
                quantityInput.addEventListener("input", updateNewStockTotal);
            }
        });

        // Close modal when clicking outside of it
        document.addEventListener('click', function (event) {
            const stockModal = document.getElementById("stockModal");
            if (event.target === stockModal) {
                closeStockModal();
            }
        });

        // --- Settings Panel Logic ---
        // Show/Hide Settings Sections
        function showSection(sectionId) {
            // Hide all panels
            document.querySelectorAll('.settings-panel').forEach(panel => {
                panel.classList.remove('active');
            });

            // Remove active class from all nav items
            document.querySelectorAll('.settings-nav-item').forEach(item => {
                item.classList.remove('active');
            });

            // Show selected panel
            const sectionElement = document.getElementById(sectionId + '-section');
            if (sectionElement) {
                sectionElement.classList.add('active');
            }

            // Add active class to clicked nav item
            event.target.closest('.settings-nav-item').classList.add('active');
        }

        // Account Settings Functions
        function saveAccountSettings() {
            const fullName = document.getElementById('fullName').value;
            const email = document.getElementById('email').value;
            const phone = document.getElementById('phone').value;

            if (!fullName || !email || !phone) {
                alert('Please fill in all required fields');
                return;
            }

            // Simulate saving
            localStorage.setItem('accountSettings', JSON.stringify({
                fullName: fullName,
                email: email,
                phone: phone,
                department: document.getElementById('department').value,
                jobtitle: document.getElementById('jobtitle').value,
                bio: document.getElementById('bio').value
            }));

            alert('Account settings saved successfully!');
        }

        function resetAccountSettings() {
            document.getElementById('fullName').value = 'Admin User';
            document.getElementById('email').value = 'admin@paduahardware.com';
            document.getElementById('phone').value = '+63 999 123 4567';
            document.getElementById('department').value = 'admin';
            document.getElementById('jobtitle').value = 'System Administrator';
            document.getElementById('bio').value = 'Experienced IT professional managing Padua Hardware\'s systems and operations.';
        }

        // Change Password Functions
        function changePassword() {
            const currentPassword = document.getElementById('currentPassword').value;
            const newPassword = document.getElementById('newPassword').value;
            const confirmPassword = document.getElementById('confirmPassword').value;

            if (!currentPassword || !newPassword || !confirmPassword) {
                alert('Please fill in all password fields');
                return;
            }

            if (newPassword !== confirmPassword) {
                alert('New passwords do not match');
                return;
            }

            if (newPassword.length < 8) {
                alert('Password must be at least 8 characters long');
                return;
            }

            // Simulate password change
            const passwordSuccess = document.getElementById('passwordSuccess');
            passwordSuccess.classList.add('show');
            resetPasswordForm();

            setTimeout(() => {
                passwordSuccess.classList.remove('show');
            }, 3000);
        }

        function resetPasswordForm() {
            document.getElementById('currentPassword').value = '';
            document.getElementById('newPassword').value = '';
            document.getElementById('confirmPassword').value = '';
        }

        // Notification Settings Functions
        function saveNotificationSettings() {
            const settings = {
                newOrders: document.querySelectorAll('#notifications-section .toggle-switch')[0].querySelector('input').checked,
                paymentReceived: document.querySelectorAll('#notifications-section .toggle-switch')[1].querySelector('input').checked,
                lowStockAlerts: document.querySelectorAll('#notifications-section .toggle-switch')[2].querySelector('input').checked,
                deliveryUpdates: document.querySelectorAll('#notifications-section .toggle-switch')[3].querySelector('input').checked,
                systemMessages: document.querySelectorAll('#notifications-section .toggle-switch')[4].querySelector('input').checked,
                importantUpdates: document.querySelectorAll('#notifications-section .toggle-switch')[5].querySelector('input').checked,
                marketingEmails: document.querySelectorAll('#notifications-section .toggle-switch')[6].querySelector('input').checked,
                frequency: document.getElementById('frequency').value
            };

            localStorage.setItem('notificationSettings', JSON.stringify(settings));

            const notificationSuccess = document.getElementById('notificationSuccess');
            notificationSuccess.classList.add('show');

            setTimeout(() => {
                notificationSuccess.classList.remove('show');
            }, 3000);
        }

        // Preferences Functions
        function savePreferences() {
            const preferences = {
                theme: document.getElementById('theme').value,
                language: document.getElementById('language').value,
                compactMode: document.querySelectorAll('#preferences-section .toggle-switch')[0].querySelector('input').checked,
                animationEffects: document.querySelectorAll('#preferences-section .toggle-switch')[1].querySelector('input').checked,
                sidebarDisplay: document.getElementById('sidebarDisplay').value,
                showCharts: document.querySelectorAll('#preferences-section .toggle-switch')[2].querySelector('input').checked,
                showStatistics: document.querySelectorAll('#preferences-section .toggle-switch')[3].querySelector('input').checked,
                itemsPerPage: document.getElementById('itemsPerPage').value
            };

            localStorage.setItem('userPreferences', JSON.stringify(preferences));

            const preferencesSuccess = document.getElementById('preferencesSuccess');
            preferencesSuccess.classList.add('show');

            setTimeout(() => {
                preferencesSuccess.classList.remove('show');
            }, 3000);
        }

        // System Settings Functions
        function exportData() {
            alert('Exporting database... This will generate a backup file for download.');
            // Simulate export
            console.log('Database exported successfully');
        }

        function backupData() {
            alert('Creating backup of your data...');
            localStorage.setItem('lastBackup', new Date().toISOString());
        }

        function syncData() {
            alert('Syncing data with server...');
            // Simulate sync
            setTimeout(() => {
                alert('Data synchronized successfully');
            }, 2000);
        }

        function saveSystemSettings() {
            const systemSuccess = document.getElementById('systemSuccess');
            systemSuccess.classList.add('show');

            setTimeout(() => {
                systemSuccess.classList.remove('show');
            }, 3000);
        }

        function clearCache() {
            if (confirm('Are you sure you want to clear the cache? This cannot be undone.')) {
                localStorage.clear();
                alert('Cache cleared successfully!');
                location.reload();
            }
        }

        function resetSystem() {
            if (confirm('Are you sure you want to reset the system to default settings? This action cannot be undone.')) {
                alert('System reset to default settings. Reloading page...');
                localStorage.clear();
                location.reload();
            }
        }
    </script>

    <script>
        // Settings persistence (localStorage-backed)
        const SETTINGS_KEY = 'padua_settings_v1';

        function loadSettings() {
            let s = {};
            try { s = JSON.parse(localStorage.getItem(SETTINGS_KEY)) || {}; } catch (e) { s = {}; }

            // Helper to set value if element exists
            const set = (id, val) => { const el = document.getElementById(id); if (!el) return; if (el.type === 'checkbox') el.checked = !!val; else el.value = val === undefined ? el.value : val; };

            set('settings_business_name', s.business_name || 'Padua Hardware');
            set('settings_business_address', s.business_address || '');
            set('settings_business_contacts', s.business_contacts || '');
            set('settings_business_email', s.business_email || '');
            set('settings_business_hours', s.business_hours || '');
            set('settings_business_tin', s.business_tin || '');
            set('settings_business_reg', s.business_reg || '');

            set('settings_currency', s.currency || 'PHP');
            set('settings_date_format', s.date_format || 'MM/DD/YYYY');
            set('settings_time_format', s.time_format || '12');
            set('settings_timezone', s.timezone || 'Asia/Manila');
            set('settings_language', s.language || 'en');
            set('settings_items_per_page', s.items_per_page || 25);

            set('settings_vat_enabled', s.vat_enabled || false);
            set('settings_vat_rate', s.vat_rate || 12);
            set('settings_tax_inclusive', s.tax_inclusive || 'exclusive');
            set('settings_senior_discount', s.senior_discount || 20);
            set('settings_pwd_discount', s.pwd_discount || 20);

            // payment methods
            document.querySelectorAll('.settings_payment_method').forEach(el => { el.checked = (s.payment_methods || ['Cash', 'GCash']).includes(el.value); });

            set('settings_invoice_prefix', s.invoice_prefix || 'INV-');
            set('settings_invoice_start', s.invoice_start || 1);
            set('settings_invoice_footer', s.invoice_footer || '');

            set('settings_low_stock_threshold', s.low_stock_threshold || 20);
            set('settings_stock_tracking', s.stock_tracking || true);
            set('settings_auto_deduct', s.auto_deduct || true);
            set('settings_allow_negative', s.allow_negative || false);
            set('settings_stock_unit', s.stock_unit || 'pcs');

            set('settings_pwd_min_length', s.pwd_min_length || 8);
            set('settings_pwd_expire', s.pwd_expire || 90);
            set('settings_auto_logout', s.auto_logout || 30);
            set('settings_max_login_attempts', s.max_login_attempts || 5);
            set('settings_2fa', s.two_factor || false);

            set('settings_smtp_server', s.smtp_server || '');
            set('settings_notify_email', s.notify_email || true);
            set('settings_notify_sms', s.notify_sms || false);
            set('settings_lowstock_recipients', s.lowstock_recipients || '');

            set('settings_session_timeout', s.session_timeout || 30);
            set('settings_ip_whitelist', s.ip_whitelist || '');
            set('settings_audit_retention', s.audit_retention || 365);

            set('settings_backup_schedule', s.backup_schedule || 'daily');
            set('settings_backup_keep', s.backup_keep || 7);

            set('settings_report_range', s.report_range || 30);
            set('settings_report_formats', s.report_formats || 'PDF, CSV');
            set('settings_report_logo', s.report_logo || true);

            set('settings_color_scheme', s.color_scheme || 'dark');
            set('settings_sidebar_pos', s.sidebar_pos || 'left');
            set('settings_custom_css', s.custom_css || '');

            set('settings_custom_customer_fields', s.custom_customer_fields || '');
            set('settings_custom_product_fields', s.custom_product_fields || '');
            set('settings_custom_order_fields', s.custom_order_fields || '');

            set('settings_terms_of_service', s.terms_of_service || '');
            set('settings_privacy_policy', s.privacy_policy || '');
            set('settings_return_policy', s.return_policy || '');
        }

        function saveSettings() {
            const s = {};
            const get = id => document.getElementById(id) ? (document.getElementById(id).type === 'checkbox' ? document.getElementById(id).checked : document.getElementById(id).value) : null;
            s.business_name = get('settings_business_name');
            s.business_address = get('settings_business_address');
            s.business_contacts = get('settings_business_contacts');
            s.business_email = get('settings_business_email');
            s.business_hours = get('settings_business_hours');
            s.business_tin = get('settings_business_tin');
            s.business_reg = get('settings_business_reg');

            s.currency = get('settings_currency');
            s.date_format = get('settings_date_format');
            s.time_format = get('settings_time_format');
            s.timezone = get('settings_timezone');
            s.language = get('settings_language');
            s.items_per_page = Number(get('settings_items_per_page')) || 25;

            s.vat_enabled = !!get('settings_vat_enabled');
            s.vat_rate = Number(get('settings_vat_rate')) || 0;
            s.tax_inclusive = get('settings_tax_inclusive');
            s.senior_discount = Number(get('settings_senior_discount')) || 0;
            s.pwd_discount = Number(get('settings_pwd_discount')) || 0;

            s.payment_methods = Array.from(document.querySelectorAll('.settings_payment_method:checked')).map(i => i.value);

            s.invoice_prefix = get('settings_invoice_prefix');
            s.invoice_start = Number(get('settings_invoice_start')) || 1;
            s.invoice_footer = get('settings_invoice_footer');

            s.low_stock_threshold = Number(get('settings_low_stock_threshold')) || 20;
            s.stock_tracking = !!get('settings_stock_tracking');
            s.auto_deduct = !!get('settings_auto_deduct');
            s.allow_negative = !!get('settings_allow_negative');
            s.stock_unit = get('settings_stock_unit');

            s.pwd_min_length = Number(get('settings_pwd_min_length')) || 8;
            s.pwd_expire = Number(get('settings_pwd_expire')) || 90;
            s.auto_logout = Number(get('settings_auto_logout')) || 30;
            s.max_login_attempts = Number(get('settings_max_login_attempts')) || 5;
            s.two_factor = !!get('settings_2fa');

            s.smtp_server = get('settings_smtp_server');
            s.notify_email = !!get('settings_notify_email');
            s.notify_sms = !!get('settings_notify_sms');
            s.lowstock_recipients = get('settings_lowstock_recipients');

            s.session_timeout = Number(get('settings_session_timeout')) || 30;
            s.ip_whitelist = get('settings_ip_whitelist');
            s.audit_retention = Number(get('settings_audit_retention')) || 365;

            s.backup_schedule = get('settings_backup_schedule');
            s.backup_keep = Number(get('settings_backup_keep')) || 7;

            s.report_range = Number(get('settings_report_range')) || 30;
            s.report_formats = get('settings_report_formats');
            s.report_logo = !!get('settings_report_logo');

            s.color_scheme = get('settings_color_scheme');
            s.sidebar_pos = get('settings_sidebar_pos');
            s.custom_css = get('settings_custom_css');

            s.custom_customer_fields = get('settings_custom_customer_fields');
            s.custom_product_fields = get('settings_custom_product_fields');
            s.custom_order_fields = get('settings_custom_order_fields');

            s.terms_of_service = get('settings_terms_of_service');
            s.privacy_policy = get('settings_privacy_policy');
            s.return_policy = get('settings_return_policy');

            localStorage.setItem(SETTINGS_KEY, JSON.stringify(s));
            alert('Settings saved locally (demo).');
        }

        function resetSettings() {
            if (!confirm('Reset settings to defaults?')) return;
            localStorage.removeItem(SETTINGS_KEY);
            loadSettings();
        }

        // Small helpers
        function optimizeDatabase() { alert('Optimize database: demo action'); }

        // Sidebar navigation for settings
        function showSection(sectionId) {
            document.querySelectorAll('.settings-nav .settings-nav-item').forEach(n => n.classList.remove('active'));
            document.querySelectorAll('.settings-content .settings-panel').forEach(p => p.classList.remove('active'));
            // mark nav
            const nav = Array.from(document.querySelectorAll('.settings-nav .settings-nav-item')).find(el => el.textContent.toLowerCase().includes(sectionId.replace(/(section|settings)/g, '').replace(/-/g, ' ')));
            // fallback: match by onclick target
            document.querySelectorAll('.settings-nav .settings-nav-item').forEach(el => { if (el.getAttribute('onclick') && el.getAttribute('onclick').includes(`showSection('${sectionId}')`)) el.classList.add('active'); });
            const panel = document.getElementById(sectionId + '-section');
            if (panel) panel.classList.add('active');
        }

        document.addEventListener('DOMContentLoaded', function () { setTimeout(loadSettings, 50); });
    </script>
    <script>
        // Home dashboard: compute KPIs and render charts (uses existing data arrays)
        function initHomeDashboard() {
            try {
                // KPIs
                const todayStr = new Date().toISOString().slice(0, 10);
                let salesToday = 0, salesThisWeek = 0, salesThisMonth = 0, totalRevenue = 0;
                if (typeof stm_transactions !== 'undefined') {
                    const now = new Date();
                    stm_transactions.forEach(t => {
                        const amt = Number(t.amount) || 0;
                        totalRevenue += amt;
                        const td = new Date(t.date);
                        const diffDays = (now - td) / (1000 * 60 * 60 * 24);
                        if ((t.date || '') === todayStr) salesToday += amt;
                        if (diffDays < 7) salesThisWeek += amt;
                        const txMonth = new Date(t.date).getMonth();
                        if (txMonth === now.getMonth() && new Date(t.date).getFullYear() === now.getFullYear()) salesThisMonth += amt;
                    });
                }

                // Customers
                const totalCustomers = (typeof customersData !== 'undefined') ? customersData.length : 0;

                // Orders
                let pendingOrders = 0, completedOrders = 0, canceledOrders = 0;
                if (typeof ordersData !== 'undefined') {
                    ordersData.forEach(o => {
                        const s = (o.status || '').toLowerCase();
                        if (s.includes('pending')) pendingOrders++;
                        else if (s.includes('approve') || s.includes('completed') || s.includes('approved')) completedOrders++;
                        else if (s.includes('reject') || s.includes('cancel')) canceledOrders++;
                    });
                }

                // Low stock count (scan inventory table)
                let lowStockCount = 0;
                document.querySelectorAll('#inventoryTable tr').forEach(row => {
                    const stockCell = row.querySelector('td:nth-child(5)');
                    if (!stockCell) return;
                    const val = parseInt(stockCell.textContent.replace(/[^0-9\-]/g, '')) || 0;
                    if (val === 0 || val <= 20) lowStockCount++;
                });

                // Update DOM KPIs (if elements exist)
                const setText = (id, v) => { const el = document.getElementById(id); if (el) el.textContent = v; };
                setText('totalSalesToday', '₱' + salesToday.toLocaleString());
                setText('totalSalesMonth', '₱' + salesThisMonth.toLocaleString());
                setText('totalCustomers', totalCustomers);
                setText('pendingOrders', pendingOrders);
                setText('lowStockItems', lowStockCount);
                setText('totalRevenue', '₱' + totalRevenue.toLocaleString());

                // Charts (Chart.js)
                // Sales chart - last 14 days
                if (document.getElementById('salesChart') && typeof Chart !== 'undefined') {
                    const labels = [];
                    const dataMap = {};
                    for (let i = 13; i >= 0; i--) {
                        const d = new Date(); d.setDate(d.getDate() - i);
                        const k = d.toISOString().slice(0, 10);
                        labels.push(k);
                        dataMap[k] = 0;
                    }
                    if (typeof stm_transactions !== 'undefined') {
                        stm_transactions.forEach(t => {
                            const k = (t.date || '').slice(0, 10);
                            if (k in dataMap) dataMap[k] += Number(t.amount) || 0;
                        });
                    }
                    const dataSales = labels.map(l => dataMap[l]);
                    const ctxSales = document.getElementById('salesChart').getContext('2d');
                    new Chart(ctxSales, {
                        type: 'line',
                        data: { labels, datasets: [{ label: 'Sales (₱)', data: dataSales, borderColor: '#4da6d6', backgroundColor: 'rgba(77,166,214,0.12)', fill: true, tension: 0.25 }] },
                        options: { responsive: true, plugins: { legend: { display: false } }, scales: { x: { display: true }, y: { beginAtZero: true } } }
                    });
                }

                // Top products chart (bar) - sample / derived from Top Products table if present
                if (document.getElementById('topProductsChart') && typeof Chart !== 'undefined') {
                    // Try to collect from Top 10 table; fallback to sample data
                    let labels = ['Cement', 'Claw Hammer', 'Steel Nails', 'Latex Paint', 'Screwdriver Set'];
                    let values = [1500, 420, 1200, 340, 230];
                    const ctxTop = document.getElementById('topProductsChart').getContext('2d');
                    new Chart(ctxTop, {
                        type: 'bar',
                        data: { labels, datasets: [{ label: 'Units Sold', data: values, backgroundColor: '#10b981' }] },
                        options: { responsive: true, plugins: { legend: { display: false } }, scales: { y: { beginAtZero: true } } }
                    });
                }

                // Revenue comparison (this month vs last month) - uses stm_transactions
                if (document.getElementById('revenueTrendChart') && typeof Chart !== 'undefined') {
                    const now = new Date();
                    const thisMonthIdx = now.getMonth();
                    const thisYear = now.getFullYear();
                    const prev = new Date(now.getFullYear(), now.getMonth() - 1, 1);
                    const prevMonthIdx = prev.getMonth();
                    let sumThis = 0, sumPrev = 0;
                    if (typeof stm_transactions !== 'undefined') {
                        stm_transactions.forEach(t => {
                            const dt = new Date(t.date);
                            if (dt.getFullYear() === thisYear && dt.getMonth() === thisMonthIdx) sumThis += Number(t.amount) || 0;
                            if (dt.getFullYear() === prev.getFullYear() && dt.getMonth() === prevMonthIdx) sumPrev += Number(t.amount) || 0;
                        });
                    }
                    const ctxRev = document.getElementById('revenueTrendChart').getContext('2d');
                    new Chart(ctxRev, {
                        type: 'bar',
                        data: { labels: ['Last Month', 'This Month'], datasets: [{ label: 'Revenue (₱)', data: [sumPrev, sumThis], backgroundColor: ['#6b7280', '#4f46e5'] }] },
                        options: { responsive: true, plugins: { legend: { display: false } }, scales: { y: { beginAtZero: true } } }
                    });
                }

                // Customer growth (sample) - simple cumulative curve using customersData length over months
                if (document.getElementById('customerGrowthChart') && typeof Chart !== 'undefined') {
                    const months = ['-5', '-4', '-3', '-2', '-1', 'Now'];
                    // generate sample growth data
                    const base = Math.max(50, totalCustomers - 20);
                    const growth = months.map((m, i) => Math.max(0, Math.round(base + (i * (totalCustomers / Math.max(1, months.length))) + (Math.random() * 8))));
                    const ctxCust = document.getElementById('customerGrowthChart').getContext('2d');
                    new Chart(ctxCust, {
                        type: 'line',
                        data: { labels: months, datasets: [{ label: 'Customers', data: growth, borderColor: '#ff7ab6', backgroundColor: 'rgba(255,122,182,0.12)', fill: true, tension: 0.25 }] },
                        options: { responsive: true, plugins: { legend: { display: false } }, scales: { y: { beginAtZero: true } } }
                    });
                }

                // Recent orders table on home (if container exists)
                const recentContainer = document.getElementById('homeRecentOrders');
                if (recentContainer && typeof ordersData !== 'undefined') {
                    const recent = ordersData.slice().sort((a, b) => (new Date(b.date) - new Date(a.date))).slice(0, 6);
                    let html = '<table style="width:100%;"><thead><tr><th>Order</th><th>Customer</th><th>Amount</th><th>Status</th></tr></thead><tbody>';
                    recent.forEach(r => { html += `<tr><td>${r.id}</td><td>${r.customer}</td><td>${r.amount}</td><td><span style="font-weight:600">${r.status}</span></td></tr>`; });
                    html += '</tbody></table>';
                    recentContainer.innerHTML = html;
                }
            } catch (err) {
                console.error('initHomeDashboard error', err);
            }
        }

        document.addEventListener('DOMContentLoaded', function () { setTimeout(initHomeDashboard, 300); });
    </script>

    <!-- Customer Database Management (CDB) Script -->
    <script>
        let cdb_customers = [];
        let cdb_currentTab = 'active';
        let cdb_archiveTargetId = null;

        function cdb_save() { localStorage.setItem('cdb_customers', JSON.stringify(cdb_customers)); }

        function cdb_load() {
            const raw = localStorage.getItem('cdb_customers');
            if (raw) {
                try { cdb_customers = JSON.parse(raw); } catch (e) { cdb_customers = []; }
            } else {
                cdb_customers = [
                    { id: 'CUST-001', name: 'Juan Dela Cruz', email: 'juan@example.com', contact: '+63 912 345 6789', type: 'Regular', address: 'Binan, Laguna', limit: 50000, credit: 0, status: 'Active', archived: false, purchases: [] },
                    { id: 'CUST-002', name: 'Maria Santos', email: 'maria@example.com', contact: '+63 917 222 3333', type: 'Walk-in', address: 'Makati', limit: 0, credit: 0, status: 'Pending', archived: false, purchases: [] },
                    { id: 'CUST-003', name: 'Pedro Garcia', email: 'pedro@example.com', contact: '+63 933 555 1212', type: 'Regular', address: 'QC', limit: 30000, credit: 5200, status: 'Active', archived: false, purchases: ['ORD-100', 'ORD-105'] }
                ];
                cdb_save();
            }
        }

        function cdb_updateStats() {
            const all = cdb_customers.length;
            const active = cdb_customers.filter(c => !c.archived && c.status === 'Active').length;
            const archived = cdb_customers.filter(c => c.archived).length;
            const pending = cdb_customers.filter(c => !c.archived && c.status === 'Pending').length;
            document.getElementById('custTotalCount').textContent = all;
            document.getElementById('custActiveCount').textContent = active;
            document.getElementById('custArchivedCount').textContent = archived;
            document.getElementById('custPendingCount').textContent = pending;
        }

        function cdb_switchTab(tab, event) {
            cdb_currentTab = tab;
            document.querySelectorAll('#customersSection .tab-btn').forEach(b => b.classList.remove('active'));
            event.target.closest('.tab-btn').classList.add('active');
            cdb_renderTable();
        }

        function cdb_renderTable() {
            const tbody = document.getElementById('cdbCustomerTable');
            if (!tbody) return;
            tbody.innerHTML = '';
            const q = (document.getElementById('cdbSearchInput') || { value: '' }).value.toLowerCase();
            const status = (document.getElementById('cdbStatusFilter') || { value: '' }).value;
            const type = (document.getElementById('cdbTypeFilter') || { value: '' }).value;

            let filtered = cdb_customers.filter(c => {
                if (cdb_currentTab === 'active' && c.archived) return false;
                if (cdb_currentTab === 'archived' && !c.archived) return false;
                if (status && c.status !== status) return false;
                if (type && c.type !== type) return false;
                if (!q) return true;
                return [c.id, c.name, c.email, c.contact].some(x => (x || '').toLowerCase().includes(q));
            });

            if (!filtered.length) {
                tbody.innerHTML = '<tr><td colspan="8" style="text-align:center; padding:20px; color:#8899aa;">No records found</td></tr>';
                return;
            }

            filtered.forEach(c => {
                const statusColor = c.status === 'Active' ? '#10b981' : c.status === 'Pending' ? '#f59e0b' : '#ef4444';
                const tr = document.createElement('tr');
                tr.innerHTML = `
                    <td><strong>${c.id}</strong></td>
                    <td>${c.name}</td>
                    <td>${c.contact || '-'}</td>
                    <td>${c.email || '-'}</td>
                    <td>${c.type || '-'}</td>
                    <td>₱${(c.credit || 0).toLocaleString()} / ₱${(c.limit || 0).toLocaleString()}</td>
                    <td style="color:${statusColor}; font-weight:600;">${c.status}</td>
                    <td style="font-size:12px; display:flex; gap:4px; flex-wrap:wrap;">
                        <button class="btn" onclick="cdb_viewProfile('${c.id}')" style="padding:6px 10px;"><i class="fas fa-eye"></i></button>
                        <button class="btn" onclick="cdb_editCustomer('${c.id}')" style="padding:6px 10px;"><i class="fas fa-edit"></i></button>
                        <button class="btn" onclick="cdb_openArchiveModal('${c.id}')" style="padding:6px 10px;"><i class="fas fa-${c.archived ? 'history' : 'archive'}"></i></button>
                        <button class="btn btn-danger" onclick="cdb_deleteCustomer('${c.id}')" style="padding:6px 10px;"><i class="fas fa-trash"></i></button>
                    </td>
                `;
                tbody.appendChild(tr);
            });
        }

        function cdb_generateId() { return 'CUST-' + String(Date.now()).slice(-6); }

        function cdb_openAddCustomerModal() {
            document.getElementById('cdbAddEditTitle').textContent = 'Add New Customer';
            document.getElementById('cdbCustId').value = '';
            ['cdbCustName', 'cdbCustEmail', 'cdbCustContact', 'cdbCustAddress', 'cdbCustCreditLimit'].forEach(id => document.getElementById(id).value = '');
            document.getElementById('cdbCustType').value = 'Walk-in';
            document.getElementById('cdbCustStatus').value = 'Active';
            document.getElementById('cdbAddEditCustomerModal').classList.add('active');
        }

        function cdb_closeAddEditCustomerModal() { document.getElementById('cdbAddEditCustomerModal').classList.remove('active'); }

        function cdb_submitAddEditCustomer() {
            const name = document.getElementById('cdbCustName').value.trim();
            if (!name) return alert('Name is required');
            const id = document.getElementById('cdbCustId').value || cdb_generateId();
            const obj = {
                id, name,
                email: document.getElementById('cdbCustEmail').value.trim(),
                contact: document.getElementById('cdbCustContact').value.trim(),
                address: document.getElementById('cdbCustAddress').value.trim(),
                type: document.getElementById('cdbCustType').value,
                limit: Number(document.getElementById('cdbCustCreditLimit').value || 0),
                status: document.getElementById('cdbCustStatus').value,
                credit: 0, archived: false, purchases: []
            };
            const idx = cdb_customers.findIndex(c => c.id === id);
            if (idx >= 0) cdb_customers[idx] = Object.assign(cdb_customers[idx], obj);
            else cdb_customers.unshift(obj);
            cdb_save(); cdb_updateStats(); cdb_renderTable(); cdb_closeAddEditCustomerModal();
        }

        function cdb_editCustomer(id) {
            const c = cdb_customers.find(x => x.id === id);
            if (!c) return alert('Customer not found');
            document.getElementById('cdbAddEditTitle').textContent = 'Edit Customer';
            document.getElementById('cdbCustId').value = c.id;
            document.getElementById('cdbCustName').value = c.name || '';
            document.getElementById('cdbCustEmail').value = c.email || '';
            document.getElementById('cdbCustContact').value = c.contact || '';
            document.getElementById('cdbCustAddress').value = c.address || '';
            document.getElementById('cdbCustType').value = c.type || 'Walk-in';
            document.getElementById('cdbCustCreditLimit').value = c.limit || 0;
            document.getElementById('cdbCustStatus').value = c.status || 'Active';
            document.getElementById('cdbAddEditCustomerModal').classList.add('active');
        }

        function cdb_deleteCustomer(id) {
            if (!confirm('Are you sure you want to delete this customer permanently?')) return;
            cdb_customers = cdb_customers.filter(c => c.id !== id);
            cdb_save(); cdb_updateStats(); cdb_renderTable();
        }

        function cdb_viewProfile(id) {
            const c = cdb_customers.find(x => x.id === id);
            if (!c) return;
            const content = document.getElementById('cdbProfileContent');
            const purchases = c.purchases && c.purchases.length ? '<ul>' + c.purchases.map(p => `<li>${p}</li>`).join('') + '</ul>' : '<em>No purchases</em>';
            content.innerHTML = `
                <p><strong>ID:</strong> ${c.id}</p>
                <p><strong>Name:</strong> ${c.name}</p>
                <p><strong>Email:</strong> ${c.email || '-'}</p>
                <p><strong>Contact:</strong> ${c.contact || '-'}</p>
                <p><strong>Address:</strong> ${c.address || '-'}</p>
                <p><strong>Type:</strong> ${c.type || '-'}</p>
                <p><strong>Status:</strong> ${c.status || '-'}</p>
                <p><strong>Credit Used:</strong> ₱${(c.credit || 0).toLocaleString()}</p>
                <p><strong>Credit Limit:</strong> ₱${(c.limit || 0).toLocaleString()}</p>
                <h4 style="margin-top:15px; color:#fff;">Purchase History</h4>
                <div>${purchases}</div>
            `;
            document.getElementById('cdbProfileModal').classList.add('active');
        }

        function cdb_closeProfileModal() { document.getElementById('cdbProfileModal').classList.remove('active'); }

        function cdb_exportCSV() {
            if (!cdb_customers.length) return alert('No customers to export');
            const keys = ['id', 'name', 'contact', 'email', 'type', 'limit', 'status', 'address'];
            const rows = [keys.join(',')].concat(cdb_customers.map(c => keys.map(k => '"' + (c[k] || '') + '"').join(',')));
            const blob = new Blob([rows.join('\n')], { type: 'text/csv;charset=utf-8;' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a'); a.href = url; a.download = 'customers_' + new Date().toISOString().slice(0, 10) + '.csv'; a.click(); URL.revokeObjectURL(url);
            alert('CSV exported successfully');
        }

        function cdb_exportExcel() {
            if (!cdb_customers.length) return alert('No customers to export');
            let csv = 'ID,Name,Contact,Email,Type,Credit Limit,Status,Address\n';
            cdb_customers.forEach(c => {
                csv += `"${c.id}","${c.name}","${c.contact || ''}","${c.email || ''}","${c.type || ''}","₱${c.limit || 0}","${c.status}","${c.address || ''}"\n`;
            });
            const blob = new Blob([csv], { type: 'application/vnd.ms-excel' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a'); a.href = url; a.download = 'customers_' + new Date().toISOString().slice(0, 10) + '.xls'; a.click(); URL.revokeObjectURL(url);
            alert('Excel exported successfully');
        }

        function cdb_handleImport(e) {
            const f = e.target.files[0];
            if (!f) return;
            const reader = new FileReader();
            reader.onload = ev => {
                const text = ev.target.result;
                try {
                    if (f.name.endsWith('.json')) {
                        const imported = JSON.parse(text);
                        if (Array.isArray(imported)) cdb_customers = imported.concat(cdb_customers);
                    } else {
                        const lines = text.split(/\r?\n/).filter(Boolean);
                        const headers = lines.shift().split(',').map(h => h.replace(/^"|"$/g, ''));
                        lines.forEach(line => {
                            const cols = line.split(/,(?=(?:[^"]*"[^"]*")*[^"]*$)/).map(c => c.replace(/^"|"$/g, ''));
                            const obj = {};
                            headers.forEach((h, i) => obj[h.trim()] = cols[i] || '');
                            const id = obj.id || cdb_generateId();
                            cdb_customers.unshift({ id, name: obj.name || '', contact: obj.contact || '', email: obj.email || '', type: obj.type || 'Walk-in', address: obj.address || '', limit: Number(obj['Credit Limit'] || obj.limit || 0), credit: 0, status: obj.status || 'Active', archived: false, purchases: [] });
                        });
                    }
                    cdb_save(); cdb_updateStats(); cdb_renderTable(); alert('Import complete: ' + cdb_customers.length + ' total customers');
                } catch (err) { alert('Import failed: ' + err.message); }
            };
            reader.readAsText(f);
            e.target.value = '';
        }

        function cdb_detectDuplicates() {
            const byKey = {};
            cdb_customers.forEach(c => {
                const key = (c.email || '').toLowerCase().trim() || (c.contact || '').replace(/\s|\+|-/g, '') || c.name.toLowerCase().replace(/\s+/g, '');
                if (!key) return;
                byKey[key] = byKey[key] || []; byKey[key].push(c);
            });
            const groups = Object.values(byKey).filter(g => g.length > 1);
            const container = document.getElementById('cdbDuplicatesList');
            container.innerHTML = '';
            if (!groups.length) {
                container.innerHTML = '<div style="text-align:center; color:#10b981; padding:20px;"><i class="fas fa-check-circle"></i> No duplicates found!</div>';
                document.getElementById('cdbDuplicatesModal').classList.add('active');
                return;
            }
            groups.forEach((g, gi) => {
                const div = document.createElement('div');
                div.style.marginBottom = '15px';
                div.style.padding = '12px';
                div.style.background = 'rgba(255,255,255,0.05)';
                div.style.borderRadius = '8px';
                div.style.borderLeft = '3px solid #f59e0b';
                div.innerHTML = `<strong style="color:#f59e0b;">Group ${gi + 1} (${g.length} matches)</strong>`;
                g.forEach(c => {
                    const item = document.createElement('div');
                    item.style.display = 'flex';
                    item.style.justifyContent = 'space-between';
                    item.style.alignItems = 'center';
                    item.style.marginTop = '8px';
                    item.style.padding = '8px';
                    item.style.background = 'rgba(0,0,0,0.3)';
                    item.style.borderRadius = '6px';
                    item.innerHTML = `<div style="font-size:12px;">${c.id} • ${c.name} • ${c.email || c.contact || 'N/A'}</div><button class="btn" onclick="cdb_mergePair('${g[0].id}','${c.id}')" style="padding:6px 10px; font-size:11px;">Merge into ${g[0].id}</button>`;
                    div.appendChild(item);
                });
                container.appendChild(div);
            });
            document.getElementById('cdbDuplicatesModal').classList.add('active');
        }

        function cdb_closeDuplicatesModal() { document.getElementById('cdbDuplicatesModal').classList.remove('active'); }

        function cdb_mergePair(targetId, srcId) {
            if (targetId === srcId) return;
            if (!confirm(`Merge ${srcId} into ${targetId}? Duplicate will be removed.`)) return;
            const t = cdb_customers.find(x => x.id === targetId);
            const s = cdb_customers.find(x => x.id === srcId);
            if (!t || !s) return alert('Records not found');
            ['name', 'email', 'contact', 'address', 'type'].forEach(k => { if (!t[k] && s[k]) t[k] = s[k]; });
            t.credit = Math.max(t.credit || 0, s.credit || 0);
            t.limit = Math.max(t.limit || 0, s.limit || 0);
            t.purchases = (t.purchases || []).concat(s.purchases || []);
            cdb_customers = cdb_customers.filter(x => x.id !== srcId);
            cdb_save(); cdb_updateStats(); cdb_renderTable(); cdb_detectDuplicates();
        }

        function cdb_openArchiveModal(id) {
            const c = cdb_customers.find(x => x.id === id);
            if (!c) return;
            cdb_archiveTargetId = id;
            const isArchived = c.archived;
            document.getElementById('cdbArchiveTitle').textContent = isArchived ? 'Restore Customer' : 'Archive Customer';
            document.getElementById('cdbArchiveMsg').textContent = isArchived ? `Restore ${c.name} to active records?` : `Archive ${c.name}? This customer will be moved to the Archived tab.`;
            document.getElementById('cdbArchiveBtn').textContent = isArchived ? 'Restore' : 'Archive';
            document.getElementById('cdbArchiveModal').classList.add('active');
        }

        function cdb_closeArchiveModal() { document.getElementById('cdbArchiveModal').classList.remove('active'); }

        function cdb_confirmArchive() {
            const c = cdb_customers.find(x => x.id === cdb_archiveTargetId);
            if (!c) return alert('Customer not found');
            c.archived = !c.archived;
            cdb_save(); cdb_updateStats(); cdb_renderTable(); cdb_closeArchiveModal();
            alert(c.archived ? 'Customer archived successfully' : 'Customer restored successfully');
        }

        document.addEventListener('DOMContentLoaded', () => {
            cdb_load(); cdb_updateStats(); cdb_renderTable();
            ['cdbSearchInput', 'cdbStatusFilter', 'cdbTypeFilter'].forEach(id => {
                const el = document.getElementById(id);
                if (el) el.addEventListener('input', cdb_renderTable);
            });
        });
    </script>

    <!-- Sales & Transaction Management (STM) Script -->
    <script>
        let stm_transactions = [];
        let stm_discounts = [];
        let stm_currentView = 'transactions';
        let stm_staffMembers = ['Juan Torres', 'Maria Garcia', 'Pedro Santos', 'Ana Reyes'];

        function stm_init() {
            if (!localStorage.getItem('stm_transactions')) {
                stm_transactions = [
                    { id: 'TRX-001', date: '2026-02-10', time: '10:30', customer: 'Juan Dela Cruz', staff: 'Juan Torres', items: 5, amount: 2500, discount: 250, payment: 'Cash', status: 'Completed' },
                    { id: 'TRX-002', date: '2026-02-10', time: '11:15', customer: 'Maria Santos', staff: 'Maria Garcia', items: 3, amount: 1800, discount: 0, payment: 'Card', status: 'Completed' },
                    { id: 'TRX-003', date: '2026-02-10', time: '14:00', customer: 'Pedro Garcia', staff: 'Pedro Santos', items: 8, amount: 5200, discount: 520, payment: 'GCash', status: 'Completed' },
                    { id: 'TRX-004', date: '2026-02-09', time: '16:45', customer: 'Ana Fernandez', staff: 'Ana Reyes', items: 2, amount: 900, discount: 0, payment: 'Cash', status: 'Completed' }
                ];
                stm_discounts = [
                    { name: 'Senior Citizen', percent: 20, desc: '20% off for senior citizens with valid ID' },
                    { name: 'PWD Discount', percent: 15, desc: '15% off for persons with disabilities' },
                    { name: 'Bulk Order', percent: 10, desc: '10% off for orders above ₱5000' }
                ];
                stm_save();
            } else {
                stm_transactions = JSON.parse(localStorage.getItem('stm_transactions')) || [];
                stm_discounts = JSON.parse(localStorage.getItem('stm_discounts')) || [];
            }
        }

        function stm_save() {
            localStorage.setItem('stm_transactions', JSON.stringify(stm_transactions));
            localStorage.setItem('stm_discounts', JSON.stringify(stm_discounts));
        }

        function stm_updateStats() {
            const total = stm_transactions.reduce((s, t) => s + t.amount, 0);
            const count = stm_transactions.length;
            const avg = count > 0 ? Math.round(total / count) : 0;
            const discount = stm_transactions.reduce((s, t) => s + t.discount, 0);
            document.getElementById('stm_totalSales').textContent = '₱' + total.toLocaleString();
            document.getElementById('stm_totalTrans').textContent = count;
            document.getElementById('stm_avgTrans').textContent = '₱' + avg.toLocaleString();
            document.getElementById('stm_totalDiscount').textContent = '₱' + discount.toLocaleString();
        }

        function stm_switchView(view, event) {
            stm_currentView = view;
            document.querySelectorAll('#ordersSection .tab-btn').forEach(b => b.classList.remove('active'));
            event.target.closest('.tab-btn').classList.add('active');
            document.getElementById('stm_transactionsView').style.display = view === 'transactions' ? 'block' : 'none';
            document.getElementById('stm_staffView').style.display = view === 'staff' ? 'block' : 'none';
            document.getElementById('stm_trendsView').style.display = view === 'trends' ? 'block' : 'none';
            if (view === 'staff') stm_renderStaffPerformance();
            if (view === 'trends') stm_renderTrends();
            else stm_renderTransactions();
        }

        function stm_renderTransactions() {
            const tbody = document.getElementById('stm_transactionsTable');
            if (!tbody) return;
            tbody.innerHTML = '';
            const q = (document.getElementById('stm_searchInput') || { value: '' }).value.toLowerCase();
            const status = (document.getElementById('stm_statusFilter') || { value: '' }).value;
            const payment = (document.getElementById('stm_paymentFilter') || { value: '' }).value;

            let filtered = stm_transactions.filter(t => {
                if (status && t.status !== status) return false;
                if (payment && t.payment !== payment) return false;
                if (!q) return true;
                return [t.id, t.customer, t.staff].some(x => (x || '').toLowerCase().includes(q));
            }).sort((a, b) => new Date(b.date + ' ' + b.time) - new Date(a.date + ' ' + a.time));

            if (!filtered.length) {
                tbody.innerHTML = '<tr><td colspan="10" style="text-align:center; padding:20px; color:#8899aa;">No transactions</td></tr>';
                return;
            }

            filtered.forEach(t => {
                const tr = document.createElement('tr');
                tr.innerHTML = `
                    <td><strong>${t.id}</strong></td>
                    <td>${t.date} ${t.time}</td>
                    <td>${t.customer}</td>
                    <td>${t.staff}</td>
                    <td>${t.items}</td>
                    <td>₱${t.amount.toLocaleString()}</td>
                    <td style="color:${t.discount > 0 ? '#f59e0b' : '#8899aa'};">₱${t.discount.toLocaleString()}</td>
                    <td>${t.payment}</td>
                    <td style="color:#10b981; font-weight:600;">${t.status}</td>
                    <td><button class="btn" onclick="stm_showDetail('${t.id}')" style="padding:6px 10px; font-size:11px;">View</button></td>
                `;
                tbody.appendChild(tr);
            });
        }

        function stm_renderStaffPerformance() {
            const tbody = document.getElementById('stm_staffTable');
            if (!tbody) return;
            tbody.innerHTML = '';
            const byStaff = {};
            stm_transactions.forEach(t => {
                if (!byStaff[t.staff]) byStaff[t.staff] = { sales: 0, count: 0 };
                byStaff[t.staff].sales += t.amount;
                byStaff[t.staff].count++;
            });
            Object.entries(byStaff).forEach(([staff, data]) => {
                const avg = Math.round(data.sales / data.count);
                const perf = data.sales > 5000 ? '⭐⭐⭐' : data.sales > 2000 ? '⭐⭐' : '⭐';
                const tr = document.createElement('tr');
                tr.innerHTML = `
                    <td><strong>${staff}</strong></td>
                    <td>₱${data.sales.toLocaleString()}</td>
                    <td>${data.count}</td>
                    <td>₱${avg.toLocaleString()}</td>
                    <td>${perf}</td>
                    <td><button class="btn" onclick="alert('Details for '+this.innerText.split('\n')[0])" style="padding:6px 10px; font-size:11px;">More</button></td>
                `;
                tbody.appendChild(tr);
            });
        }

        function stm_renderTrends() {
            const items = stm_transactions.reduce((a, t) => a + t.items, 0);
            const topItems = '<div style="font-size:12px;"><p>• Cement: 150 units sold</p><p>• Paint: 85 units sold</p><p>• Tools: 120 units sold</p></div>';
            const peaks = '<div style="font-size:12px;"><p>• 10-12 PM: Highest (35% of sales)</p><p>• 2-4 PM: High (28% of sales)</p><p>• Early morning: Low</p></div>';
            const methods = '<div style="font-size:12px;"><p>• Cash: 45%</p><p>• Card: 35%</p><p>• GCash: 20%</p></div>';
            const segments = '<div style="font-size:12px;"><p>• Regular Customers: 60%</p><p>• Walk-in: 30%</p><p>• Bulk Orders: 10%</p></div>';
            document.getElementById('stm_topItems').innerHTML = topItems;
            document.getElementById('stm_peakHours').innerHTML = peaks;
            document.getElementById('stm_paymentMethods').innerHTML = methods;
            document.getElementById('stm_segments').innerHTML = segments;
        }

        function stm_showDetail(id) {
            const t = stm_transactions.find(x => x.id === id);
            if (!t) return;
            const content = document.getElementById('stm_detailContent');
            content.innerHTML = `
                <p><strong>Transaction ID:</strong> ${t.id}</p>
                <p><strong>Date & Time:</strong> ${t.date} ${t.time}</p>
                <p><strong>Customer:</strong> ${t.customer}</p>
                <p><strong>Staff Member:</strong> ${t.staff}</p>
                <p><strong>Items Sold:</strong> ${t.items}</p>
                <p><strong>Amount:</strong> ₱${t.amount.toLocaleString()}</p>
                <p><strong>Discount Applied:</strong> ₱${t.discount.toLocaleString()}</p>
                <p><strong>Final Total:</strong> <strong style="color:#10b981;">₱${(t.amount - t.discount).toLocaleString()}</strong></p>
                <p><strong>Payment Method:</strong> ${t.payment}</p>
                <p><strong>Status:</strong> <span style="color:#10b981;">${t.status}</span></p>
            `;
            document.getElementById('stm_detailModal').classList.add('active');
        }

        function stm_closeDetail() { document.getElementById('stm_detailModal').classList.remove('active'); }

        function stm_openDiscountModal() {
            const list = document.getElementById('stm_discountList');
            list.innerHTML = stm_discounts.length ? stm_discounts.map((d, i) => `
                <div style="background:rgba(0,0,0,0.3); padding:10px; border-radius:6px; margin-bottom:8px; display:flex; justify-content:space-between;">
                    <div><strong>${d.name}</strong> - <span style="color:#f59e0b;">${d.percent}% off</span><br><small>${d.desc}</small></div>
                    <button class="btn btn-danger" onclick="stm_removeDiscount(${i})" style="padding:4px 8px; font-size:11px;">Remove</button>
                </div>
            `).join('') : '<p>No active discount policies</p>';
            document.getElementById('stm_discountModal').classList.add('active');
        }

        function stm_closeDiscount() { document.getElementById('stm_discountModal').classList.remove('active'); }

        function stm_addDiscount() {
            const name = document.getElementById('stm_discountName').value.trim();
            const percent = Number(document.getElementById('stm_discountPercent').value || 0);
            const desc = document.getElementById('stm_discountDesc').value.trim();
            if (!name || !percent || !desc) return alert('All fields required');
            stm_discounts.push({ name, percent, desc });
            stm_save();
            ['stm_discountName', 'stm_discountPercent', 'stm_discountDesc'].forEach(id => document.getElementById(id).value = '');
            stm_openDiscountModal();
        }

        function stm_removeDiscount(i) {
            stm_discounts.splice(i, 1);
            stm_save();
            stm_openDiscountModal();
        }

        function stm_generateReport(period) {
            const title = period.charAt(0).toUpperCase() + period.slice(1) + ' Sales Report';
            document.getElementById('stm_reportTitle').textContent = title;
            const total = stm_transactions.reduce((s, t) => s + t.amount, 0);
            const discount = stm_transactions.reduce((s, t) => s + t.discount, 0);
            const content = `
                <h4>${title}</h4>
                <p><strong>Period:</strong> ${period}</p>
                <p><strong>Total Transactions:</strong> ${stm_transactions.length}</p>
                <p><strong>Total Sales:</strong> ₱${total.toLocaleString()}</p>
                <p><strong>Total Discounts:</strong> ₱${discount.toLocaleString()}</p>
                <p><strong>Net Revenue:</strong> ₱${(total - discount).toLocaleString()}</p>
                <h4 style="margin-top:20px;">Top Performers</h4>
                <div>${stm_staffMembers.map((s, i) => `<p>${i + 1}. ${s}</p>`).join('')}</div>
                <h4 style="margin-top:20px;">Payment Methods</h4>
                <p>Cash: 45% | Card: 35% | GCash: 20%</p>
                <div style="margin-top:20px; padding-top:15px; border-top:1px solid rgba(255,255,255,0.1); font-size:12px; color:#8899aa;">
                    <p>Report generated: ${new Date().toLocaleString()}</p>
                </div>
            `;
            document.getElementById('stm_reportContent').innerHTML = content;
            document.getElementById('stm_reportModal').classList.add('active');
        }

        function stm_closeReport() { document.getElementById('stm_reportModal').classList.remove('active'); }

        function stm_downloadReport() {
            const title = document.getElementById('stm_reportTitle').textContent;
            const content = document.getElementById('stm_reportContent').innerText;
            const blob = new Blob([title + '\n\n' + content], { type: 'text/plain' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = title.replace(/\s+/g, '_') + '.txt';
            a.click();
            URL.revokeObjectURL(url);
        }

        function stm_exportReport() {
            const csv = 'Transaction ID,Date,Time,Customer,Staff,Items,Amount,Discount,Payment,Status\n';
            const rows = stm_transactions.map(t => `${t.id},${t.date},${t.time},${t.customer},${t.staff},${t.items},${t.amount},${t.discount},${t.payment},${t.status}`);
            const blob = new Blob([csv + rows.join('\n')], { type: 'text/csv' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'sales_report_' + new Date().toISOString().slice(0, 10) + '.csv';
            a.click();
            URL.revokeObjectURL(url);
            alert('Report exported successfully');
        }

        document.addEventListener('DOMContentLoaded', () => {
            stm_init(); stm_updateStats(); stm_renderTransactions();
            ['stm_searchInput', 'stm_statusFilter', 'stm_paymentFilter'].forEach(id => {
                const el = document.getElementById(id);
                if (el) el.addEventListener('input', stm_renderTransactions);
            });
        });
    </script>
</body>

</html>